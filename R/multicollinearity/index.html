<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Harsha's blog on data science"><meta name=author content="Harsha Achyuthuni"><link href=https://www.harshaash.com/R/multicollinearity/ rel=canonical><link rel=icon href=../../assets/images/logo.jpg><meta name=generator content="mkdocs-1.2.2, mkdocs-material-7.2.4"><title>Multicollinearity - Data Science with Harsha</title><link rel=stylesheet href=../../assets/stylesheets/main.f7f47774.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.3f5d1f46.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=../../overrides/assets/stylesheets/user_defined.css><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-65034507-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-scheme data-md-color-primary data-md-color-accent> <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#collinearity class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Data Science with Harsha" class="md-header__button md-logo" aria-label="Data Science with Harsha" data-md-component=logo> <img src=../../assets/images/logo.jpg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Data Science with Harsha </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Multicollinearity </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme data-md-color-primary data-md-color-accent aria-hidden=true type=radio name=__palette id=__palette_1> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme data-md-color-primary data-md-color-accent aria-hidden=true type=radio name=__palette id=__palette_3> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_4> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_3 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Data Science with Harsha" class="md-nav__button md-logo" aria-label="Data Science with Harsha" data-md-component=logo> <img src=../../assets/images/logo.jpg alt=logo> </a> Data Science with Harsha </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../../resume/ class=md-nav__link> Resume </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> Blog <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Blog data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_1 type=checkbox id=__nav_3_1 checked> <label class=md-nav__link for=__nav_3_1> Visualization <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Visualization data-md-level=2> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Visualization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Python/Vizualisation%20using%20python%20Part%201/ class=md-nav__link> Vizualizing tabular data (Python) </a> </li> <li class=md-nav__item> <a href=../../Python/Visualization%20for%20predictive%20analytics/ class=md-nav__link> Vizualising for predictive analytics (Python) </a> </li> <li class=md-nav__item> <a href=../Univariate-analysis/ class=md-nav__link> Univariate Analysis (R) </a> </li> <li class=md-nav__item> <a href=../multivariateAnalysis/ class=md-nav__link> Multivariate Analysis (R) </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Multicollinearity (R) <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Multicollinearity (R) </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#collinearity class=md-nav__link> Collinearity </a> <nav class=md-nav aria-label=Collinearity> <ul class=md-nav__list> <li class=md-nav__item> <a href=#correlation class=md-nav__link> Correlation </a> </li> <li class=md-nav__item> <a href=#pearsons-product-moment-coefficient class=md-nav__link> Pearson's product-moment coefficient </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#multicollinearity class=md-nav__link> Multicollinearity </a> <nav class=md-nav aria-label=Multicollinearity> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-problems-do-multicollinearity-cause class=md-nav__link> What problems do multicollinearity cause? </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#in-time-analysis-problem class=md-nav__link> In-time analysis problem </a> </li> <li class=md-nav__item> <a href=#testing-for-collinearity class=md-nav__link> Testing for collinearity </a> <nav class=md-nav aria-label="Testing for collinearity"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#correlation-matrix class=md-nav__link> Correlation matrix </a> </li> <li class=md-nav__item> <a href=#correlation-network class=md-nav__link> Correlation Network </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> References </a> </li> <li class=md-nav__item> <a href=#basic-statistical-formulas class=md-nav__link> Basic statistical formulas </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2> Statistics basics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Statistics basics" data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Statistics basics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Probability/ class=md-nav__link> Probability (R) </a> </li> <li class=md-nav__item> <a href=../vectors/ class=md-nav__link> Vectors (R) </a> </li> <li class=md-nav__item> <a href=../matrices/ class=md-nav__link> Matrices (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3> Hypothesis Testing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Hypothesis Testing" data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Hypothesis Testing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../attendance_t_test/ class=md-nav__link> z-test and t-test (R) </a> </li> <li class=md-nav__item> <a href=../anova/ class=md-nav__link> ANOVA Test (R) </a> </li> <li class=md-nav__item> <a href=../chi-sq-goodness-of-fit/ class=md-nav__link> Chi-Square Goodness of fit (R) </a> </li> <li class=md-nav__item> <a href=../chi-sq-test-of-independence/ class=md-nav__link> Chi-Square test of independence (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4> Factor Analysis <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Factor Analysis" data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Factor Analysis </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Curse-of-Dimensionality/ class=md-nav__link> Curse of dimensionality </a> </li> <li class=md-nav__item> <a href=../EFA/ class=md-nav__link> Exploratory factor analysis (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_5 type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5> Prediction algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Prediction algorithms" data-md-level=2> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Prediction algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_5_1 type=checkbox id=__nav_3_5_1> <label class=md-nav__link for=__nav_3_5_1> Classification Algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Classification Algorithms" data-md-level=3> <label class=md-nav__title for=__nav_3_5_1> <span class="md-nav__icon md-icon"></span> Classification Algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../logistic-regression/ class=md-nav__link> Logistic Regression (R) </a> </li> <li class=md-nav__item> <a href=../CHAID/ class=md-nav__link> CHAID Decision Trees (R) </a> </li> <li class=md-nav__item> <a href=../CART-Classification/ class=md-nav__link> CART Classification (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_5_2 type=checkbox id=__nav_3_5_2> <label class=md-nav__link for=__nav_3_5_2> Regression Algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Regression Algorithms" data-md-level=3> <label class=md-nav__title for=__nav_3_5_2> <span class="md-nav__icon md-icon"></span> Regression Algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../part-and-partial-corr/ class=md-nav__link> Part and partial correlation </a> </li> <li class=md-nav__item> <a href=../Linear-regression/ class=md-nav__link> Linear Regression (R) </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_6 type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6> Preprocessing data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Preprocessing data" data-md-level=2> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Preprocessing data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../KNN_Imputation/ class=md-nav__link> Null Value Imputation (R) </a> </li> <li class=md-nav__item> <a href=../../Python/Machine%20Learning%20Part%201/ class=md-nav__link> Feature engineering (Python) </a> </li> <li class=md-nav__item> <a href=../Handling-Imbalanced-classes/ class=md-nav__link> Handling Imbalanced Classes </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_7 type=checkbox id=__nav_3_7> <label class=md-nav__link for=__nav_3_7> Machine Learning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Machine Learning" data-md-level=2> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Machine Learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://harshaachyuthuni.shinyapps.io/Machine_Learning/ class=md-nav__link> Interactive Machine Learning (RShiny) </a> </li> <li class=md-nav__item> <a href=../../Python/ML%20using%20scikit-learn/ class=md-nav__link> ML using scikit-learn (Python) </a> </li> <li class=md-nav__item> <a href=../../Python/Demonstrating%20online%20learning/ class=md-nav__link> Streaming Machine Learning (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_8 type=checkbox id=__nav_3_8> <label class=md-nav__link for=__nav_3_8> Time Series forecasting <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Time Series forecasting" data-md-level=2> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Time Series forecasting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../time-series/ class=md-nav__link> Introduction to stationarity (R) </a> </li> <li class=md-nav__item> <a href=../Stationarity-tests/ class=md-nav__link> Stationary Tests (R) </a> </li> <li class=md-nav__item> <a href=../ARIMA/ class=md-nav__link> ARIMA in R </a> </li> <li class=md-nav__item> <a href=../../Python/ARIMA%20Forecasting/ class=md-nav__link> ARIMA in Python </a> </li> <li class=md-nav__item> <a href=../Seasonal-Time-Series/ class=md-nav__link> Seasonal time series (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_9 type=checkbox id=__nav_3_9> <label class=md-nav__link for=__nav_3_9> Deep learning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Deep learning" data-md-level=2> <label class=md-nav__title for=__nav_3_9> <span class="md-nav__icon md-icon"></span> Deep learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ANN-1/ class=md-nav__link> Artificial Neural Network (Theory) </a> </li> <li class=md-nav__item> <a href=../ANN2/ class=md-nav__link> The math behind ANN </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_10 type=checkbox id=__nav_3_10> <label class=md-nav__link for=__nav_3_10> Prescriptive Analytics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Prescriptive Analytics" data-md-level=2> <label class=md-nav__title for=__nav_3_10> <span class="md-nav__icon md-icon"></span> Prescriptive Analytics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Linear-programming/ class=md-nav__link> Linear Programming (R) </a> </li> <li class=md-nav__item> <a href=../adoption_of_new_product/ class=md-nav__link> Adoption of new product (R) </a> </li> <li class=md-nav__item> <a href=../../Python/Diffusion%20on%20networks/ class=md-nav__link> Bass Forecasting model (Python) </a> </li> <li class=md-nav__item> <a href=../../Others/AHP/ class=md-nav__link> Analytic Hierarchy Process </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_11 type=checkbox id=__nav_3_11> <label class=md-nav__link for=__nav_3_11> Clustering <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Clustering data-md-level=2> <label class=md-nav__title for=__nav_3_11> <span class="md-nav__icon md-icon"></span> Clustering </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../hierarchical_clustering/ class=md-nav__link> Hierarchical Clustering </a> </li> <li class=md-nav__item> <a href=../kMeansClustering/ class=md-nav__link> K-Means Clustering </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_12 type=checkbox id=__nav_3_12> <label class=md-nav__link for=__nav_3_12> Reinforcement Learning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Reinforcement Learning" data-md-level=2> <label class=md-nav__title for=__nav_3_12> <span class="md-nav__icon md-icon"></span> Reinforcement Learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../CustomerLifetimeValue/ class=md-nav__link> Customer Lifetime Value </a> </li> <li class=md-nav__item> <a href=../recommendation-systems/ class=md-nav__link> Recommendation Systems </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_13 type=checkbox id=__nav_3_13> <label class=md-nav__link for=__nav_3_13> Networks <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Networks data-md-level=2> <label class=md-nav__title for=__nav_3_13> <span class="md-nav__icon md-icon"></span> Networks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Python/Introduction%20to%20Networkx/ class=md-nav__link> Introduction to NetworkX (Python) </a> </li> <li class=md-nav__item> <a href=../../Python/Network%20Science/ class=md-nav__link> Network Science (Python) </a> </li> <li class=md-nav__item> <a href=../../Python/Network%20centrality/ class=md-nav__link> Network Centrality (Python) </a> </li> <li class=md-nav__item> <a href=../../Python/Shortest%20path%20problems/ class=md-nav__link> Shortest path using integer programming (Python) </a> </li> <li class=md-nav__item> <a href=../../Python/Network%20Flow%20problems/ class=md-nav__link> Network flow problems (Python) </a> </li> <li class=md-nav__item> <a href=../../Python/Community%20detection/ class=md-nav__link> Community detection (Python) </a> </li> <li class=md-nav__item> <a href=../../Python/Bipartite%20matching/ class=md-nav__link> Bipartite matching (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_14 type=checkbox id=__nav_3_14> <label class=md-nav__link for=__nav_3_14> Deployment <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Deployment data-md-level=2> <label class=md-nav__title for=__nav_3_14> <span class="md-nav__icon md-icon"></span> Deployment </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Python/Machine%20learning%20as%20HTTP%20Request/ class=md-nav__link> ML deployment in Flask (Python) </a> </li> <li class=md-nav__item> <a href=../../Python/Saving%20predictions%20in%20database/ class=md-nav__link> Handling databases using python </a> </li> <li class=md-nav__item> <a href=../../Python/ORM/ class=md-nav__link> ORM (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_15 type=checkbox id=__nav_3_15> <label class=md-nav__link for=__nav_3_15> Higher education review <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Higher education review" data-md-level=2> <label class=md-nav__title for=__nav_3_15> <span class="md-nav__icon md-icon"></span> Higher education review </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/IIMB%20BAI/ class=md-nav__link> IIMB BAI </a> </li> <li class=md-nav__item> <a href=../../Others/part%20time%20data%20science%20masters/ class=md-nav__link> Part-time DS masters </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_16 type=checkbox id=__nav_3_16> <label class=md-nav__link for=__nav_3_16> External blogs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="External blogs" data-md-level=2> <label class=md-nav__title for=__nav_3_16> <span class="md-nav__icon md-icon"></span> External blogs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/Imperial%20College%20London/ class=md-nav__link> Imperial college London </a> </li> <li class=md-nav__item> <a href=../../Others/Rolls%20Royce/ class=md-nav__link> Rolls Royce </a> </li> <li class=md-nav__item> <a href=../../Others/Publications/ class=md-nav__link> Publications/conferences </a> </li> <li class=md-nav__item> <a href=../../Others/Deployed%20apps/ class=md-nav__link> Deployed apps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_17 type=checkbox id=__nav_3_17> <label class=md-nav__link for=__nav_3_17> Projects <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Projects data-md-level=2> <label class=md-nav__title for=__nav_3_17> <span class="md-nav__icon md-icon"></span> Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/Scarecrow/ class=md-nav__link> Scarecrow </a> </li> <li class=md-nav__item> <a href=../../Others/bid%20allocation%20model/ class=md-nav__link> Bid Allocation </a> </li> <li class=md-nav__item> <a href=../../Others/IIMB%20project/ class=md-nav__link> Reward and Recognition contests </a> </li> <li class=md-nav__item> <a href=../../Others/supply%20chain%20analytics/ class=md-nav__link> Supply chain analytics </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#collinearity class=md-nav__link> Collinearity </a> <nav class=md-nav aria-label=Collinearity> <ul class=md-nav__list> <li class=md-nav__item> <a href=#correlation class=md-nav__link> Correlation </a> </li> <li class=md-nav__item> <a href=#pearsons-product-moment-coefficient class=md-nav__link> Pearson's product-moment coefficient </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#multicollinearity class=md-nav__link> Multicollinearity </a> <nav class=md-nav aria-label=Multicollinearity> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-problems-do-multicollinearity-cause class=md-nav__link> What problems do multicollinearity cause? </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#in-time-analysis-problem class=md-nav__link> In-time analysis problem </a> </li> <li class=md-nav__item> <a href=#testing-for-collinearity class=md-nav__link> Testing for collinearity </a> <nav class=md-nav aria-label="Testing for collinearity"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#correlation-matrix class=md-nav__link> Correlation matrix </a> </li> <li class=md-nav__item> <a href=#correlation-network class=md-nav__link> Correlation Network </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> References </a> </li> <li class=md-nav__item> <a href=#basic-statistical-formulas class=md-nav__link> Basic statistical formulas </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Multicollinearity (R)</h1> <script type=text/javascript src=https://cdn.mathjax.org/mathjax/latest/MathJax.js>
MathJax.Hub.Config({
 extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js"],
 jax: ["input/TeX", "output/HTML-CSS"],
 tex2jax: {
     inlineMath: [ ['$','$'], ["\\(","\\)"] ],
     displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
 },
 "HTML-CSS": { availableFonts: ["TeX"] }
});
</script> <p>I want to go through some basic statistical concepts before starting with the problem. I want to explain what is multicollinearity and how and when to tackle it. </p> <h2 id=collinearity>Collinearity<a class=headerlink href=#collinearity title="Permanent link">&para;</a></h2> <p>Collinearity is a linear association between two variables. Two variables are perfectly collinear if there is an exact linear relationship between them. For example, <span class=arithmatex>\({\displaystyle X_{1}}\)</span> and <span class=arithmatex>\({\displaystyle X_{2}}\)</span> are perfectly collinear if there exist parameters <span class=arithmatex>\({\displaystyle \lambda _{0}}\)</span> and <span class=arithmatex>\({\displaystyle \lambda _{1}}\)</span> such that, for all observations i, we have </p> <p>$$ X_{2i} = \lambda_0 + \lambda_1 X_{1i} $$ Here <span class=arithmatex>\({\displaystyle \lambda _{1}}\)</span> can be considered as the slope of the equation and <span class=arithmatex>\({\displaystyle \lambda _{0}}\)</span> is the intercept. </p> <h3 id=correlation>Correlation<a class=headerlink href=#correlation title="Permanent link">&para;</a></h3> <p>Correlation is a numerical measure. It measures how close two variables are having a linear relationship with each other. The most popular form of correlation coefficient is the Pearson's coefficient(<span class=arithmatex>\(r_{xy}\)</span>).</p> <h3 id=pearsons-product-moment-coefficient>Pearson's product-moment coefficient<a class=headerlink href=#pearsons-product-moment-coefficient title="Permanent link">&para;</a></h3> <p>It is obtained by dividing the co-variance of the two variables by the product of their standard deviations.</p> <p><span class=arithmatex>\({\displaystyle r_{xy}=\mathrm {corr} (X,Y)={\mathrm {cov} (X,Y) \over \sigma _{X}\sigma _{Y}} = {\frac {\sum \limits _{i=1}^{n}(x_{i}-{\bar {x}})(y_{i}-{\bar {y}})}{(n-1)s_{x}s_{y}}}={\frac {\sum \limits _{i=1}^{n}(x_{i}-{\bar {x}})(y_{i}-{\bar {y}})}{\sqrt {\sum \limits _{i=1}^{n}(x_{i}-{\bar {x}})^{2}\sum \limits _{i=1}^{n}(y_{i}-{\bar {y}})^{2}}}},}\)</span> </p> <p>Where x and y are the means of X and Y, and <span class=arithmatex>\(s_{x}, s_{y}\)</span> are the standard deviations of X and Y.</p> <p>The Pearson correlation is <span class=arithmatex>\(+1\)</span> in case of a perfect direct(increasing) linear relationship (correlation), <span class=arithmatex>\(-1\)</span> in the case of a perfect decreasing (inverse) linear relationship(anti-correlation), and some value in the open interval <span class=arithmatex>\((-1, +1)\)</span> in all other cases, indicating the degree of linear dependence between the variables. As it approaches zero there is less of a relationship(closer to uncorrelated). The closer the coefficient is to either <span class=arithmatex>\(-1\)</span> or <span class=arithmatex>\(+1\)</span>, the stronger is the correlation between the variables. </p> <p>If the variables are independent, Pearson's correlation coefficient is 0, but the converse is not true because the correlation coefficient detects only linear dependencies between two variables. For example, suppose the random variable X is symmetrically distributed about zero, and <span class=arithmatex>\(Y = X^{2}\)</span>. Then Y is completely determined by X, so that X and Y are perfectly dependent, but their correlation is zero. </p> <h2 id=multicollinearity>Multicollinearity<a class=headerlink href=#multicollinearity title="Permanent link">&para;</a></h2> <p>Multicollinearity occurs when independent variables in a regression model are correlated. This correlation is a problem because independent variables should be independent. If the degree of correlation between variables is high, it can cause problems when I fit the model and interpret the results. </p> <p>A key goal of regression (or classification) analysis is to isolate the relationship between each independent variable and the dependent variable. The interpretation of a regression coefficient is that it represents the mean change in the dependent variable for each 1 unit change in an independent variable when I hold all the other independent variables constant. That last portion is crucial for our discussion about multicollinearity.</p> <p>The idea is that I can change the value of one independent variable and not the others. However, when independent variables are correlated, it indicates that changes in one variable are associated with shifts in another variable. The stronger the correlation, the more difficult it is to change one variable without changing another. It becomes difficult for the model to estimate the relationship between each independent variable and the dependent variable independently because the independent variables tend to change in unison.</p> <h3 id=what-problems-do-multicollinearity-cause>What problems do multicollinearity cause?<a class=headerlink href=#what-problems-do-multicollinearity-cause title="Permanent link">&para;</a></h3> <ol> <li>The coefficients become very sensitive to small changes in the model. </li> <li>I will not be able to trust the p-values to identify independent variables that are statistically significant. </li> </ol> <p>That said, I need not always fix multicollinearity. Multicollinearity affects the coefficients and p-values, but it does not influence the predictions, precision of the predictions, and the goodness-of-fit statistics. If my primary goal is to make predictions, and I don't need to understand the role of each independent variable, I don't need to reduce severe multicollinearity.</p> <h2 id=in-time-analysis-problem>In-time analysis problem<a class=headerlink href=#in-time-analysis-problem title="Permanent link">&para;</a></h2> <p>Now that I have discussed this much, let me continue with the <a href=http://www.aharsha.com/in-time-problem>in-time analysis problem</a>. I want to analyse my entry time at office and understand how different factors effect it. </p> <p>Collinearity checks are done after Univariate and multivariate analysis in EDA. One reason for doing so is that now I know how each factor looks like, and as collinearity is only a linear association between two explanatory variables, we can convert our factors to linear after applying some functions on them(log, square root etc). </p> <p>After <a href=../multivariateAnalysis/ >multivariate analysis</a>, I currently have the factors<br> 1. date (month / week day / season etc)<br> 2. main_activity (means of transport)<br> 3. hours.worked (of the previous day)<br> 4. travelling.time (time it took to travel from house to office)<br> 5. home.addr (the place of residence)<br> 6. diff.out.time (previous day out of office time)</p> <p>Out of these factors, only travelling.time, hours.worked and diff.out.time are continuous variables, so for now I will restrict my analysis to these three factors. </p> <p>The dependent variable is diff.in.time (difference between my actual in time vs policy in-time) </p> <table class=table style="margin-left: auto; margin-right: auto;"> <caption>Sample Data</caption> <thead> <tr> <th style=text-align:right;> diff.in.time </th> <th style=text-align:left;> date </th> <th style=text-align:left;> main_activity </th> <th style=text-align:right;> hours.worked </th> <th style=text-align:right;> travelling.time </th> <th style=text-align:left;> home.addr </th> <th style=text-align:right;> diff.out.time </th> </tr> </thead> <tbody> <tr> <td style=text-align:right;> -14 </td> <td style=text-align:left;> 2018-10-09 </td> <td style=text-align:left;> ON_BICYCLE </td> <td style=text-align:right;> 10.033333 </td> <td style=text-align:right;> 1147.000 </td> <td style=text-align:left;> New House </td> <td style=text-align:right;> 76 </td> </tr> <tr> <td style=text-align:right;> 35 </td> <td style=text-align:left;> 2018-03-30 </td> <td style=text-align:left;> IN_VEHICLE </td> <td style=text-align:right;> 9.383333 </td> <td style=text-align:right;> 854.006 </td> <td style=text-align:left;> Old House </td> <td style=text-align:right;> -12 </td> </tr> <tr> <td style=text-align:right;> 31 </td> <td style=text-align:left;> 2018-11-02 </td> <td style=text-align:left;> ON_FOOT </td> <td style=text-align:right;> 10.800000 </td> <td style=text-align:right;> 2183.856 </td> <td style=text-align:left;> New House </td> <td style=text-align:right;> 77 </td> </tr> <tr> <td style=text-align:right;> 1 </td> <td style=text-align:left;> 2018-08-03 </td> <td style=text-align:left;> IN_VEHICLE </td> <td style=text-align:right;> 9.816667 </td> <td style=text-align:right;> 633.513 </td> <td style=text-align:left;> Old House </td> <td style=text-align:right;> 48 </td> </tr> <tr> <td style=text-align:right;> 22 </td> <td style=text-align:left;> 2018-04-04 </td> <td style=text-align:left;> IN_VEHICLE </td> <td style=text-align:right;> 9.266667 </td> <td style=text-align:right;> 1115.000 </td> <td style=text-align:left;> Old House </td> <td style=text-align:right;> -6 </td> </tr> </tbody> </table> <p>As a recap on <a href=../Univariate-analysis/ >univariate analysis</a>, hours.worked and diff.in.out.time were exponential distributions(while checking for collinearity we should take their log for linear relationships), </p> <p><img alt src=../multicolleniarity_files/figure-html/q_q_plot_exp-1.png><!-- --></p> <p>while travelling.time is close to a normal distribution(with an exponential tails, but let us ignore that for a now) </p> <p><img alt src=../multicolleniarity_files/figure-html/q_q_plot-1.png><!-- --></p> <h2 id=testing-for-collinearity>Testing for collinearity<a class=headerlink href=#testing-for-collinearity title="Permanent link">&para;</a></h2> <p>One of the most popular tests to check multicollinearity is VIF factor(which will be discussed and calculated in <a href=../Linear-regression>linear regression</a> blog post). What I want to instead do is visually see how the independent factors influence one another. I can do it in two main ways:</p> <h3 id=correlation-matrix>Correlation matrix<a class=headerlink href=#correlation-matrix title="Permanent link">&para;</a></h3> <p>A correlation matrix is a table showing correlation coefficients(<span class=arithmatex>\(r_{xy}\)</span>) between variables. Each cell in the table shows the correlation between two variables. </p> <p>First I will make a reusable correlation matrix plotting function. </p> <div class=highlight><pre><span></span><code><span class=n>corr_matrix_plotting_fxn</span> <span class=o>&lt;-</span> <span class=nf>function</span><span class=p>(</span><span class=n>df</span><span class=p>){</span>
  <span class=nf>library</span><span class=p>(</span><span class=n>reshape</span><span class=p>)</span>
  <span class=nf>library</span><span class=p>(</span><span class=n>ggplot2</span><span class=p>)</span>

  <span class=c1># Making a correlation matrix</span>
  <span class=n>cormat</span> <span class=o>&lt;-</span> <span class=nf>round</span><span class=p>(</span><span class=nf>cor</span><span class=p>(</span><span class=n>df</span><span class=p>),</span> <span class=m>2</span><span class=p>)</span>

  <span class=c1># Getting the upper triangular matrix</span>
  <span class=n>cormat</span><span class=p>[</span><span class=nf>upper.tri</span><span class=p>(</span><span class=n>cormat</span><span class=p>)]</span><span class=o>&lt;-</span> <span class=kc>NA</span>

  <span class=c1># Melt the correlation data and drop the rows with NA values</span>
  <span class=n>melted_cormat</span> <span class=o>&lt;-</span> <span class=n>reshape</span><span class=o>::</span><span class=nf>melt</span><span class=p>(</span><span class=n>cormat</span><span class=p>,</span> <span class=n>na.rm</span> <span class=o>=</span> <span class=kc>TRUE</span><span class=p>)</span>
  <span class=nf>colnames</span><span class=p>(</span><span class=n>melted_cormat</span><span class=p>)</span> <span class=o>&lt;-</span> <span class=nf>c</span><span class=p>(</span><span class=s>&#39;Var1&#39;</span><span class=p>,</span> <span class=s>&#39;Var2&#39;</span><span class=p>,</span> <span class=s>&#39;value&#39;</span><span class=p>)</span>
  <span class=n>melted_cormat</span> <span class=o>&lt;-</span> <span class=n>melted_cormat</span> <span class=o>%&gt;%</span> <span class=nf>filter</span><span class=p>(</span><span class=o>!</span><span class=nf>is.na</span><span class=p>(</span><span class=n>value</span><span class=p>))</span>

  <span class=c1># Plot the corelation matrix</span>
  <span class=n>ggheatmap</span> <span class=o>&lt;-</span> <span class=nf>ggplot</span><span class=p>(</span><span class=n>melted_cormat</span><span class=p>,</span> <span class=nf>aes</span><span class=p>(</span><span class=n>Var2</span><span class=p>,</span> <span class=n>Var1</span><span class=p>,</span> <span class=n>fill</span> <span class=o>=</span> <span class=n>value</span><span class=p>))</span><span class=o>+</span>
  <span class=nf>geom_tile</span><span class=p>(</span><span class=n>color</span> <span class=o>=</span> <span class=s>&quot;black&quot;</span><span class=p>)</span><span class=o>+</span>
  <span class=nf>scale_fill_gradient2</span><span class=p>(</span><span class=n>low</span> <span class=o>=</span> <span class=s>&quot;red&quot;</span><span class=p>,</span> <span class=n>high</span> <span class=o>=</span> <span class=s>&quot;green&quot;</span><span class=p>,</span> <span class=n>mid</span> <span class=o>=</span> <span class=s>&quot;white&quot;</span><span class=p>,</span> 
                       <span class=n>midpoint</span> <span class=o>=</span> <span class=m>0</span><span class=p>,</span> <span class=n>limit</span> <span class=o>=</span> <span class=nf>c</span><span class=p>(</span><span class=m>-1</span><span class=p>,</span><span class=m>1</span><span class=p>),</span> <span class=n>space</span> <span class=o>=</span> <span class=s>&quot;Lab&quot;</span><span class=p>,</span> 
                       <span class=n>name</span><span class=o>=</span><span class=s>&quot;Pearson\nCorrelation&quot;</span><span class=p>)</span> <span class=o>+</span>
  <span class=c1># theme_minimal()+ # minimal theme</span>
  <span class=nf>theme</span><span class=p>(</span><span class=n>axis.text.x</span> <span class=o>=</span> <span class=nf>element_text</span><span class=p>(</span><span class=n>angle</span> <span class=o>=</span> <span class=m>45</span><span class=p>,</span> <span class=n>vjust</span> <span class=o>=</span> <span class=m>1</span><span class=p>,</span> <span class=n>size</span> <span class=o>=</span> <span class=m>12</span><span class=p>,</span> <span class=n>hjust</span> <span class=o>=</span> <span class=m>1</span><span class=p>))</span><span class=o>+</span>
  <span class=nf>coord_fixed</span><span class=p>()</span> <span class=o>+</span> 
  <span class=nf>geom_text</span><span class=p>(</span><span class=nf>aes</span><span class=p>(</span><span class=n>Var2</span><span class=p>,</span> <span class=n>Var1</span><span class=p>,</span> <span class=n>label</span> <span class=o>=</span> <span class=n>value</span><span class=p>),</span> <span class=n>color</span> <span class=o>=</span> <span class=s>&quot;black&quot;</span><span class=p>,</span> <span class=n>size</span> <span class=o>=</span> <span class=m>4</span><span class=p>)</span> <span class=o>+</span>
  <span class=nf>theme</span><span class=p>(</span>
    <span class=n>axis.title.x</span> <span class=o>=</span> <span class=nf>element_blank</span><span class=p>(),</span>
    <span class=n>axis.title.y</span> <span class=o>=</span> <span class=nf>element_blank</span><span class=p>(),</span>
    <span class=n>panel.grid.major</span> <span class=o>=</span> <span class=nf>element_blank</span><span class=p>(),</span>
    <span class=n>panel.border</span> <span class=o>=</span> <span class=nf>element_blank</span><span class=p>(),</span>
    <span class=n>panel.background</span> <span class=o>=</span> <span class=nf>element_blank</span><span class=p>(),</span>
    <span class=n>axis.ticks</span> <span class=o>=</span> <span class=nf>element_blank</span><span class=p>(),</span>
    <span class=n>legend.justification</span> <span class=o>=</span> <span class=nf>c</span><span class=p>(</span><span class=m>1</span><span class=p>,</span> <span class=m>0</span><span class=p>),</span>
    <span class=n>legend.position</span> <span class=o>=</span> <span class=nf>c</span><span class=p>(</span><span class=m>0.6</span><span class=p>,</span> <span class=m>0.7</span><span class=p>),</span>
    <span class=n>legend.direction</span> <span class=o>=</span> <span class=s>&quot;horizontal&quot;</span><span class=p>)</span><span class=o>+</span>
  <span class=nf>guides</span><span class=p>(</span><span class=n>fill</span> <span class=o>=</span> <span class=nf>guide_colorbar</span><span class=p>(</span><span class=n>barwidth</span> <span class=o>=</span> <span class=m>7</span><span class=p>,</span> <span class=n>barheight</span> <span class=o>=</span> <span class=m>1</span><span class=p>,</span>
                               <span class=n>title.position</span> <span class=o>=</span> <span class=s>&quot;top&quot;</span><span class=p>,</span> <span class=n>title.hjust</span> <span class=o>=</span> <span class=m>0.5</span><span class=p>))</span>
  <span class=nf>print</span><span class=p>(</span><span class=n>ggheatmap</span><span class=p>)</span>

<span class=p>}</span>
</code></pre></div> <p>In the above function, I will just input the data frame with the necessary columns(modified dependent variables) and I will get the plot. </p> <div class=highlight><pre><span></span><code><span class=c1># Selecting necessary columns after converting to linear data sets</span>
<span class=n>corr.variables</span> <span class=o>&lt;-</span> <span class=n>travel</span> <span class=o>%&gt;%</span>
  <span class=nf>filter</span><span class=p>(</span><span class=n>diff.out.time</span> <span class=o>&gt;</span> <span class=m>-15</span><span class=p>)</span> <span class=o>%&gt;%</span> 
  <span class=nf>mutate</span><span class=p>(</span><span class=n>log.hours.worked</span> <span class=o>=</span> <span class=nf>log</span><span class=p>(</span><span class=n>hours.worked</span><span class=p>),</span>
         <span class=n>log.diff.out.time</span> <span class=o>=</span> <span class=nf>log</span><span class=p>(</span><span class=n>diff.out.time</span> <span class=o>+</span> <span class=m>15</span><span class=p>))</span> <span class=o>%&gt;%</span> 
  <span class=n>dplyr</span><span class=o>::</span><span class=nf>select</span><span class=p>(</span><span class=n>travelling.time</span><span class=p>,</span> <span class=n>log.hours.worked</span><span class=p>,</span> <span class=n>log.diff.out.time</span><span class=p>)</span>

<span class=c1># Plotting the matrix</span>
<span class=nf>corr_matrix_plotting_fxn</span><span class=p>(</span><span class=n>corr.variables</span><span class=p>)</span>
</code></pre></div> <p><img alt src=../multicolleniarity_files/figure-html/correlation_matrix_data-1.png><!-- --></p> <p>I can see that Hours worked in the previous day and the out-time of the previous day are slightly correlated(Which conceptually seems likely). </p> <h3 id=correlation-network>Correlation Network<a class=headerlink href=#correlation-network title="Permanent link">&para;</a></h3> <p>Using a correlation matrix I can only check if two variables are correlated. If multiple variables are correlated, I should use Correlation Network. Even when only two variables are correlated, these plots tell me which variable among the two to keep and which to reject as a dependent variable in our model. </p> <div class=highlight><pre><span></span><code><span class=nf>library</span><span class=p>(</span><span class=s>&quot;qgraph&quot;</span><span class=p>)</span>

<span class=c1># Legend</span>
<span class=n>Names</span> <span class=o>&lt;-</span> <span class=nf>c</span><span class=p>(</span><span class=s>&#39;Travelling time&#39;</span><span class=p>,</span> <span class=s>&#39;Hours worked (previous day)&#39;</span><span class=p>,</span> <span class=s>&#39;Previous day out time (diff)&#39;</span><span class=p>)</span>

<span class=c1># Renaming variables (not necessary)</span>
<span class=nf>colnames</span><span class=p>(</span><span class=n>corr.variables</span><span class=p>)</span> <span class=o>&lt;-</span> <span class=nf>c</span><span class=p>(</span><span class=s>&#39;tr&#39;</span><span class=p>,</span> <span class=s>&#39;hw&#39;</span><span class=p>,</span> <span class=s>&#39;ot&#39;</span><span class=p>)</span>

<span class=n>cormat</span> <span class=o>&lt;-</span> <span class=nf>round</span><span class=p>(</span><span class=nf>cor</span><span class=p>(</span><span class=n>corr.variables</span><span class=p>),</span> <span class=m>2</span><span class=p>)</span>
<span class=nf>qgraph</span><span class=p>(</span><span class=n>cormat</span><span class=p>,</span> <span class=n>graph</span> <span class=o>=</span> <span class=s>&quot;pcor&quot;</span><span class=p>,</span> <span class=n>layout</span> <span class=o>=</span> <span class=s>&quot;spring&quot;</span><span class=p>,</span> <span class=n>nodeNames</span> <span class=o>=</span> <span class=n>Names</span><span class=p>,</span> <span class=n>legend.cex</span> <span class=o>=</span> <span class=m>0.4</span><span class=p>)</span>
</code></pre></div> <p><img alt src=../multicolleniarity_files/figure-html/correlation_network-1.png><!-- --></p> <p>From this plot, I can see that travelling time is not correlated to any other variable, and among the other two which are correlated, I will pick out time difference as my second variable and reject hours worked. </p> <h2 id=references>References<a class=headerlink href=#references title="Permanent link">&para;</a></h2> <ol> <li>Applied Linear Statistical Models, 4<sup>th</sup> Edition </li> <li>Wikipedia (extensively) </li> <li>Correlation matrix heat map: <a href=http://www.sthda.com/english/wiki/ggplot2-quick-correlation-matrix-heatmap-r-software-and-data-visualization>STHDA</a> </li> <li>Correlation network code: <a href=http://sachaepskamp.com/files/Cookbook.html>Sacha Epskamp</a> </li> </ol> <h2 id=basic-statistical-formulas>Basic statistical formulas<a class=headerlink href=#basic-statistical-formulas title="Permanent link">&para;</a></h2> <p>The formulas for some basic statistical terms used in this blog are given below. </p> <p>Equation for <strong>standard deviation</strong>. <span class=arithmatex>\(<span class=arithmatex>\(\sigma = \sqrt{\frac{\sum\limits_{i=1}^{n} \left(x_{i} - \bar{x}\right)^{2}} {n-1}}\)</span>\)</span></p> <p>Equation for <strong>covariance</strong> <span class=arithmatex>\(<span class=arithmatex>\(cov_{x,y} = \frac{\sum\limits_{i=1}^{n}{(x_i-\overline{x}) \cdot (y_i-\overline{y})} }{n-1}\)</span>\)</span></p> <p>Created using RMarkdown</p> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../multivariateAnalysis/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Multivariate Analysis (R)" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Multivariate Analysis (R) </div> </div> </a> <a href=../Probability/ class="md-footer__link md-footer__link--next" aria-label="Next: Probability (R)" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Probability (R) </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2016 - 2021 Martin Donath </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/HarshaAsh target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://www.linkedin.com/in/sri-harsha-achyuthuni/ target=_blank rel=noopener title=www.linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://www.instagram.com/harsha_uni/ target=_blank rel=noopener title=www.instagram.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg> </a> <a href=https://www.facebook.com/sri.harsha.achyuthuni/ target=_blank rel=noopener title=www.facebook.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.tabs.link", "header.autohide", "navigation.sections", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.709b4209.min.js", "version": null}</script> <script src=../../assets/javascripts/bundle.56838a2c.min.js></script> </body> </html>