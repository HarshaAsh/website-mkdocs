<!doctype html><html lang=en class=no-js> <head><script>
      (function () {
        var adsLoaded = false;

        function loadAds() {
          if (adsLoaded) return;
          adsLoaded = true;

          var ads = document.createElement("script");
          ads.async = true;
          ads.src = "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8786690539845043";
          ads.crossOrigin = "anonymous";
          document.head.appendChild(ads);

          var amp = document.createElement("script");
          amp.async = true;
          amp.setAttribute("custom-element", "amp-auto-ads");
          amp.src = "https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js";
          document.head.appendChild(amp);

          var autoAds = document.createElement("amp-auto-ads");
          autoAds.setAttribute("type", "adsense");
          autoAds.setAttribute("data-ad-client", "ca-pub-8786690539845043");
          document.body.appendChild(autoAds);
        }

        function onFirstInteraction() {
          loadAds();
          removeListeners();
        }

        function removeListeners() {
          window.removeEventListener("scroll", onFirstInteraction, { passive: true });
          window.removeEventListener("mousemove", onFirstInteraction, { passive: true });
          window.removeEventListener("touchstart", onFirstInteraction, { passive: true });
          window.removeEventListener("keydown", onFirstInteraction, { passive: true });
        }

        window.addEventListener("scroll", onFirstInteraction, { passive: true });
        window.addEventListener("mousemove", onFirstInteraction, { passive: true });
        window.addEventListener("touchstart", onFirstInteraction, { passive: true });
        window.addEventListener("keydown", onFirstInteraction, { passive: true });

        window.addEventListener("load", function () {
          setTimeout(loadAds, 5000);
        }, { once: true });
      })();
    </script><script>
      (function () {
        function deferThirdParties() {
          var optimize = document.createElement("script");
          optimize.src = "https://www.googleoptimize.com/optimize.js?id=OPT-M98W6LW";
          optimize.async = true;
          document.head.appendChild(optimize);

          window._mfq = window._mfq || [];
          var mf = document.createElement("script");
          mf.type = "text/javascript";
          mf.defer = true;
          mf.src = "//cdn.mouseflow.com/projects/7b4494c9-7974-49f0-9777-d14450db37e6.js";
          document.head.appendChild(mf);
        }

        if (document.readyState === "complete") {
          deferThirdParties();
        } else {
          window.addEventListener("load", deferThirdParties, { once: true });
        }
      })();
    </script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Harsha's notes on data science"><meta name=author content="Harsha Achyuthuni"><link href=https://www.harshaash.com/hi/Python/inventory_optimization_eoq_ortools/ rel=canonical><link rel=icon href=../../../assets/images/logo.jpg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-7.2.4"><title>Inventory Optimisation (Python) - Data Science with Harsha</title><link rel=preload href=../../../assets/stylesheets/main.f7f47774.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=../../../assets/stylesheets/main.f7f47774.min.css></noscript><link rel=preload href=../../../assets/stylesheets/palette.3f5d1f46.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=../../../assets/stylesheets/palette.3f5d1f46.min.css></noscript><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"></noscript><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=preload href=../../../overrides/assets/stylesheets/user_defined.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=../../../overrides/assets/stylesheets/user_defined.css></noscript><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-65034507-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-scheme data-md-color-primary data-md-color-accent> <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer style="margin-bottom: 0;"></label> <div data-md-component=skip> <a href=#inventory-optimization-eoq class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header style="background-color: navy;" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../ title="Data Science with Harsha" class="md-header__button md-logo" aria-label="Data Science with Harsha" data-md-component=logo> <img src=../../../assets/images/logo.jpg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Data Science with Harsha </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Inventory Optimisation (Python) </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme data-md-color-primary data-md-color-accent aria-hidden=true type=radio name=__palette id=__palette_1> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme data-md-color-primary data-md-color-accent aria-hidden=true type=radio name=__palette id=__palette_3> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_4> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_3 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <div class=md-header__option> <div class=md-select id=language-selector> <button class=md-header__button aria-label="Select language" id=lang-button style="font-weight: 500; font-size: 0.9rem; padding: 0.2rem 0.5rem;"> <span id=current-lang>En</span> </button> <div class=md-select__inner id=lang-dropdown style="display: none;"> <ul class=md-select__list> <li class=md-select__item> <a href=# class=md-select__link data-lang=en>English</a> </li> <li class=md-select__item> <a href=# class=md-select__link data-lang=hi>हिन्दी</a> </li> <li class=md-select__item> <a href=# class=md-select__link data-lang=te>తెలుగు</a> </li> </ul> </div> </div> </div> <script>
      (function() {
        const button = document.getElementById('lang-button');
        const dropdown = document.getElementById('lang-dropdown');
        const langLinks = document.querySelectorAll('[data-lang]');
        const currentLangDisplay = document.getElementById('current-lang');
        
        // Detect current language from URL
        const currentPath = window.location.pathname;
        if (currentPath.includes('/hi/')) {
          currentLangDisplay.textContent = 'अ(A/అ)';
        } else if (currentPath.includes('/te/')) {
          currentLangDisplay.textContent = 'అ(A/अ)';
        } else {
          currentLangDisplay.textContent = 'Eng(अ/అ)'; // Default to English
        }
        
        // Toggle dropdown on button click
        button.addEventListener('click', function(e) {
          e.stopPropagation();
          dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function() {
          dropdown.style.display = 'none';
        });
        
        // Handle language selection
        langLinks.forEach(function(link) {
          link.addEventListener('click', function(e) {
            e.preventDefault();
            const selectedLang = this.getAttribute('data-lang');
            const currentPath = window.location.pathname;
            let newPath;
            
            if (selectedLang === 'en') {
              // Remove /hi/ or /te/ from path
              newPath = currentPath.replace(/\/(hi|te)\//, '/');
            } else if (selectedLang === 'hi') {
              // Add or replace with /hi/
              if (currentPath.includes('/te/')) {
                newPath = currentPath.replace('/te/', '/hi/');
              } else if (currentPath.includes('/hi/')) {
                newPath = currentPath;
              } else {
                newPath = '/hi' + currentPath;
              }
            } else if (selectedLang === 'te') {
              // Add or replace with /te/
              if (currentPath.includes('/hi/')) {
                newPath = currentPath.replace('/hi/', '/te/');
              } else if (currentPath.includes('/te/')) {
                newPath = currentPath;
              } else {
                newPath = '/te' + currentPath;
              }
            }
            
            window.location.href = newPath;
          });
        });
      })();
    </script> <a href=../../../contact title="Contact Me" class=md-header__button aria-label="Contact Me" style="display: inline-flex; align-items: center; gap: 0.3rem; white-space: nowrap;"> <span class=md-icon style="display: inline-flex;"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"/></svg> </span> <span style="font-size: 0.8rem;">Contact Me</span> </a> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../ title="Data Science with Harsha" class="md-nav__button md-logo" aria-label="Data Science with Harsha" data-md-component=logo> <img src=../../../assets/images/logo.jpg alt=logo> </a> Data Science with Harsha </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../../resume/ class=md-nav__link> Resume </a> </li> <li class=md-nav__item> <a href=../../learn/ class=md-nav__link> Learn </a> </li> <li class=md-nav__item> <a href=../../contact/ class=md-nav__link> Contact </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5> Blog <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Blog data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/Table_of_Contents/ class=md-nav__link> Table of Contents </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2 type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2> Visualization <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Visualization data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Visualization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Vizualisation%20using%20python%20Part%201/ class=md-nav__link> Vizualizing tabular data (Python) </a> </li> <li class=md-nav__item> <a href=../Visualization%20for%20predictive%20analytics/ class=md-nav__link> Vizualising for predictive analytics (Python) </a> </li> <li class=md-nav__item> <a href=../../R/Univariate-analysis/ class=md-nav__link> Univariate Analysis (R) </a> </li> <li class=md-nav__item> <a href=../../R/multivariateAnalysis/ class=md-nav__link> Multivariate Analysis (R) </a> </li> <li class=md-nav__item> <a href=../../R/multicollinearity/ class=md-nav__link> Multicollinearity (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_3 type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3> Statistics basics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Statistics basics" data-md-level=2> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Statistics basics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Statistics%20basics/ class=md-nav__link> Statistics Basics (Python) </a> </li> <li class=md-nav__item> <a href=../../R/Probability/ class=md-nav__link> Probability (R) </a> </li> <li class=md-nav__item> <a href=../../R/vectors/ class=md-nav__link> Vectors (R) </a> </li> <li class=md-nav__item> <a href=../../R/matrices/ class=md-nav__link> Matrices (R) </a> </li> <li class=md-nav__item> <a href=../Call%20center%20distributions/ class=md-nav__link> Call center distributions (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_4 type=checkbox id=__nav_5_4> <label class=md-nav__link for=__nav_5_4> Hypothesis Testing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Hypothesis Testing" data-md-level=2> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Hypothesis Testing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/attendance_t_test/ class=md-nav__link> z-test and t-test (R) </a> </li> <li class=md-nav__item> <a href=../../R/anova/ class=md-nav__link> ANOVA Test (R) </a> </li> <li class=md-nav__item> <a href=../../R/chi-sq-goodness-of-fit/ class=md-nav__link> Chi-Square Goodness of fit (R) </a> </li> <li class=md-nav__item> <a href=../../R/chi-sq-test-of-independence/ class=md-nav__link> Chi-Square test of independence (R) </a> </li> <li class=md-nav__item> <a href=../Hypothesis_Testing_Python/ class=md-nav__link> Hypothesis testing using Python </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_5 type=checkbox id=__nav_5_5> <label class=md-nav__link for=__nav_5_5> Factor Analysis <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Factor Analysis" data-md-level=2> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> Factor Analysis </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/Curse-of-Dimensionality/ class=md-nav__link> Curse of dimensionality </a> </li> <li class=md-nav__item> <a href=../../R/EFA/ class=md-nav__link> Exploratory factor analysis (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_6 type=checkbox id=__nav_5_6> <label class=md-nav__link for=__nav_5_6> Preprocessing data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Preprocessing data" data-md-level=2> <label class=md-nav__title for=__nav_5_6> <span class="md-nav__icon md-icon"></span> Preprocessing data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/KNN_Imputation/ class=md-nav__link> Null Value Imputation (R) </a> </li> <li class=md-nav__item> <a href=../Machine%20Learning%20Part%201/ class=md-nav__link> Feature engineering (Python) </a> </li> <li class=md-nav__item> <a href=../../R/Handling-Imbalanced-classes/ class=md-nav__link> Handling Imbalanced Classes </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_7 type=checkbox id=__nav_5_7> <label class=md-nav__link for=__nav_5_7> Prediction algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Prediction algorithms" data-md-level=2> <label class=md-nav__title for=__nav_5_7> <span class="md-nav__icon md-icon"></span> Prediction algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_7_1 type=checkbox id=__nav_5_7_1> <label class=md-nav__link for=__nav_5_7_1> Classification Algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Classification Algorithms" data-md-level=3> <label class=md-nav__title for=__nav_5_7_1> <span class="md-nav__icon md-icon"></span> Classification Algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/logistic-regression/ class=md-nav__link> Logistic Regression (R) </a> </li> <li class=md-nav__item> <a href=../../R/CHAID/ class=md-nav__link> CHAID Decision Trees (R) </a> </li> <li class=md-nav__item> <a href=../../R/CART-Classification/ class=md-nav__link> CART Classification (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_7_2 type=checkbox id=__nav_5_7_2> <label class=md-nav__link for=__nav_5_7_2> Regression Algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Regression Algorithms" data-md-level=3> <label class=md-nav__title for=__nav_5_7_2> <span class="md-nav__icon md-icon"></span> Regression Algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/part-and-partial-corr/ class=md-nav__link> Part and partial correlation </a> </li> <li class=md-nav__item> <a href=../../R/Linear-regression/ class=md-nav__link> Linear Regression (R) </a> </li> <li class=md-nav__item> <a href=../Linear%20regression%20usecase%20mpg%20prediction/ class=md-nav__link> Lasso and Ridge regression (Python) </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_8 type=checkbox id=__nav_5_8> <label class=md-nav__link for=__nav_5_8> Machine Learning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Machine Learning" data-md-level=2> <label class=md-nav__title for=__nav_5_8> <span class="md-nav__icon md-icon"></span> Machine Learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://harshaachyuthuni.shinyapps.io/Machine_Learning/ class=md-nav__link> Interactive Machine Learning (RShiny) </a> </li> <li class=md-nav__item> <a href=../ML%20using%20scikit-learn/ class=md-nav__link> Multi models (Python) </a> </li> <li class=md-nav__item> <a href=../Explainable%20models%20using%20Heart%20Failure/ class=md-nav__link> Explainable ML (Python) </a> </li> <li class=md-nav__item> <a href=../Demonstrating%20online%20learning/ class=md-nav__link> Streaming Machine Learning (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_9 type=checkbox id=__nav_5_9> <label class=md-nav__link for=__nav_5_9> Time Series forecasting <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Time Series forecasting" data-md-level=2> <label class=md-nav__title for=__nav_5_9> <span class="md-nav__icon md-icon"></span> Time Series forecasting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/time-series/ class=md-nav__link> Introduction to stationarity (R) </a> </li> <li class=md-nav__item> <a href=../../R/Stationarity-tests/ class=md-nav__link> Stationary Tests (R) </a> </li> <li class=md-nav__item> <a href=../../R/ARIMA/ class=md-nav__link> ARIMA in R </a> </li> <li class=md-nav__item> <a href=../ARIMA%20Forecasting/ class=md-nav__link> ARIMA in Python </a> </li> <li class=md-nav__item> <a href=../../R/Seasonal-Time-Series/ class=md-nav__link> Seasonal time series (R) </a> </li> <li class=md-nav__item> <a href=../../R/VAR-models/ class=md-nav__link> VAR Models (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_10 type=checkbox id=__nav_5_10> <label class=md-nav__link for=__nav_5_10> Deep learning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Deep learning" data-md-level=2> <label class=md-nav__title for=__nav_5_10> <span class="md-nav__icon md-icon"></span> Deep learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ANN-1/ class=md-nav__link> Perceptron </a> </li> <li class=md-nav__item> <a href=../Backpropagation/ class=md-nav__link> Backpropagation </a> </li> <li class=md-nav__item> <a href=../DNN/ class=md-nav__link> Tensorflow and Keras </a> </li> <li class=md-nav__item> <a href=../Time%20series%20deep%20learning/ class=md-nav__link> Time series (python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_11 type=checkbox id=__nav_5_11> <label class=md-nav__link for=__nav_5_11> Generative AI <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Generative AI" data-md-level=2> <label class=md-nav__title for=__nav_5_11> <span class="md-nav__icon md-icon"></span> Generative AI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../LLM%20Tokenizers/ class=md-nav__link> LLM Tokenizers </a> </li> <li class=md-nav__item> <a href=../prompt_engineering_techniques/ class=md-nav__link> Prompt Engineering </a> </li> <li class=md-nav__item> <a href=../Agentic%20AI/ class=md-nav__link> Agentic AI </a> </li> <li class=md-nav__item> <a href=../RAG/ class=md-nav__link> RAG </a> </li> <li class=md-nav__item> <a href=../Blog%20validation/ class=md-nav__link> LangGraphs </a> </li> <li class=md-nav__item> <a href=../CrewAI/ class=md-nav__link> CrewAI </a> </li> <li class=md-nav__item> <a href=../../Others/yashoda_presentation/ class=md-nav__link> AI in Healthcare </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_12 type=checkbox id=__nav_5_12 checked> <label class=md-nav__link for=__nav_5_12> Prescriptive Analytics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Prescriptive Analytics" data-md-level=2> <label class=md-nav__title for=__nav_5_12> <span class="md-nav__icon md-icon"></span> Prescriptive Analytics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/Linear-programming/ class=md-nav__link> Linear Programming (R) </a> </li> <li class=md-nav__item> <a href=../../Others/integer_programming_blog/ class=md-nav__link> Integer Programming tricks </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Inventory Optimisation (Python) <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Inventory Optimisation (Python) </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#understanding-inventory-optimization class=md-nav__link> Understanding Inventory Optimization </a> <nav class=md-nav aria-label="Understanding Inventory Optimization"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#key-concepts class=md-nav__link> Key concepts </a> </li> <li class=md-nav__item> <a href=#key-costs class=md-nav__link> Key Costs </a> </li> <li class=md-nav__item> <a href=#why-integer-programming class=md-nav__link> Why Integer Programming? </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#dataset-overview class=md-nav__link> Dataset Overview </a> </li> <li class=md-nav__item> <a href=#calculating-inventory-metrics class=md-nav__link> Calculating Inventory metrics </a> <nav class=md-nav aria-label="Calculating Inventory metrics"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#safety-stock-calculation class=md-nav__link> Safety Stock Calculation </a> </li> <li class=md-nav__item> <a href=#initial-inventory class=md-nav__link> Initial inventory </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#eoq class=md-nav__link> EOQ </a> </li> <li class=md-nav__item> <a href=#or-models class=md-nav__link> OR Models </a> </li> <li class=md-nav__item> <a href=#mathematical-model class=md-nav__link> Mathematical Model </a> <nav class=md-nav aria-label="Mathematical Model"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#decision-variables class=md-nav__link> Decision Variables </a> </li> <li class=md-nav__item> <a href=#constraints class=md-nav__link> Constraints </a> <nav class=md-nav aria-label=Constraints> <ul class=md-nav__list> <li class=md-nav__item> <a href=#inventory-constraint class=md-nav__link> Inventory constraint </a> </li> <li class=md-nav__item> <a href=#order-constraint class=md-nav__link> Order constraint </a> </li> <li class=md-nav__item> <a href=#stockout-constraints class=md-nav__link> Stockout constraints </a> </li> <li class=md-nav__item> <a href=#safety-stock-constraints class=md-nav__link> Safety stock constraints </a> </li> <li class=md-nav__item> <a href=#maximum-inventory-constraint class=md-nav__link> Maximum inventory constraint </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#objective class=md-nav__link> Objective </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#visualization class=md-nav__link> Visualization </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> References </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../R/adoption_of_new_product/ class=md-nav__link> Adoption of new product (R) </a> </li> <li class=md-nav__item> <a href=../Diffusion%20on%20networks/ class=md-nav__link> Bass Forecasting model (Python) </a> </li> <li class=md-nav__item> <a href=../../Others/AHP/ class=md-nav__link> Analytic Hierarchy Process </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_13 type=checkbox id=__nav_5_13> <label class=md-nav__link for=__nav_5_13> Clustering <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Clustering data-md-level=2> <label class=md-nav__title for=__nav_5_13> <span class="md-nav__icon md-icon"></span> Clustering </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/hierarchical_clustering/ class=md-nav__link> Hierarchical Clustering </a> </li> <li class=md-nav__item> <a href=../../R/kMeansClustering/ class=md-nav__link> K-Means Clustering </a> </li> <li class=md-nav__item> <a href=../train_delays/ class=md-nav__link> DBSCAN Clustering (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_14 type=checkbox id=__nav_5_14> <label class=md-nav__link for=__nav_5_14> Reinforcement Learning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Reinforcement Learning" data-md-level=2> <label class=md-nav__title for=__nav_5_14> <span class="md-nav__icon md-icon"></span> Reinforcement Learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/CustomerLifetimeValue/ class=md-nav__link> Customer Lifetime Value </a> </li> <li class=md-nav__item> <a href=../../R/recommendation-systems/ class=md-nav__link> Recommendation Systems (R) </a> </li> <li class=md-nav__item> <a href=../Neural_collaborative_filtering/ class=md-nav__link> Collaborative Filtering (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_15 type=checkbox id=__nav_5_15> <label class=md-nav__link for=__nav_5_15> Networks <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Networks data-md-level=2> <label class=md-nav__title for=__nav_5_15> <span class="md-nav__icon md-icon"></span> Networks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Introduction%20to%20Networkx/ class=md-nav__link> Introduction to NetworkX (Python) </a> </li> <li class=md-nav__item> <a href=../Network%20Science/ class=md-nav__link> Network Science (Python) </a> </li> <li class=md-nav__item> <a href=../Network%20centrality/ class=md-nav__link> Network Centrality (Python) </a> </li> <li class=md-nav__item> <a href=../Shortest%20path%20problems/ class=md-nav__link> Shortest path using integer programming (Python) </a> </li> <li class=md-nav__item> <a href=../Network%20Flow%20problems/ class=md-nav__link> Network flow problems (Python) </a> </li> <li class=md-nav__item> <a href=../Community%20detection/ class=md-nav__link> Community detection (Python) </a> </li> <li class=md-nav__item> <a href=../Bipartite%20matching/ class=md-nav__link> Bipartite matching (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_16 type=checkbox id=__nav_5_16> <label class=md-nav__link for=__nav_5_16> Deployment <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Deployment data-md-level=2> <label class=md-nav__title for=__nav_5_16> <span class="md-nav__icon md-icon"></span> Deployment </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Machine%20learning%20as%20HTTP%20Request/ class=md-nav__link> ML deployment in Flask (Python) </a> </li> <li class=md-nav__item> <a href=../Saving%20predictions%20in%20database/ class=md-nav__link> Handling databases using python </a> </li> <li class=md-nav__item> <a href=../ORM/ class=md-nav__link> ORM (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_17 type=checkbox id=__nav_5_17> <label class=md-nav__link for=__nav_5_17> Career lessons <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Career lessons" data-md-level=2> <label class=md-nav__title for=__nav_5_17> <span class="md-nav__icon md-icon"></span> Career lessons </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/learnings/ class=md-nav__link> Learnings from failures </a> </li> <li class=md-nav__item> <a href=../../Others/podcast/ class=md-nav__link> Making ML Consumable </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_18 type=checkbox id=__nav_5_18> <label class=md-nav__link for=__nav_5_18> Higher education review <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Higher education review" data-md-level=2> <label class=md-nav__title for=__nav_5_18> <span class="md-nav__icon md-icon"></span> Higher education review </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/IIMB%20BAI/ class=md-nav__link> IIMB BAI </a> </li> <li class=md-nav__item> <a href=../../Others/part%20time%20data%20science%20masters/ class=md-nav__link> Part-time DS masters </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_19 type=checkbox id=__nav_5_19> <label class=md-nav__link for=__nav_5_19> External blogs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="External blogs" data-md-level=2> <label class=md-nav__title for=__nav_5_19> <span class="md-nav__icon md-icon"></span> External blogs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/Imperial%20College%20London/ class=md-nav__link> Imperial college London </a> </li> <li class=md-nav__item> <a href=../../Others/Publications/ class=md-nav__link> Publications/conferences </a> </li> <li class=md-nav__item> <a href=../../Others/Deployed%20apps/ class=md-nav__link> Deployed apps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_20 type=checkbox id=__nav_5_20> <label class=md-nav__link for=__nav_5_20> Projects <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Projects data-md-level=2> <label class=md-nav__title for=__nav_5_20> <span class="md-nav__icon md-icon"></span> Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/preventive_maintainence/ class=md-nav__link> Preventive maintainence </a> </li> <li class=md-nav__item> <a href=../../Others/Contract%20Intelligence%20tool/ class=md-nav__link> Contract Intelligence </a> </li> <li class=md-nav__item> <a href=../../Others/competitor%20intelligence/ class=md-nav__link> Competitor intelligence </a> </li> <li class=md-nav__item> <a href=../../Others/quiz%20generation/ class=md-nav__link> Quiz Generation </a> </li> <li class=md-nav__item> <a href=../../Others/Scarecrow/ class=md-nav__link> Intelligent annotation </a> </li> <li class=md-nav__item> <a href=../../Others/Demand%20Forecasting/ class=md-nav__link> Demand Forecasting </a> </li> <li class=md-nav__item> <a href=../../Others/bid%20allocation%20model/ class=md-nav__link> Bid Allocation </a> </li> <li class=md-nav__item> <a href=../../Others/IIMB%20project/ class=md-nav__link> Reward and Recognition contests </a> </li> <li class=md-nav__item> <a href=../../Others/supply%20chain%20analytics/ class=md-nav__link> Supply chain analytics </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#understanding-inventory-optimization class=md-nav__link> Understanding Inventory Optimization </a> <nav class=md-nav aria-label="Understanding Inventory Optimization"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#key-concepts class=md-nav__link> Key concepts </a> </li> <li class=md-nav__item> <a href=#key-costs class=md-nav__link> Key Costs </a> </li> <li class=md-nav__item> <a href=#why-integer-programming class=md-nav__link> Why Integer Programming? </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#dataset-overview class=md-nav__link> Dataset Overview </a> </li> <li class=md-nav__item> <a href=#calculating-inventory-metrics class=md-nav__link> Calculating Inventory metrics </a> <nav class=md-nav aria-label="Calculating Inventory metrics"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#safety-stock-calculation class=md-nav__link> Safety Stock Calculation </a> </li> <li class=md-nav__item> <a href=#initial-inventory class=md-nav__link> Initial inventory </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#eoq class=md-nav__link> EOQ </a> </li> <li class=md-nav__item> <a href=#or-models class=md-nav__link> OR Models </a> </li> <li class=md-nav__item> <a href=#mathematical-model class=md-nav__link> Mathematical Model </a> <nav class=md-nav aria-label="Mathematical Model"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#decision-variables class=md-nav__link> Decision Variables </a> </li> <li class=md-nav__item> <a href=#constraints class=md-nav__link> Constraints </a> <nav class=md-nav aria-label=Constraints> <ul class=md-nav__list> <li class=md-nav__item> <a href=#inventory-constraint class=md-nav__link> Inventory constraint </a> </li> <li class=md-nav__item> <a href=#order-constraint class=md-nav__link> Order constraint </a> </li> <li class=md-nav__item> <a href=#stockout-constraints class=md-nav__link> Stockout constraints </a> </li> <li class=md-nav__item> <a href=#safety-stock-constraints class=md-nav__link> Safety stock constraints </a> </li> <li class=md-nav__item> <a href=#maximum-inventory-constraint class=md-nav__link> Maximum inventory constraint </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#objective class=md-nav__link> Objective </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#visualization class=md-nav__link> Visualization </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> References </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <p><meta name=description content="Solving Inventory Problems with OR-Tools and EOQ. Solve retail inventory problems by building a Mixed Integer Programming model with Google OR-Tools."></p> <h1 id=inventory-optimization-eoq>Inventory Optimization &amp; EOQ<a class=headerlink href=#inventory-optimization-eoq title="Permanent link">&para;</a></h1> <script type=text/javascript src=https://cdn.mathjax.org/mathjax/latest/MathJax.js>
MathJax.Hub.Config({
 extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js"],
 jax: ["input/TeX", "output/HTML-CSS"],
 tex2jax: {
     inlineMath: [ ['$','$'], ["\\(","\\)"] ],
     displayMath: [ [' $$ ',' $$ '], ["\\[","\\]"] ],
 },
 "HTML-CSS": { availableFonts: ["TeX"] }
});
</script> <p>Ever wondered how Walmart decides when to restock millions of products?<br> Inventory management is the backbone of supply chain operations. Businesses constantly face two challenges:<br> 1. Overstocking: Too much inventory ties up capital and increases holding costs.<br> 2. Understocking: Too little inventory leads to stockouts, lost sales, and unhappy customers. </p> <p>To tackle these, companies use Inventory Optimization techniques. In this post, we’ll build a Mixed Integer Programming (MIP) model using Google OR-Tools to:<br> 1. Decide when to order and how much to order<br> 2. Minimize costs while meeting demand forecasts<br> 3. Incorporate Safety Stock, Lead Time, and Economic Order Quantity (EOQ) principles </p> <p>We’ll use a real dataset from Kaggle: <a href=https://www.kaggle.com/datasets/anirudhchauhan/retail-store-inventory-forecasting-dataset>Retail Store Inventory Forecasting Dataset</a>. This dataset contains:<br> - Date: Daily records<br> - Store ID, Product ID: Identify SKUs<br> - Inventory Level: Current stock<br> - Units Sold: Past sales<br> - Demand Forecast: Predicted demand<br> - Price: Item price </p> <p>We’ll use this to compute:<br> - Initial inventory<br> - Safety stock<br> - Cost parameters </p> <p>Objective: The objective is to minimize a cost that balances overstocking (holding cost) and understocking (stockout penalty), plus ordering costs. </p> <h2 id=understanding-inventory-optimization>Understanding Inventory Optimization<a class=headerlink href=#understanding-inventory-optimization title="Permanent link">&para;</a></h2> <p>Inventory optimization is about balancing service level (meeting customer demand) and cost efficiency. </p> <h3 id=key-concepts>Key concepts<a class=headerlink href=#key-concepts title="Permanent link">&para;</a></h3> <ol> <li>Demand Forecast: Predict how much customers will buy. </li> <li>Safety Stock: Extra inventory to handle uncertainty. </li> <li>Lead Time: Time between placing an order and receiving it. </li> </ol> <h3 id=key-costs>Key Costs<a class=headerlink href=#key-costs title="Permanent link">&para;</a></h3> <ol> <li>Holding Cost: Cost of storing inventory. </li> <li>Stockout Cost: Penalty for not meeting demand. </li> <li>Ordering Cost: Cost of placing an order. </li> </ol> <h3 id=why-integer-programming>Why Integer Programming?<a class=headerlink href=#why-integer-programming title="Permanent link">&para;</a></h3> <ol> <li>Decisions like “order or not” are binary. </li> <li>Quantities are integers (you can’t order 2.5 units). </li> <li>Constraints like lead time and safety stock make it complex but can be handled by integer variables. </li> </ol> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=nn>pandas</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pd</span>
<span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span>
<span class=kn>import</span><span class=w> </span><span class=nn>os</span>
<span class=kn>from</span><span class=w> </span><span class=nn>datetime</span><span class=w> </span><span class=kn>import</span> <span class=n>timedelta</span>
<span class=kn>import</span><span class=w> </span><span class=nn>matplotlib.pyplot</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>plt</span>
<span class=kn>from</span><span class=w> </span><span class=nn>ortools.linear_solver</span><span class=w> </span><span class=kn>import</span> <span class=n>pywraplp</span>
<span class=n>pd</span><span class=o>.</span><span class=n>options</span><span class=o>.</span><span class=n>display</span><span class=o>.</span><span class=n>float_format</span> <span class=o>=</span> <span class=s1>&#39;</span><span class=si>{:,.4f}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span>
</code></pre></div> <h2 id=dataset-overview>Dataset Overview<a class=headerlink href=#dataset-overview title="Permanent link">&para;</a></h2> <p>Columns:<br> 1. Date: Daily records.<br> 2. Store ID, Product ID: Identify SKUs.<br> 3. Inventory Level: Current stock.<br> 4. Units Sold: Past sales.<br> 5. Demand Forecast: Predicted demand.<br> 6. Price: Item price. </p> <p>We can compute initial inventory, forecasted demand, and price-based costs. Historical sales help estimate demand variability for safety stock. </p> <div class=highlight><pre><span></span><code><span class=n>raw_data</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s1>&#39;retail_store_inventory.csv&#39;</span><span class=p>)</span>
<span class=c1># Clean date</span>
<span class=n>raw_data</span><span class=p>[</span><span class=s1>&#39;Date&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>to_datetime</span><span class=p>(</span><span class=n>raw_data</span><span class=p>[</span><span class=s1>&#39;Date&#39;</span><span class=p>])</span>
<span class=c1># Sort by keys</span>
<span class=n>raw_data</span> <span class=o>=</span> <span class=n>raw_data</span><span class=o>.</span><span class=n>sort_values</span><span class=p>([</span><span class=s1>&#39;Store ID&#39;</span><span class=p>,</span><span class=s1>&#39;Product ID&#39;</span><span class=p>,</span><span class=s1>&#39;Date&#39;</span><span class=p>])</span>
<span class=n>raw_data</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>Date</th> <th>Store ID</th> <th>Product ID</th> <th>Category</th> <th>Region</th> <th>Inventory Level</th> <th>Units Sold</th> <th>Units Ordered</th> <th>Demand Forecast</th> <th>Price</th> <th>Discount</th> <th>Weather Condition</th> <th>Holiday/Promotion</th> <th>Competitor Pricing</th> <th>Seasonality</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>2022-01-01</td> <td>S001</td> <td>P0001</td> <td>Groceries</td> <td>North</td> <td>231</td> <td>127</td> <td>55</td> <td>135.4700</td> <td>33.5000</td> <td>20</td> <td>Rainy</td> <td>0</td> <td>29.6900</td> <td>Autumn</td> </tr> <tr> <th>100</th> <td>2022-01-02</td> <td>S001</td> <td>P0001</td> <td>Groceries</td> <td>West</td> <td>116</td> <td>81</td> <td>104</td> <td>92.9400</td> <td>27.9500</td> <td>10</td> <td>Cloudy</td> <td>0</td> <td>30.8900</td> <td>Spring</td> </tr> <tr> <th>200</th> <td>2022-01-03</td> <td>S001</td> <td>P0001</td> <td>Electronics</td> <td>West</td> <td>154</td> <td>5</td> <td>189</td> <td>5.3600</td> <td>62.7000</td> <td>20</td> <td>Rainy</td> <td>0</td> <td>58.2200</td> <td>Winter</td> </tr> <tr> <th>300</th> <td>2022-01-04</td> <td>S001</td> <td>P0001</td> <td>Groceries</td> <td>South</td> <td>85</td> <td>58</td> <td>193</td> <td>52.8700</td> <td>77.8800</td> <td>15</td> <td>Cloudy</td> <td>1</td> <td>75.9900</td> <td>Winter</td> </tr> <tr> <th>400</th> <td>2022-01-05</td> <td>S001</td> <td>P0001</td> <td>Groceries</td> <td>South</td> <td>238</td> <td>147</td> <td>37</td> <td>150.2700</td> <td>28.4600</td> <td>20</td> <td>Sunny</td> <td>1</td> <td>29.4000</td> <td>Winter</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>72699</th> <td>2023-12-28</td> <td>S005</td> <td>P0020</td> <td>Groceries</td> <td>South</td> <td>198</td> <td>56</td> <td>27</td> <td>50.1800</td> <td>21.7500</td> <td>5</td> <td>Sunny</td> <td>1</td> <td>25.2900</td> <td>Winter</td> </tr> <tr> <th>72799</th> <td>2023-12-29</td> <td>S005</td> <td>P0020</td> <td>Clothing</td> <td>East</td> <td>446</td> <td>268</td> <td>30</td> <td>267.5400</td> <td>85.5800</td> <td>20</td> <td>Sunny</td> <td>1</td> <td>87.6300</td> <td>Summer</td> </tr> <tr> <th>72899</th> <td>2023-12-30</td> <td>S005</td> <td>P0020</td> <td>Toys</td> <td>North</td> <td>251</td> <td>149</td> <td>181</td> <td>162.9200</td> <td>79.4800</td> <td>10</td> <td>Cloudy</td> <td>1</td> <td>82.6900</td> <td>Autumn</td> </tr> <tr> <th>72999</th> <td>2023-12-31</td> <td>S005</td> <td>P0020</td> <td>Furniture</td> <td>East</td> <td>64</td> <td>40</td> <td>99</td> <td>59.6900</td> <td>90.7900</td> <td>5</td> <td>Snowy</td> <td>1</td> <td>91.6700</td> <td>Winter</td> </tr> <tr> <th>73099</th> <td>2024-01-01</td> <td>S005</td> <td>P0020</td> <td>Groceries</td> <td>East</td> <td>117</td> <td>6</td> <td>165</td> <td>2.3300</td> <td>78.3900</td> <td>20</td> <td>Rainy</td> <td>1</td> <td>79.5200</td> <td>Spring</td> </tr> </tbody> </table> <p>73100 rows × 15 columns</p> </div> <p>In this dataset we are looking at 20 products across 5 stores for two years, from 2022 January 1<sup>st</sup> to 2024 January 1<sup>st</sup>.</p> <div class=highlight><pre><span></span><code><span class=n>raw_data</span><span class=p>[</span><span class=s1>&#39;Product ID&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>unique</span><span class=p>()</span>
</code></pre></div> <div class=highlight><pre><span></span><code>array([&#39;P0001&#39;, &#39;P0002&#39;, &#39;P0003&#39;, &#39;P0004&#39;, &#39;P0005&#39;, &#39;P0006&#39;, &#39;P0007&#39;,
       &#39;P0008&#39;, &#39;P0009&#39;, &#39;P0010&#39;, &#39;P0011&#39;, &#39;P0012&#39;, &#39;P0013&#39;, &#39;P0014&#39;,
       &#39;P0015&#39;, &#39;P0016&#39;, &#39;P0017&#39;, &#39;P0018&#39;, &#39;P0019&#39;, &#39;P0020&#39;], dtype=object)
</code></pre></div> <div class=highlight><pre><span></span><code><span class=n>raw_data</span><span class=p>[</span><span class=s1>&#39;Store ID&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>unique</span><span class=p>()</span>
</code></pre></div> <div class=highlight><pre><span></span><code>array([&#39;S001&#39;, &#39;S002&#39;, &#39;S003&#39;, &#39;S004&#39;, &#39;S005&#39;], dtype=object)
</code></pre></div> <div class=highlight><pre><span></span><code><span class=n>raw_data</span><span class=o>.</span><span class=n>Date</span><span class=o>.</span><span class=n>min</span><span class=p>(),</span> <span class=n>raw_data</span><span class=o>.</span><span class=n>Date</span><span class=o>.</span><span class=n>max</span><span class=p>()</span>
</code></pre></div> <div class=highlight><pre><span></span><code>(Timestamp(&#39;2022-01-01 00:00:00&#39;), Timestamp(&#39;2024-01-01 00:00:00&#39;))
</code></pre></div> <h2 id=calculating-inventory-metrics>Calculating Inventory metrics<a class=headerlink href=#calculating-inventory-metrics title="Permanent link">&para;</a></h2> <p>In this section, based on the data we have, we will try to compute the safety stock of the different products and the initial inventory. We will assume that we are on 2023-01-01 or 1<sup>st</sup> January 2023, and we will try to optimise inventory for the period after that. </p> <h3 id=safety-stock-calculation>Safety Stock Calculation<a class=headerlink href=#safety-stock-calculation title="Permanent link">&para;</a></h3> <p>Safety stock is the stock that should be present in the inventory at all times. This stick halps us if we have sudden increase in demand that the demand forecasting model was unable to explain. It is proportional to the standard deviation of demand (more volatile the demand is, more safety stock is needed) and square root of lead time (more time it takes to recieve a product, more the safety stock). It is given by<br> $$ SS = z \times \sigma \times \sqrt{L} $$ Where:<br> - <span class=arithmatex>\(z\)</span>: Service level factor (e.g., 1.65 for 95%). <br> - <span class=arithmatex>\(\sigma\)</span>: Standard deviation of daily demand.<br> - <span class=arithmatex>\(L\)</span>: Lead time in days. </p> <div class=highlight><pre><span></span><code><span class=c1># Assumptions</span>

<span class=c1># Assuming we are on January 1st 2023</span>
<span class=n>CUTOFF_DATE</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>to_datetime</span><span class=p>(</span><span class=s1>&#39;2023-01-01&#39;</span><span class=p>)</span>

<span class=c1># Lead time (days) for all products; can be overridden by mapping later</span>
<span class=n>DEFAULT_LEAD_TIME</span> <span class=o>=</span> <span class=mi>2</span>

<span class=c1># Safety stock service level (z-score): 1.65 ~ 95%, 2.33 ~ 99%</span>
<span class=n>Z_SERVICE</span> <span class=o>=</span> <span class=mf>1.65</span>

<span class=c1># Historical lookback window (days) to estimate demand variability (std dev)</span>
<span class=n>VARIABILITY_LOOKBACK_DAYS</span> <span class=o>=</span> <span class=mi>60</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=n>current_levels</span> <span class=o>=</span> <span class=n>raw_data</span><span class=p>[(</span><span class=n>raw_data</span><span class=o>.</span><span class=n>Date</span> <span class=o>&gt;=</span> <span class=n>CUTOFF_DATE</span> <span class=o>-</span> <span class=n>pd</span><span class=o>.</span><span class=n>Timedelta</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=n>VARIABILITY_LOOKBACK_DAYS</span><span class=o>-</span><span class=mi>1</span><span class=p>))</span> <span class=o>&amp;</span> <span class=p>(</span><span class=n>raw_data</span><span class=o>.</span><span class=n>Date</span> <span class=o>&lt;=</span> <span class=n>CUTOFF_DATE</span><span class=p>)]</span><span class=o>.</span>\
    <span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;Product ID&#39;</span><span class=p>,</span> <span class=s1>&#39;Store ID&#39;</span><span class=p>])</span><span class=o>.</span>\
    <span class=n>aggregate</span><span class=p>({</span><span class=s1>&#39;Units Sold&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;mean&#39;</span><span class=p>,</span> <span class=s1>&#39;std&#39;</span><span class=p>],</span>
              <span class=s1>&#39;Date&#39;</span><span class=p>:</span> <span class=s1>&#39;max&#39;</span><span class=p>,</span>
              <span class=s1>&#39;Units Ordered&#39;</span><span class=p>:</span> <span class=s1>&#39;max&#39;</span><span class=p>,</span>
              <span class=s1>&#39;Inventory Level&#39;</span><span class=p>:</span> <span class=s1>&#39;max&#39;</span><span class=p>})</span><span class=o>.</span>\
    <span class=n>reset_index</span><span class=p>()</span>
<span class=n>current_levels</span><span class=o>.</span><span class=n>columns</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;product_id&#39;</span><span class=p>,</span> <span class=s1>&#39;store_id&#39;</span><span class=p>,</span> <span class=s1>&#39;mean_sales&#39;</span><span class=p>,</span> <span class=s1>&#39;std_sales&#39;</span><span class=p>,</span> <span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=s1>&#39;max_units_ordered&#39;</span><span class=p>,</span> <span class=s1>&#39;max_inventory&#39;</span><span class=p>]</span>

<span class=c1># Computing safety stock</span>
<span class=n>current_levels</span><span class=p>[</span><span class=s1>&#39;safety_stock&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=n>Z_SERVICE</span><span class=o>*</span><span class=n>current_levels</span><span class=p>[</span><span class=s1>&#39;std_sales&#39;</span><span class=p>]</span><span class=o>*</span><span class=n>np</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>DEFAULT_LEAD_TIME</span><span class=p>))</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span>
</code></pre></div> <h3 id=initial-inventory>Initial inventory<a class=headerlink href=#initial-inventory title="Permanent link">&para;</a></h3> <p>Initial inventory is the inventory as of January 1<sup>st</sup> 2023. Based on initial inventory, safety stock and demand, we can predict the future stock. </p> <div class=highlight><pre><span></span><code><span class=c1># Adding current inventory</span>
<span class=n>current_levels</span> <span class=o>=</span> <span class=n>current_levels</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>raw_data</span><span class=p>,</span> <span class=n>left_on</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;product_id&#39;</span><span class=p>,</span> <span class=s1>&#39;store_id&#39;</span><span class=p>,</span> <span class=s1>&#39;date&#39;</span><span class=p>],</span> <span class=n>right_on</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Product ID&#39;</span><span class=p>,</span> <span class=s1>&#39;Store ID&#39;</span><span class=p>,</span> <span class=s1>&#39;Date&#39;</span><span class=p>])</span>
<span class=n>current_levels</span> <span class=o>=</span> <span class=n>current_levels</span><span class=p>[[</span><span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=s1>&#39;product_id&#39;</span><span class=p>,</span> <span class=s1>&#39;store_id&#39;</span><span class=p>,</span> <span class=s1>&#39;safety_stock&#39;</span><span class=p>,</span> <span class=s1>&#39;Inventory Level&#39;</span><span class=p>,</span> <span class=s1>&#39;max_units_ordered&#39;</span><span class=p>,</span> <span class=s1>&#39;max_inventory&#39;</span><span class=p>]]</span>
<span class=n>current_levels</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>date</th> <th>product_id</th> <th>store_id</th> <th>safety_stock</th> <th>Inventory Level</th> <th>max_units_ordered</th> <th>max_inventory</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>2023-01-01</td> <td>P0001</td> <td>S001</td> <td>236</td> <td>425</td> <td>197</td> <td>500</td> </tr> <tr> <th>1</th> <td>2023-01-01</td> <td>P0001</td> <td>S002</td> <td>275</td> <td>104</td> <td>192</td> <td>495</td> </tr> <tr> <th>2</th> <td>2023-01-01</td> <td>P0001</td> <td>S003</td> <td>297</td> <td>219</td> <td>200</td> <td>499</td> </tr> <tr> <th>3</th> <td>2023-01-01</td> <td>P0001</td> <td>S004</td> <td>267</td> <td>117</td> <td>196</td> <td>497</td> </tr> <tr> <th>4</th> <td>2023-01-01</td> <td>P0001</td> <td>S005</td> <td>228</td> <td>430</td> <td>199</td> <td>489</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>95</th> <td>2023-01-01</td> <td>P0020</td> <td>S001</td> <td>219</td> <td>358</td> <td>200</td> <td>498</td> </tr> <tr> <th>96</th> <td>2023-01-01</td> <td>P0020</td> <td>S002</td> <td>278</td> <td>322</td> <td>199</td> <td>481</td> </tr> <tr> <th>97</th> <td>2023-01-01</td> <td>P0020</td> <td>S003</td> <td>280</td> <td>258</td> <td>199</td> <td>496</td> </tr> <tr> <th>98</th> <td>2023-01-01</td> <td>P0020</td> <td>S004</td> <td>227</td> <td>447</td> <td>199</td> <td>497</td> </tr> <tr> <th>99</th> <td>2023-01-01</td> <td>P0020</td> <td>S005</td> <td>248</td> <td>308</td> <td>197</td> <td>491</td> </tr> </tbody> </table> <p>100 rows × 7 columns</p> </div> <h2 id=eoq>EOQ<a class=headerlink href=#eoq title="Permanent link">&para;</a></h2> <p>EOQ (Economic Order Quantity) is the optimal order quantity that minimizes total inventory costs. When managing inventory, you face two main costs:<br> 1. Ordering Cost (K): Cost incurred every time you place an order (administration, shipping, setup). (Fewer orders → lower ordering cost)<br> 2. Holding Cost (h): Cost of storing inventory (warehouse space, insurance, depreciation). (Larger orders → higher holding cost) </p> <p>If we order too frequently, ordering costs skyrocket. If we order too much at once, holding costs explode. EOQ finds the sweet spot where these two costs are balanced.<br> $$ Q^* = \sqrt{\frac{2DK}{h}} $$ <br> here:<br> - <span class=arithmatex>\(Q^*\)</span>∗: Optimal order quantity<br> - D: Annual demand (units/year)<br> - K: Cost per order (fixed)<br> - h: Holding cost per unit per year </p> <p>EOQ assums that:<br> 1. The demand is constant<br> 2. Instant replenishment (lead time=0)<br> 3. No stockouts<br> 4. Single product </p> <p>Due to these assumptions, it is not possible to use EOQ for complex supply chains directly. Instead we try to optimise the costs and identify when and how much to order. </p> <h2 id=or-models>OR Models<a class=headerlink href=#or-models title="Permanent link">&para;</a></h2> <p>OR (Operations Research) models using CP-SAT Solver in OR-Tools are a powerful way to handle combinatorial optimization problems where decisions involve discrete choices, logical conditions, and complex constraints. CP-SAT stands for Constraint Programming with SAT (Boolean Satisfiability). It’s part of Google’s OR-Tools and is designed for:<br> 1. Discrete decision problems (e.g., scheduling, routing, inventory planning).<br> 2. Problems with logical constraints (if-then conditions, Boolean decisions).<br> 3. Large-scale combinatorial optimization. </p> <p>Unlike linear solvers (which use LP/MIP), CP-SAT uses constraint propagation + SAT solving + branch-and-bound to efficiently explore feasible solutions. </p> <p>Initialising the model</p> <div class=highlight><pre><span></span><code><span class=kn>from</span><span class=w> </span><span class=nn>ortools.sat.python</span><span class=w> </span><span class=kn>import</span> <span class=n>cp_model</span>
<span class=n>inventory_model</span> <span class=o>=</span> <span class=n>cp_model</span><span class=o>.</span><span class=n>CpModel</span><span class=p>()</span>
</code></pre></div> <h2 id=mathematical-model>Mathematical Model<a class=headerlink href=#mathematical-model title="Permanent link">&para;</a></h2> <h3 id=decision-variables>Decision Variables<a class=headerlink href=#decision-variables title="Permanent link">&para;</a></h3> <p>We have two decisions that we should take, how much to order and when to order.<br> <span class=arithmatex>\(order\_rec\_qty_{p,s,t}\)</span>: How much order should be recieved (after placing the order) for product p at store q on day t.<br> <span class=arithmatex>\(order\_bool_{p,s,t}\)</span>: Whether to place an order (binary). </p> <div class=highlight><pre><span></span><code><span class=n>future_data</span> <span class=o>=</span> <span class=n>raw_data</span><span class=p>[(</span><span class=n>raw_data</span><span class=p>[</span><span class=s1>&#39;Store ID&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;S001&#39;</span><span class=p>)</span> <span class=o>&amp;</span> <span class=p>(</span><span class=n>raw_data</span><span class=p>[</span><span class=s1>&#39;Product ID&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;P0001&#39;</span><span class=p>)</span> <span class=o>&amp;</span> <span class=p>(</span><span class=n>raw_data</span><span class=o>.</span><span class=n>Date</span><span class=o>&gt;=</span><span class=n>CUTOFF_DATE</span><span class=p>)]</span>
<span class=n>future_data</span> <span class=o>=</span> <span class=n>future_data</span><span class=p>[[</span><span class=s1>&#39;Date&#39;</span><span class=p>,</span> <span class=s1>&#39;Store ID&#39;</span><span class=p>,</span> <span class=s1>&#39;Product ID&#39;</span><span class=p>,</span> <span class=s1>&#39;Demand Forecast&#39;</span><span class=p>]]</span>
<span class=n>future_data</span><span class=o>.</span><span class=n>columns</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=s1>&#39;store_id&#39;</span><span class=p>,</span> <span class=s1>&#39;product_id&#39;</span><span class=p>,</span> <span class=s1>&#39;demand&#39;</span><span class=p>]</span>
<span class=n>future_data</span> <span class=o>=</span> <span class=n>future_data</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>current_levels</span><span class=p>,</span> <span class=n>on</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=s1>&#39;store_id&#39;</span><span class=p>,</span> <span class=s1>&#39;product_id&#39;</span><span class=p>],</span> <span class=n>how</span><span class=o>=</span><span class=s1>&#39;left&#39;</span><span class=p>)</span>

<span class=c1># Assuming constant safety stock</span>
<span class=n>future_data</span><span class=p>[</span><span class=s1>&#39;safety_stock&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>future_data</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;store_id&#39;</span><span class=p>,</span> <span class=s1>&#39;product_id&#39;</span><span class=p>])[</span><span class=s1>&#39;safety_stock&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>ffill</span><span class=p>()</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span>

<span class=c1># Assuming max units to order doesnt change</span>
<span class=n>future_data</span><span class=p>[</span><span class=s1>&#39;max_units_ordered&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>future_data</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;store_id&#39;</span><span class=p>,</span> <span class=s1>&#39;product_id&#39;</span><span class=p>])[</span><span class=s1>&#39;max_units_ordered&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>ffill</span><span class=p>()</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span>

<span class=c1># Assuming max inventory is the capasity of the product inventory in the store</span>
<span class=n>future_data</span><span class=p>[</span><span class=s1>&#39;max_inventory&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>future_data</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;store_id&#39;</span><span class=p>,</span> <span class=s1>&#39;product_id&#39;</span><span class=p>])[</span><span class=s1>&#39;max_inventory&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>ffill</span><span class=p>()</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span>

<span class=c1># Converting demand to integer</span>
<span class=n>future_data</span><span class=p>[</span><span class=s1>&#39;demand&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>future_data</span><span class=o>.</span><span class=n>demand</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=c1># Creating one boolean decision variable for whether to order product-store at time t to order</span>
<span class=n>future_data</span><span class=p>[</span><span class=s1>&#39;order_bool&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
<span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>future_data</span><span class=p>)):</span>
    <span class=n>date</span><span class=p>,</span> <span class=n>store</span><span class=p>,</span> <span class=n>prod</span> <span class=o>=</span> <span class=p>(</span><span class=n>future_data</span><span class=o>.</span><span class=n>date</span><span class=o>.</span><span class=n>dt</span><span class=o>.</span><span class=n>date</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>future_data</span><span class=o>.</span><span class=n>store_id</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>future_data</span><span class=o>.</span><span class=n>product_id</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
    <span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;order_bool&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>inventory_model</span><span class=o>.</span><span class=n>NewBoolVar</span><span class=p>(</span><span class=s1>&#39;order_bool_</span><span class=si>%s</span><span class=s1>,</span><span class=si>%s</span><span class=s1>,</span><span class=si>%s</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=n>date</span><span class=p>,</span> <span class=n>store</span><span class=p>,</span> <span class=n>prod</span><span class=p>))</span>
    <span class=k>if</span> <span class=n>i</span><span class=o>&lt;</span><span class=mi>5</span><span class=p>:</span>
        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Creating the boolean variable &#39;</span><span class=p>,</span> <span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;order_bool&#39;</span><span class=p>],</span> 
          <span class=s1>&#39;representing the if we should order &#39;</span><span class=p>,</span> <span class=n>date</span><span class=p>,</span> <span class=n>store</span><span class=p>,</span> <span class=n>prod</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code>Creating the boolean variable  order_bool_2023-01-01,S001,P0001 representing the if we should order  2023-01-01 S001 P0001
Creating the boolean variable  order_bool_2023-01-02,S001,P0001 representing the if we should order  2023-01-02 S001 P0001
Creating the boolean variable  order_bool_2023-01-03,S001,P0001 representing the if we should order  2023-01-03 S001 P0001
Creating the boolean variable  order_bool_2023-01-04,S001,P0001 representing the if we should order  2023-01-04 S001 P0001
Creating the boolean variable  order_bool_2023-01-05,S001,P0001 representing the if we should order  2023-01-05 S001 P0001
</code></pre></div> <div class=highlight><pre><span></span><code><span class=c1># Creating one integer decision variable for how much to order for each product-store at time t to order</span>
<span class=n>future_data</span><span class=p>[</span><span class=s1>&#39;order_rec_qty&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
<span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>future_data</span><span class=p>)):</span>
    <span class=n>date</span><span class=p>,</span> <span class=n>store</span><span class=p>,</span> <span class=n>prod</span> <span class=o>=</span> <span class=p>(</span><span class=n>future_data</span><span class=o>.</span><span class=n>date</span><span class=o>.</span><span class=n>dt</span><span class=o>.</span><span class=n>date</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>future_data</span><span class=o>.</span><span class=n>store_id</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>future_data</span><span class=o>.</span><span class=n>product_id</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
    <span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;order_rec_qty&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>inventory_model</span><span class=o>.</span><span class=n>NewIntVar</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>future_data</span><span class=o>.</span><span class=n>max_units_ordered</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>10</span><span class=p>,</span> <span class=s1>&#39;order_rec_qty_</span><span class=si>%s</span><span class=s1>,</span><span class=si>%s</span><span class=s1>,</span><span class=si>%s</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=n>date</span><span class=p>,</span> <span class=n>store</span><span class=p>,</span> <span class=n>prod</span><span class=p>))</span>
    <span class=k>if</span> <span class=n>i</span><span class=o>&lt;</span><span class=mi>5</span><span class=p>:</span>
        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Creating the integer variable &#39;</span><span class=p>,</span> <span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;order_rec_qty&#39;</span><span class=p>],</span> 
          <span class=s1>&#39;representing how much we should order &#39;</span><span class=p>,</span> <span class=n>date</span><span class=p>,</span> <span class=n>store</span><span class=p>,</span> <span class=n>prod</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code>Creating the integer variable  order_rec_qty_2023-01-01,S001,P0001 representing how much we should order  2023-01-01 S001 P0001
Creating the integer variable  order_rec_qty_2023-01-02,S001,P0001 representing how much we should order  2023-01-02 S001 P0001
Creating the integer variable  order_rec_qty_2023-01-03,S001,P0001 representing how much we should order  2023-01-03 S001 P0001
Creating the integer variable  order_rec_qty_2023-01-04,S001,P0001 representing how much we should order  2023-01-04 S001 P0001
Creating the integer variable  order_rec_qty_2023-01-05,S001,P0001 representing how much we should order  2023-01-05 S001 P0001
</code></pre></div> <p><span class=arithmatex>\(inventory_{p,s,t}\)</span>: Inventory at end of day </p> <div class=highlight><pre><span></span><code><span class=c1># Creating one integer decision variable for inventory</span>
<span class=n>future_data</span><span class=p>[</span><span class=s1>&#39;inventory&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
<span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>future_data</span><span class=p>)):</span>
    <span class=n>date</span><span class=p>,</span> <span class=n>store</span><span class=p>,</span> <span class=n>prod</span> <span class=o>=</span> <span class=p>(</span><span class=n>future_data</span><span class=o>.</span><span class=n>date</span><span class=o>.</span><span class=n>dt</span><span class=o>.</span><span class=n>date</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>future_data</span><span class=o>.</span><span class=n>store_id</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>future_data</span><span class=o>.</span><span class=n>product_id</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
    <span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;inventory&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>inventory_model</span><span class=o>.</span><span class=n>NewIntVar</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>future_data</span><span class=o>.</span><span class=n>max_inventory</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>2</span><span class=p>,</span> <span class=s1>&#39;inventory_</span><span class=si>%s</span><span class=s1>,</span><span class=si>%s</span><span class=s1>,</span><span class=si>%s</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=n>date</span><span class=p>,</span> <span class=n>store</span><span class=p>,</span> <span class=n>prod</span><span class=p>))</span>
    <span class=k>if</span> <span class=n>i</span><span class=o>&lt;</span><span class=mi>5</span><span class=p>:</span>
        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Creating the integer variable &#39;</span><span class=p>,</span> <span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;inventory&#39;</span><span class=p>],</span> 
          <span class=s1>&#39;representing how much inventory is present &#39;</span><span class=p>,</span> <span class=n>date</span><span class=p>,</span> <span class=n>store</span><span class=p>,</span> <span class=n>prod</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code>Creating the integer variable  inventory_2023-01-01,S001,P0001 representing how much inventory is present  2023-01-01 S001 P0001
Creating the integer variable  inventory_2023-01-02,S001,P0001 representing how much inventory is present  2023-01-02 S001 P0001
Creating the integer variable  inventory_2023-01-03,S001,P0001 representing how much inventory is present  2023-01-03 S001 P0001
Creating the integer variable  inventory_2023-01-04,S001,P0001 representing how much inventory is present  2023-01-04 S001 P0001
Creating the integer variable  inventory_2023-01-05,S001,P0001 representing how much inventory is present  2023-01-05 S001 P0001
</code></pre></div> <p><span class=arithmatex>\(stockout_{p,s,t}\)</span> stockout during the day </p> <div class=highlight><pre><span></span><code><span class=n>future_data</span><span class=p>[</span><span class=s1>&#39;stockout&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
<span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>future_data</span><span class=p>)):</span>
    <span class=n>date</span><span class=p>,</span> <span class=n>store</span><span class=p>,</span> <span class=n>prod</span> <span class=o>=</span> <span class=p>(</span><span class=n>future_data</span><span class=o>.</span><span class=n>date</span><span class=o>.</span><span class=n>dt</span><span class=o>.</span><span class=n>date</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>future_data</span><span class=o>.</span><span class=n>store_id</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>future_data</span><span class=o>.</span><span class=n>product_id</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
    <span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;stockout&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>inventory_model</span><span class=o>.</span><span class=n>NewIntVar</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>future_data</span><span class=o>.</span><span class=n>max_inventory</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>2</span><span class=p>,</span> <span class=s1>&#39;stockout_</span><span class=si>%s</span><span class=s1>,</span><span class=si>%s</span><span class=s1>,</span><span class=si>%s</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=n>date</span><span class=p>,</span> <span class=n>store</span><span class=p>,</span> <span class=n>prod</span><span class=p>))</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=n>future_data</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>date</th> <th>store_id</th> <th>product_id</th> <th>demand</th> <th>safety_stock</th> <th>Inventory Level</th> <th>max_units_ordered</th> <th>max_inventory</th> <th>order_bool</th> <th>order_rec_qty</th> <th>inventory</th> <th>stockout</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>2023-01-01</td> <td>S001</td> <td>P0001</td> <td>194</td> <td>236</td> <td>425.0000</td> <td>197</td> <td>500</td> <td>order_bool_2023-01-01,S001,P0001</td> <td>order_rec_qty_2023-01-01,S001,P0001</td> <td>inventory_2023-01-01,S001,P0001</td> <td>stockout_2023-01-01,S001,P0001</td> </tr> <tr> <th>1</th> <td>2023-01-02</td> <td>S001</td> <td>P0001</td> <td>98</td> <td>236</td> <td>NaN</td> <td>197</td> <td>500</td> <td>order_bool_2023-01-02,S001,P0001</td> <td>order_rec_qty_2023-01-02,S001,P0001</td> <td>inventory_2023-01-02,S001,P0001</td> <td>stockout_2023-01-02,S001,P0001</td> </tr> <tr> <th>2</th> <td>2023-01-03</td> <td>S001</td> <td>P0001</td> <td>248</td> <td>236</td> <td>NaN</td> <td>197</td> <td>500</td> <td>order_bool_2023-01-03,S001,P0001</td> <td>order_rec_qty_2023-01-03,S001,P0001</td> <td>inventory_2023-01-03,S001,P0001</td> <td>stockout_2023-01-03,S001,P0001</td> </tr> <tr> <th>3</th> <td>2023-01-04</td> <td>S001</td> <td>P0001</td> <td>261</td> <td>236</td> <td>NaN</td> <td>197</td> <td>500</td> <td>order_bool_2023-01-04,S001,P0001</td> <td>order_rec_qty_2023-01-04,S001,P0001</td> <td>inventory_2023-01-04,S001,P0001</td> <td>stockout_2023-01-04,S001,P0001</td> </tr> <tr> <th>4</th> <td>2023-01-05</td> <td>S001</td> <td>P0001</td> <td>152</td> <td>236</td> <td>NaN</td> <td>197</td> <td>500</td> <td>order_bool_2023-01-05,S001,P0001</td> <td>order_rec_qty_2023-01-05,S001,P0001</td> <td>inventory_2023-01-05,S001,P0001</td> <td>stockout_2023-01-05,S001,P0001</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>361</th> <td>2023-12-28</td> <td>S001</td> <td>P0001</td> <td>78</td> <td>236</td> <td>NaN</td> <td>197</td> <td>500</td> <td>order_bool_2023-12-28,S001,P0001</td> <td>order_rec_qty_2023-12-28,S001,P0001</td> <td>inventory_2023-12-28,S001,P0001</td> <td>stockout_2023-12-28,S001,P0001</td> </tr> <tr> <th>362</th> <td>2023-12-29</td> <td>S001</td> <td>P0001</td> <td>184</td> <td>236</td> <td>NaN</td> <td>197</td> <td>500</td> <td>order_bool_2023-12-29,S001,P0001</td> <td>order_rec_qty_2023-12-29,S001,P0001</td> <td>inventory_2023-12-29,S001,P0001</td> <td>stockout_2023-12-29,S001,P0001</td> </tr> <tr> <th>363</th> <td>2023-12-30</td> <td>S001</td> <td>P0001</td> <td>20</td> <td>236</td> <td>NaN</td> <td>197</td> <td>500</td> <td>order_bool_2023-12-30,S001,P0001</td> <td>order_rec_qty_2023-12-30,S001,P0001</td> <td>inventory_2023-12-30,S001,P0001</td> <td>stockout_2023-12-30,S001,P0001</td> </tr> <tr> <th>364</th> <td>2023-12-31</td> <td>S001</td> <td>P0001</td> <td>42</td> <td>236</td> <td>NaN</td> <td>197</td> <td>500</td> <td>order_bool_2023-12-31,S001,P0001</td> <td>order_rec_qty_2023-12-31,S001,P0001</td> <td>inventory_2023-12-31,S001,P0001</td> <td>stockout_2023-12-31,S001,P0001</td> </tr> <tr> <th>365</th> <td>2024-01-01</td> <td>S001</td> <td>P0001</td> <td>53</td> <td>236</td> <td>NaN</td> <td>197</td> <td>500</td> <td>order_bool_2024-01-01,S001,P0001</td> <td>order_rec_qty_2024-01-01,S001,P0001</td> <td>inventory_2024-01-01,S001,P0001</td> <td>stockout_2024-01-01,S001,P0001</td> </tr> </tbody> </table> <p>366 rows × 12 columns</p> </div> <h3 id=constraints>Constraints<a class=headerlink href=#constraints title="Permanent link">&para;</a></h3> <h4 id=inventory-constraint>Inventory constraint<a class=headerlink href=#inventory-constraint title="Permanent link">&para;</a></h4> <p>inventory at the end of the day depends on<br> - Previous day inventory<br> - - current day demand<br> - + order recieved on the day<br> - + stockout value of the day (variable included to handle stockouts) </p> <div class=arithmatex>\[ I_{p,s,t} = I_{p,s,t-1} - demand_{p,s,t} + order\_value\_var_{p,s,t} + stockout_{p,s,t}\]</div> <div class=highlight><pre><span></span><code><span class=c1># At every store and every product, inventory equation should be held</span>
<span class=k>for</span> <span class=n>store</span> <span class=ow>in</span> <span class=n>future_data</span><span class=o>.</span><span class=n>store_id</span><span class=o>.</span><span class=n>unique</span><span class=p>():</span>
    <span class=k>for</span> <span class=n>product</span> <span class=ow>in</span> <span class=n>future_data</span><span class=o>.</span><span class=n>product_id</span><span class=o>.</span><span class=n>unique</span><span class=p>():</span>
        <span class=n>store_prod_data</span> <span class=o>=</span> <span class=n>future_data</span><span class=p>[(</span><span class=n>future_data</span><span class=o>.</span><span class=n>store_id</span> <span class=o>==</span> <span class=n>store</span><span class=p>)</span> <span class=o>&amp;</span> <span class=p>(</span><span class=n>future_data</span><span class=o>.</span><span class=n>product_id</span> <span class=o>==</span> <span class=n>product</span><span class=p>)]</span>
        <span class=n>store_prod_data</span> <span class=o>=</span> <span class=n>store_prod_data</span><span class=o>.</span><span class=n>sort_values</span><span class=p>(</span><span class=s1>&#39;date&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>reset_index</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>time</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>store_prod_data</span><span class=p>)):</span><span class=c1>#.date.unique(): # 365 days</span>
            <span class=k>if</span><span class=p>(</span><span class=n>time</span><span class=o>==</span><span class=mi>0</span><span class=p>):</span>
                <span class=n>lhs</span> <span class=o>=</span> <span class=n>store_prod_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>time</span><span class=p>,</span> <span class=s1>&#39;inventory&#39;</span><span class=p>]</span>
                <span class=n>rhs</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>store_prod_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>time</span><span class=p>,</span> <span class=s1>&#39;Inventory Level&#39;</span><span class=p>])</span>
                <span class=n>inventory_model</span><span class=o>.</span><span class=n>Add</span><span class=p>(</span><span class=n>lhs</span> <span class=o>==</span> <span class=n>rhs</span><span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>lhs</span> <span class=o>=</span> <span class=n>store_prod_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>time</span><span class=p>,</span> <span class=s1>&#39;inventory&#39;</span><span class=p>]</span>
                <span class=n>rhs</span> <span class=o>=</span> <span class=n>store_prod_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>time</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;inventory&#39;</span><span class=p>]</span> <span class=o>-</span> <span class=n>store_prod_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>time</span><span class=p>,</span> <span class=s1>&#39;demand&#39;</span><span class=p>]</span> <span class=o>+</span> \
                      <span class=n>store_prod_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>time</span><span class=p>,</span> <span class=s1>&#39;order_rec_qty&#39;</span><span class=p>]</span> <span class=o>+</span> <span class=n>store_prod_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>time</span><span class=p>,</span> <span class=s1>&#39;stockout&#39;</span><span class=p>]</span>
                <span class=n>inventory_model</span><span class=o>.</span><span class=n>Add</span><span class=p>(</span><span class=n>lhs</span> <span class=o>==</span> <span class=n>rhs</span><span class=p>)</span>
</code></pre></div> <h4 id=order-constraint>Order constraint<a class=headerlink href=#order-constraint title="Permanent link">&para;</a></h4> <p>The boolean order_bool should be true when <span class=arithmatex>\(order\_rec\_qty&gt;0\)</span>. This can be represented as: </p> <div class=arithmatex>\[ order\_rec\_qty_{p,s,t} \leq M\times order\_bool_{p,s,t} \]</div> <div class=arithmatex>\[ order\_rec\_qty_{p,s,t} \geq 0.1-M\times (1-order\_bool_{p,s,t}) \]</div> <div class=highlight><pre><span></span><code><span class=n>M</span> <span class=o>=</span> <span class=mi>100000</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>future_data</span><span class=p>)):</span>
    <span class=n>inventory_model</span><span class=o>.</span><span class=n>Add</span><span class=p>(</span><span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;order_rec_qty&#39;</span><span class=p>]</span> <span class=o>&lt;=</span> <span class=n>M</span><span class=o>*</span><span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;order_bool&#39;</span><span class=p>])</span>
    <span class=n>inventory_model</span><span class=o>.</span><span class=n>Add</span><span class=p>(</span><span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;order_rec_qty&#39;</span><span class=p>]</span> <span class=o>&gt;=</span> <span class=mi>1</span> <span class=o>-</span> <span class=n>M</span><span class=o>*</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;order_bool&#39;</span><span class=p>]))</span>
</code></pre></div> <h4 id=stockout-constraints>Stockout constraints<a class=headerlink href=#stockout-constraints title="Permanent link">&para;</a></h4> <p>Stockout happens only when inventory is zero at time t. For the constraint <span class=arithmatex>\(stockout_{p,s,t}&gt;0\)</span> when <span class=arithmatex>\(inventory_{p,s,t}=0\)</span> and <span class=arithmatex>\(stockout_{p,s,t}=0\)</span> when <span class=arithmatex>\(inventory_{p,s,t}&gt;0\)</span> we have to create a boolean <span class=arithmatex>\(stock\_bool_{p,s,t}\)</span> such that </p> <div class=arithmatex>\[ stockout_{p,s,t} \leq M\times stock\_bool_{p,s,t} \]</div> <div class=arithmatex>\[ inventory_{p,s,t} \leq M\times (1-stock\_bool_{p,s,t}) \]</div> <p>Creating the boolean variable <span class=arithmatex>\(stock\_bool_{p,s,t}\)</span> which represents if there is a stock out. </p> <div class=highlight><pre><span></span><code><span class=n>future_data</span><span class=p>[</span><span class=s1>&#39;stock_bool&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
<span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>future_data</span><span class=p>)):</span>
    <span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;stock_bool&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>inventory_model</span><span class=o>.</span><span class=n>NewBoolVar</span><span class=p>(</span><span class=s1>&#39;stock_bool_</span><span class=si>%s</span><span class=s1>,</span><span class=si>%s</span><span class=s1>,</span><span class=si>%s</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=n>date</span><span class=p>,</span> <span class=n>store</span><span class=p>,</span> <span class=n>prod</span><span class=p>))</span>
    <span class=n>inventory_model</span><span class=o>.</span><span class=n>Add</span><span class=p>(</span><span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;stockout&#39;</span><span class=p>]</span> <span class=o>&lt;=</span> <span class=n>M</span><span class=o>*</span><span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;stock_bool&#39;</span><span class=p>])</span>
    <span class=n>inventory_model</span><span class=o>.</span><span class=n>Add</span><span class=p>(</span><span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;inventory&#39;</span><span class=p>]</span> <span class=o>&lt;=</span> <span class=n>M</span><span class=o>*</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;stock_bool&#39;</span><span class=p>]))</span>
</code></pre></div> <h4 id=safety-stock-constraints>Safety stock constraints<a class=headerlink href=#safety-stock-constraints title="Permanent link">&para;</a></h4> <p>We need to create a soft constraint that inventory should be above the safety stock as much as possible. For this we are creating a slack of how much inventory is above safety stock. We can give less value to the weight of this boolean while minimizing to make this a soft constraint. </p> <div class=arithmatex>\[ safety\_stock\_slack_{p,s,t} &gt;= safety\_stock_{p,s,t} - inventory_{p,s,t} \]</div> <div class=highlight><pre><span></span><code><span class=n>future_data</span><span class=p>[</span><span class=s1>&#39;safety_stock_slack&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
<span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>future_data</span><span class=p>)):</span>
    <span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;safety_stock_slack&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>inventory_model</span><span class=o>.</span><span class=n>NewIntVar</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>future_data</span><span class=o>.</span><span class=n>max_inventory</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=mi>2</span><span class=p>,</span> <span class=s1>&#39;safety_stock_slack_</span><span class=si>%s</span><span class=s1>,</span><span class=si>%s</span><span class=s1>,</span><span class=si>%s</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=n>date</span><span class=p>,</span> <span class=n>store</span><span class=p>,</span> <span class=n>prod</span><span class=p>))</span>
    <span class=n>inventory_model</span><span class=o>.</span><span class=n>Add</span><span class=p>(</span><span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;safety_stock_slack&#39;</span><span class=p>]</span> <span class=o>&gt;=</span> <span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;safety_stock&#39;</span><span class=p>]</span> <span class=o>-</span> <span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;inventory&#39;</span><span class=p>])</span>
</code></pre></div> <h4 id=maximum-inventory-constraint>Maximum inventory constraint<a class=headerlink href=#maximum-inventory-constraint title="Permanent link">&para;</a></h4> <p>Maximum inventory should be less than the capacity.<br> $$ \sum_{s}{inventory_{p,s,t}} &gt;= max_inventory_{s} $$ </p> <div class=highlight><pre><span></span><code><span class=k>for</span> <span class=n>store</span> <span class=ow>in</span> <span class=n>future_data</span><span class=o>.</span><span class=n>store_id</span><span class=o>.</span><span class=n>unique</span><span class=p>():</span>
    <span class=n>store_data</span> <span class=o>=</span> <span class=n>future_data</span><span class=p>[(</span><span class=n>future_data</span><span class=o>.</span><span class=n>store_id</span> <span class=o>==</span> <span class=n>store</span><span class=p>)]</span>

    <span class=n>rhs</span> <span class=o>=</span> <span class=n>raw_data</span><span class=p>[</span><span class=n>raw_data</span><span class=p>[</span><span class=s1>&#39;Store ID&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=n>store</span><span class=p>]</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;Date&#39;</span><span class=p>)[</span><span class=s1>&#39;Inventory Level&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span><span class=o>.</span><span class=n>max</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>t</span> <span class=ow>in</span> <span class=n>future_data</span><span class=o>.</span><span class=n>date</span><span class=o>.</span><span class=n>unique</span><span class=p>():</span>
        <span class=n>lhs</span> <span class=o>=</span> <span class=n>store_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>store_data</span><span class=o>.</span><span class=n>date</span> <span class=o>==</span> <span class=n>t</span><span class=p>,</span> <span class=s1>&#39;inventory&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
        <span class=n>inventory_model</span><span class=o>.</span><span class=n>Add</span><span class=p>(</span><span class=n>lhs</span> <span class=o>&lt;=</span> <span class=n>rhs</span><span class=p>)</span>
</code></pre></div> <h3 id=objective>Objective<a class=headerlink href=#objective title="Permanent link">&para;</a></h3> <p>The objective is to minimise costs. Costs are of four types:<br> - Holding cost<br> - stockout penalty<br> - ordering cost<br> - penalty for going below safety stock </p> <div class=highlight><pre><span></span><code><span class=n>HOLDING_COST</span> <span class=o>=</span> <span class=mf>0.1</span>
<span class=n>STOCKOUT_PENALTY</span> <span class=o>=</span> <span class=mi>10000</span>
<span class=n>ORDERING_COST</span> <span class=o>=</span> <span class=mi>10000</span>
<span class=n>SAFETY_STOCK_PENALTY</span> <span class=o>=</span> <span class=mi>100</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=n>total_cost</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>future_data</span><span class=p>[</span><span class=s1>&#39;inventory&#39;</span><span class=p>]</span><span class=o>*</span><span class=p>(</span><span class=n>HOLDING_COST</span><span class=p>))</span> <span class=o>+</span> <span class=nb>sum</span><span class=p>(</span><span class=n>future_data</span><span class=p>[</span><span class=s1>&#39;stock_bool&#39;</span><span class=p>]</span><span class=o>*</span><span class=n>STOCKOUT_PENALTY</span><span class=p>)</span> <span class=o>+</span> \
    <span class=nb>sum</span><span class=p>(</span><span class=n>future_data</span><span class=p>[</span><span class=s1>&#39;order_bool&#39;</span><span class=p>]</span><span class=o>*</span><span class=n>ORDERING_COST</span><span class=p>)</span> <span class=o>+</span> <span class=nb>sum</span><span class=p>(</span><span class=n>future_data</span><span class=p>[</span><span class=s1>&#39;safety_stock_slack&#39;</span><span class=p>]</span><span class=o>*</span><span class=n>SAFETY_STOCK_PENALTY</span><span class=p>)</span>
<span class=c1>#                  /future_data.max_inventory)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=c1># The objective is to minimise cost</span>
<span class=n>inventory_model</span><span class=o>.</span><span class=n>Minimize</span><span class=p>(</span><span class=n>total_cost</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=c1># Solving the problem</span>
<span class=n>solver</span> <span class=o>=</span> <span class=n>cp_model</span><span class=o>.</span><span class=n>CpSolver</span><span class=p>()</span>
<span class=n>solution_printer</span> <span class=o>=</span> <span class=n>cp_model</span><span class=o>.</span><span class=n>ObjectiveSolutionPrinter</span><span class=p>()</span>
<span class=n>solver</span><span class=o>.</span><span class=n>parameters</span><span class=o>.</span><span class=n>max_time_in_seconds</span> <span class=o>=</span> <span class=mf>60.0</span> <span class=c1># ends the solver after 60 seconds</span>
<span class=n>status</span> <span class=o>=</span> <span class=n>solver</span><span class=o>.</span><span class=n>SolveWithSolutionCallback</span><span class=p>(</span><span class=n>inventory_model</span><span class=p>,</span> <span class=n>solution_printer</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code>Solution 0, time = 0.22 s, objective = 12087082
Solution 1, time = 0.25 s, objective = 12008958
Solution 2, time = 0.27 s, objective = 11930183
Solution 3, time = 0.27 s, objective = 2974744
Solution 4, time = 0.34 s, objective = 2456465
Solution 5, time = 0.61 s, objective = 2456446
Solution 6, time = 0.84 s, objective = 2456347
Solution 7, time = 0.92 s, objective = 763137
Solution 8, time = 1.25 s, objective = 763072
Solution 9, time = 2.15 s, objective = 747383
Solution 10, time = 2.31 s, objective = 686536
Solution 11, time = 3.67 s, objective = 655250
Solution 12, time = 4.79 s, objective = 641887
Solution 13, time = 5.35 s, objective = 639389
Solution 14, time = 6.25 s, objective = 639376
Solution 15, time = 7.16 s, objective = 638026
Solution 16, time = 10.30 s, objective = 633782
Solution 17, time = 12.40 s, objective = 617881
Solution 18, time = 14.50 s, objective = 617503
Solution 19, time = 16.86 s, objective = 615899
Solution 20, time = 17.47 s, objective = 615501
Solution 21, time = 20.66 s, objective = 612485
Solution 22, time = 24.29 s, objective = 604623
</code></pre></div> <div class=highlight><pre><span></span><code><span class=n>cp_model</span><span class=o>.</span><span class=n>INFEASIBLE</span> <span class=o>==</span> <span class=n>status</span>
</code></pre></div> <div class=highlight><pre><span></span><code>False
</code></pre></div> <div class=highlight><pre><span></span><code><span class=n>cp_model</span><span class=o>.</span><span class=n>OPTIMAL</span> <span class=o>==</span> <span class=n>status</span>
</code></pre></div> <div class=highlight><pre><span></span><code>False
</code></pre></div> <p>The solution is optimal. The solution is</p> <div class=highlight><pre><span></span><code><span class=n>future_data_solver</span> <span class=o>=</span> <span class=n>future_data</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
<span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>future_data_solver</span><span class=p>)):</span>
    <span class=n>date</span><span class=p>,</span> <span class=n>store</span><span class=p>,</span> <span class=n>prod</span> <span class=o>=</span> <span class=p>(</span><span class=n>future_data</span><span class=o>.</span><span class=n>date</span><span class=o>.</span><span class=n>dt</span><span class=o>.</span><span class=n>date</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>future_data</span><span class=o>.</span><span class=n>store_id</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>future_data</span><span class=o>.</span><span class=n>product_id</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
    <span class=n>future_data_solver</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;order_bool&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>solver</span><span class=o>.</span><span class=n>Value</span><span class=p>(</span><span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;order_bool&#39;</span><span class=p>])</span>
    <span class=n>future_data_solver</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;order_rec_qty&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>solver</span><span class=o>.</span><span class=n>Value</span><span class=p>(</span><span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;order_rec_qty&#39;</span><span class=p>])</span>
    <span class=n>future_data_solver</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;inventory&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>solver</span><span class=o>.</span><span class=n>Value</span><span class=p>(</span><span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;inventory&#39;</span><span class=p>])</span>
    <span class=n>future_data_solver</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;stockout&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>solver</span><span class=o>.</span><span class=n>Value</span><span class=p>(</span><span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;stockout&#39;</span><span class=p>])</span>
    <span class=n>future_data_solver</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;safety_stock_slack&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>solver</span><span class=o>.</span><span class=n>Value</span><span class=p>(</span><span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;safety_stock_slack&#39;</span><span class=p>])</span>
    <span class=n>future_data_solver</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;stock_bool&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>solver</span><span class=o>.</span><span class=n>Value</span><span class=p>(</span><span class=n>future_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span> <span class=s1>&#39;stock_bool&#39;</span><span class=p>])</span>
</code></pre></div> <h2 id=visualization>Visualization<a class=headerlink href=#visualization title="Permanent link">&para;</a></h2> <p>After solving, plot:<br> - Inventory vs Demand vs Orders<br> - Highlight safety stock line<br> The inventory for the product P001 and store S001 is </p> <div class=highlight><pre><span></span><code><span class=n>p_11</span> <span class=o>=</span> <span class=n>future_data_solver</span><span class=p>[(</span><span class=n>future_data_solver</span><span class=o>.</span><span class=n>product_id</span> <span class=o>==</span> <span class=s1>&#39;P0001&#39;</span><span class=p>)</span> <span class=o>&amp;</span> <span class=p>(</span><span class=n>future_data_solver</span><span class=o>.</span><span class=n>store_id</span> <span class=o>==</span> <span class=s1>&#39;S001&#39;</span><span class=p>)]</span>
<span class=n>fs</span><span class=p>,</span> <span class=n>axs</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>30</span><span class=p>),</span> <span class=n>gridspec_kw</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;height_ratios&#39;</span><span class=p>:</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>]},</span> <span class=n>constrained_layout</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=n>p_11</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>x</span><span class=o>=</span><span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=s1>&#39;inventory&#39;</span><span class=p>,</span> <span class=n>ax</span><span class=o>=</span><span class=n>axs</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
<span class=n>p_11</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>x</span><span class=o>=</span><span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=s1>&#39;order_rec_qty&#39;</span><span class=p>,</span> <span class=n>ax</span><span class=o>=</span><span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
<span class=n>p_11</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>x</span><span class=o>=</span><span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=s1>&#39;stockout&#39;</span><span class=p>,</span> <span class=n>ax</span><span class=o>=</span><span class=n>axs</span><span class=p>[</span><span class=mi>2</span><span class=p>])</span>

<span class=n>axs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s1>&#39;Inventory&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span><span class=p>);</span> <span class=n>axs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>set_xlabel</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>25</span><span class=p>);</span> 
<span class=n>axs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s1>&#39;Inventory of P0001 in S001&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span><span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s1>&#39;Order recieved Quantity&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span><span class=p>);</span> <span class=n>axs</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span><span class=o>.</span><span class=n>set_xlabel</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span><span class=p>);</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s1>&#39;Stockouts&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span><span class=p>);</span> <span class=n>axs</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span><span class=o>.</span><span class=n>set_xlabel</span><span class=p>(</span><span class=s1>&#39;Time&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span><span class=p>);</span>

<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>();</span>
</code></pre></div> <p><img alt=png src=../../../Python/inventory_optimization_eoq_ortools/output_46_0.png></p> <p>The chart clearly shows inventory levels fluctuating over time. Notice how the system strives to keep inventory above the safety stock threshold to maintain service levels. When demand consumes stock, inventory gradually declines until a replenishment order is triggered, restoring levels back above the safety stock line. Finally the answer to when to order and how much to order is </p> <div class=highlight><pre><span></span><code><span class=n>future_data_solver</span><span class=p>[</span><span class=s1>&#39;when_to_order&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>future_data_solver</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;store_id&#39;</span><span class=p>,</span> <span class=s1>&#39;product_id&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>order_bool</span><span class=o>.</span><span class=n>shift</span><span class=p>(</span><span class=o>-</span><span class=n>DEFAULT_LEAD_TIME</span><span class=p>)</span>
<span class=n>future_data_solver</span><span class=p>[</span><span class=s1>&#39;how_much_to_order&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>future_data_solver</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;store_id&#39;</span><span class=p>,</span> <span class=s1>&#39;product_id&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>order_rec_qty</span><span class=o>.</span><span class=n>shift</span><span class=p>(</span><span class=o>-</span><span class=n>DEFAULT_LEAD_TIME</span><span class=p>)</span>
<span class=n>future_data_solver</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>future_data_solver</span><span class=o>.</span><span class=n>when_to_order</span><span class=o>==</span><span class=mi>1</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=s1>&#39;how_much_to_order&#39;</span><span class=p>]]</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>date</th> <th>how_much_to_order</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>2023-01-01</td> <td>789</td> </tr> <tr> <th>8</th> <td>2023-01-09</td> <td>833</td> </tr> <tr> <th>13</th> <td>2023-01-14</td> <td>883</td> </tr> <tr> <th>21</th> <td>2023-01-22</td> <td>1084</td> </tr> <tr> <th>28</th> <td>2023-01-29</td> <td>704</td> </tr> <tr> <th>34</th> <td>2023-02-04</td> <td>906</td> </tr> <tr> <th>39</th> <td>2023-02-09</td> <td>1122</td> </tr> <tr> <th>43</th> <td>2023-02-13</td> <td>1070</td> </tr> <tr> <th>51</th> <td>2023-02-21</td> <td>999</td> </tr> <tr> <th>58</th> <td>2023-02-28</td> <td>777</td> </tr> <tr> <th>62</th> <td>2023-03-04</td> <td>1006</td> </tr> <tr> <th>68</th> <td>2023-03-10</td> <td>990</td> </tr> <tr> <th>78</th> <td>2023-03-20</td> <td>916</td> </tr> <tr> <th>82</th> <td>2023-03-24</td> <td>962</td> </tr> <tr> <th>87</th> <td>2023-03-29</td> <td>806</td> </tr> <tr> <th>90</th> <td>2023-04-01</td> <td>939</td> </tr> <tr> <th>99</th> <td>2023-04-10</td> <td>996</td> </tr> <tr> <th>106</th> <td>2023-04-17</td> <td>625</td> </tr> <tr> <th>113</th> <td>2023-04-24</td> <td>770</td> </tr> <tr> <th>119</th> <td>2023-04-30</td> <td>706</td> </tr> <tr> <th>127</th> <td>2023-05-08</td> <td>718</td> </tr> <tr> <th>133</th> <td>2023-05-14</td> <td>809</td> </tr> <tr> <th>137</th> <td>2023-05-18</td> <td>909</td> </tr> <tr> <th>146</th> <td>2023-05-27</td> <td>815</td> </tr> <tr> <th>154</th> <td>2023-06-04</td> <td>930</td> </tr> <tr> <th>162</th> <td>2023-06-12</td> <td>999</td> </tr> <tr> <th>167</th> <td>2023-06-17</td> <td>864</td> </tr> <tr> <th>174</th> <td>2023-06-24</td> <td>1044</td> </tr> <tr> <th>180</th> <td>2023-06-30</td> <td>924</td> </tr> <tr> <th>190</th> <td>2023-07-10</td> <td>828</td> </tr> <tr> <th>196</th> <td>2023-07-16</td> <td>907</td> </tr> <tr> <th>200</th> <td>2023-07-20</td> <td>908</td> </tr> <tr> <th>206</th> <td>2023-07-26</td> <td>1171</td> </tr> <tr> <th>212</th> <td>2023-08-01</td> <td>1057</td> </tr> <tr> <th>218</th> <td>2023-08-07</td> <td>1016</td> </tr> <tr> <th>224</th> <td>2023-08-13</td> <td>1049</td> </tr> <tr> <th>231</th> <td>2023-08-20</td> <td>935</td> </tr> <tr> <th>237</th> <td>2023-08-26</td> <td>936</td> </tr> <tr> <th>247</th> <td>2023-09-05</td> <td>1141</td> </tr> <tr> <th>258</th> <td>2023-09-16</td> <td>1029</td> </tr> <tr> <th>263</th> <td>2023-09-21</td> <td>1053</td> </tr> <tr> <th>269</th> <td>2023-09-27</td> <td>822</td> </tr> <tr> <th>276</th> <td>2023-10-04</td> <td>1161</td> </tr> <tr> <th>287</th> <td>2023-10-15</td> <td>878</td> </tr> <tr> <th>292</th> <td>2023-10-20</td> <td>828</td> </tr> <tr> <th>298</th> <td>2023-10-26</td> <td>843</td> </tr> <tr> <th>301</th> <td>2023-10-29</td> <td>980</td> </tr> <tr> <th>309</th> <td>2023-11-06</td> <td>1070</td> </tr> <tr> <th>318</th> <td>2023-11-15</td> <td>760</td> </tr> <tr> <th>321</th> <td>2023-11-18</td> <td>799</td> </tr> <tr> <th>326</th> <td>2023-11-23</td> <td>859</td> </tr> <tr> <th>331</th> <td>2023-11-28</td> <td>994</td> </tr> <tr> <th>339</th> <td>2023-12-06</td> <td>897</td> </tr> <tr> <th>343</th> <td>2023-12-10</td> <td>842</td> </tr> <tr> <th>350</th> <td>2023-12-17</td> <td>856</td> </tr> <tr> <th>355</th> <td>2023-12-22</td> <td>1081</td> </tr> </tbody> </table> </div> <h2 id=references>References<a class=headerlink href=#references title="Permanent link">&para;</a></h2> <ul> <li>Kaggle dataset: <em>Retail Store Inventory Forecasting Dataset</em> (<a href=https://www.kaggle.com/datasets/anirudhchauhan/retail-store-inventory-forecasting-dataset>link</a>). </li> <li>OR-Tools MIP: <a href=https://developers.google.com/optimization>https://developers.google.com/optimization</a>.</li> </ul> <div class=giscus></div> <script src=https://giscus.app/client.js data-repo=HarshaAsh/website-mkdocs data-repo-id="MDEwOlJlcG9zaXRvcnkzOTg4MjYzNjk=" data-category=General data-category-id=DIC_kwDOF8Wbgc4C2jiA data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=hi crossorigin=anonymous async>
                  </script> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../Others/integer_programming_blog/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Integer Programming tricks" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Integer Programming tricks </div> </div> </a> <a href=../../R/adoption_of_new_product/ class="md-footer__link md-footer__link--next" aria-label="Next: Adoption of new product (R)" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Adoption of new product (R) </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> <img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by/4.0/88x31.png> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-contact style="text-align: center; margin: 1rem 0;"> <a href=../../../contact title="Contact Me" style="display: inline-flex; align-items: center; gap: 0.5rem; color: rgba(255, 255, 255, 0.7); text-decoration: none;"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24" style="width: 1.2rem; height: 1.2rem; fill: rgba(255, 255, 255, 0.7);"> <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/> </svg> <span>Contact Me</span> </a> </div> <div class=md-footer-social> <a href=https://github.com/HarshaAsh target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://www.linkedin.com/in/sri-harsha-achyuthuni/ target=_blank rel=noopener title=www.linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://www.instagram.com/harshaash_com/ target=_blank rel=noopener title=www.instagram.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg> </a> <a href=https://www.facebook.com/sri.harsha.achyuthuni/ target=_blank rel=noopener title=www.facebook.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["content.code.annotate", "content.tabs.link", "header.autohide", "navigation.sections", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../../../assets/javascripts/workers/search.709b4209.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": null}</script> <script src=../../../assets/javascripts/bundle.56838a2c.min.js></script> </body> </html>