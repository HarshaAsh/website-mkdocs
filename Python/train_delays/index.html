<!doctype html><html lang=en class=no-js> <head><script>
      (function () {
        var adsLoaded = false;

        function loadAds() {
          if (adsLoaded) return;
          adsLoaded = true;

          var ads = document.createElement("script");
          ads.async = true;
          ads.src = "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8786690539845043";
          ads.crossOrigin = "anonymous";
          document.head.appendChild(ads);

          var amp = document.createElement("script");
          amp.async = true;
          amp.setAttribute("custom-element", "amp-auto-ads");
          amp.src = "https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js";
          document.head.appendChild(amp);

          var autoAds = document.createElement("amp-auto-ads");
          autoAds.setAttribute("type", "adsense");
          autoAds.setAttribute("data-ad-client", "ca-pub-8786690539845043");
          document.body.appendChild(autoAds);
        }

        function onFirstInteraction() {
          loadAds();
          removeListeners();
        }

        function removeListeners() {
          window.removeEventListener("scroll", onFirstInteraction, { passive: true });
          window.removeEventListener("mousemove", onFirstInteraction, { passive: true });
          window.removeEventListener("touchstart", onFirstInteraction, { passive: true });
          window.removeEventListener("keydown", onFirstInteraction, { passive: true });
        }

        window.addEventListener("scroll", onFirstInteraction, { passive: true });
        window.addEventListener("mousemove", onFirstInteraction, { passive: true });
        window.addEventListener("touchstart", onFirstInteraction, { passive: true });
        window.addEventListener("keydown", onFirstInteraction, { passive: true });

        window.addEventListener("load", function () {
          setTimeout(loadAds, 5000);
        }, { once: true });
      })();
    </script><script>
      (function () {
        function deferThirdParties() {
          var optimize = document.createElement("script");
          optimize.src = "https://www.googleoptimize.com/optimize.js?id=OPT-M98W6LW";
          optimize.async = true;
          document.head.appendChild(optimize);

          window._mfq = window._mfq || [];
          var mf = document.createElement("script");
          mf.type = "text/javascript";
          mf.defer = true;
          mf.src = "//cdn.mouseflow.com/projects/7b4494c9-7974-49f0-9777-d14450db37e6.js";
          document.head.appendChild(mf);
        }

        if (document.readyState === "complete") {
          deferThirdParties();
        } else {
          window.addEventListener("load", deferThirdParties, { once: true });
        }
      })();
    </script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Harsha's notes on data science"><meta name=author content="Harsha Achyuthuni"><link href=https://www.harshaash.com/Python/train_delays/ rel=canonical><link rel=icon href=../../assets/images/logo.jpg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-7.2.4"><title>DBSCAN Clustering (Python) - Data Science with Harsha</title><link rel=preload href=../../assets/stylesheets/main.f7f47774.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=../../assets/stylesheets/main.f7f47774.min.css></noscript><link rel=preload href=../../assets/stylesheets/palette.3f5d1f46.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=../../assets/stylesheets/palette.3f5d1f46.min.css></noscript><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"></noscript><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=preload href=../../overrides/assets/stylesheets/user_defined.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=../../overrides/assets/stylesheets/user_defined.css></noscript><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-65034507-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-scheme data-md-color-primary data-md-color-accent> <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer style="margin-bottom: 0;"></label> <div data-md-component=skip> <a href=#analyzing-train-delays-in-india-using-dbscan class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header style="background-color: navy;" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Data Science with Harsha" class="md-header__button md-logo" aria-label="Data Science with Harsha" data-md-component=logo> <img src=../../assets/images/logo.jpg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Data Science with Harsha </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> DBSCAN Clustering (Python) </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme data-md-color-primary data-md-color-accent aria-hidden=true type=radio name=__palette id=__palette_1> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme data-md-color-primary data-md-color-accent aria-hidden=true type=radio name=__palette id=__palette_3> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_4> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_3 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <div class=md-header__option> <div class=md-select id=language-selector> <button class=md-header__button aria-label="Select language" id=lang-button style="font-weight: 500; font-size: 0.9rem; padding: 0.2rem 0.5rem;"> <span id=current-lang>En</span> </button> <div class=md-select__inner id=lang-dropdown style="display: none;"> <ul class=md-select__list> <li class=md-select__item> <a href=# class=md-select__link data-lang=en>English</a> </li> <li class=md-select__item> <a href=# class=md-select__link data-lang=hi>हिन्दी</a> </li> <li class=md-select__item> <a href=# class=md-select__link data-lang=te>తెలుగు</a> </li> </ul> </div> </div> </div> <script>
      (function() {
        const button = document.getElementById('lang-button');
        const dropdown = document.getElementById('lang-dropdown');
        const langLinks = document.querySelectorAll('[data-lang]');
        const currentLangDisplay = document.getElementById('current-lang');
        
        // Detect current language from URL
        const currentPath = window.location.pathname;
        if (currentPath.includes('/hi/')) {
          currentLangDisplay.textContent = 'अ(A/అ)';
        } else if (currentPath.includes('/te/')) {
          currentLangDisplay.textContent = 'అ(A/अ)';
        } else {
          currentLangDisplay.textContent = 'Eng(अ/అ)'; // Default to English
        }
        
        // Toggle dropdown on button click
        button.addEventListener('click', function(e) {
          e.stopPropagation();
          dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function() {
          dropdown.style.display = 'none';
        });
        
        // Handle language selection
        langLinks.forEach(function(link) {
          link.addEventListener('click', function(e) {
            e.preventDefault();
            const selectedLang = this.getAttribute('data-lang');
            const currentPath = window.location.pathname;
            let newPath;
            
            if (selectedLang === 'en') {
              // Remove /hi/ or /te/ from path
              newPath = currentPath.replace(/\/(hi|te)\//, '/');
            } else if (selectedLang === 'hi') {
              // Add or replace with /hi/
              if (currentPath.includes('/te/')) {
                newPath = currentPath.replace('/te/', '/hi/');
              } else if (currentPath.includes('/hi/')) {
                newPath = currentPath;
              } else {
                newPath = '/hi' + currentPath;
              }
            } else if (selectedLang === 'te') {
              // Add or replace with /te/
              if (currentPath.includes('/hi/')) {
                newPath = currentPath.replace('/hi/', '/te/');
              } else if (currentPath.includes('/te/')) {
                newPath = currentPath;
              } else {
                newPath = '/te' + currentPath;
              }
            }
            
            window.location.href = newPath;
          });
        });
      })();
    </script> <a href=../../contact title="Contact Me" class=md-header__button aria-label="Contact Me" style="display: inline-flex; align-items: center; gap: 0.3rem; white-space: nowrap;"> <span class=md-icon style="display: inline-flex;"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"/></svg> </span> <span style="font-size: 0.8rem;">Contact Me</span> </a> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Data Science with Harsha" class="md-nav__button md-logo" aria-label="Data Science with Harsha" data-md-component=logo> <img src=../../assets/images/logo.jpg alt=logo> </a> Data Science with Harsha </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../../resume/ class=md-nav__link> Resume </a> </li> <li class=md-nav__item> <a href=../../learn/ class=md-nav__link> Learn </a> </li> <li class=md-nav__item> <a href=../../contact/ class=md-nav__link> Contact </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5> Blog <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Blog data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/Table_of_Contents/ class=md-nav__link> Table of Contents </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2 type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2> Visualization <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Visualization data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Visualization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Vizualisation%20using%20python%20Part%201/ class=md-nav__link> Vizualizing tabular data (Python) </a> </li> <li class=md-nav__item> <a href=../Visualization%20for%20predictive%20analytics/ class=md-nav__link> Vizualising for predictive analytics (Python) </a> </li> <li class=md-nav__item> <a href=../../R/Univariate-analysis/ class=md-nav__link> Univariate Analysis (R) </a> </li> <li class=md-nav__item> <a href=../../R/multivariateAnalysis/ class=md-nav__link> Multivariate Analysis (R) </a> </li> <li class=md-nav__item> <a href=../../R/multicollinearity/ class=md-nav__link> Multicollinearity (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_3 type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3> Statistics basics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Statistics basics" data-md-level=2> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Statistics basics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Statistics%20basics/ class=md-nav__link> Statistics Basics (Python) </a> </li> <li class=md-nav__item> <a href=../../R/Probability/ class=md-nav__link> Probability (R) </a> </li> <li class=md-nav__item> <a href=../../R/vectors/ class=md-nav__link> Vectors (R) </a> </li> <li class=md-nav__item> <a href=../../R/matrices/ class=md-nav__link> Matrices (R) </a> </li> <li class=md-nav__item> <a href=../Call%20center%20distributions/ class=md-nav__link> Call center distributions (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_4 type=checkbox id=__nav_5_4> <label class=md-nav__link for=__nav_5_4> Hypothesis Testing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Hypothesis Testing" data-md-level=2> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Hypothesis Testing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/attendance_t_test/ class=md-nav__link> z-test and t-test (R) </a> </li> <li class=md-nav__item> <a href=../../R/anova/ class=md-nav__link> ANOVA Test (R) </a> </li> <li class=md-nav__item> <a href=../../R/chi-sq-goodness-of-fit/ class=md-nav__link> Chi-Square Goodness of fit (R) </a> </li> <li class=md-nav__item> <a href=../../R/chi-sq-test-of-independence/ class=md-nav__link> Chi-Square test of independence (R) </a> </li> <li class=md-nav__item> <a href=../Hypothesis_Testing_Python/ class=md-nav__link> Hypothesis testing using Python </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_5 type=checkbox id=__nav_5_5> <label class=md-nav__link for=__nav_5_5> Factor Analysis <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Factor Analysis" data-md-level=2> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> Factor Analysis </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/Curse-of-Dimensionality/ class=md-nav__link> Curse of dimensionality </a> </li> <li class=md-nav__item> <a href=../../R/EFA/ class=md-nav__link> Exploratory factor analysis (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_6 type=checkbox id=__nav_5_6> <label class=md-nav__link for=__nav_5_6> Preprocessing data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Preprocessing data" data-md-level=2> <label class=md-nav__title for=__nav_5_6> <span class="md-nav__icon md-icon"></span> Preprocessing data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/KNN_Imputation/ class=md-nav__link> Null Value Imputation (R) </a> </li> <li class=md-nav__item> <a href=../Machine%20Learning%20Part%201/ class=md-nav__link> Feature engineering (Python) </a> </li> <li class=md-nav__item> <a href=../../R/Handling-Imbalanced-classes/ class=md-nav__link> Handling Imbalanced Classes </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_7 type=checkbox id=__nav_5_7> <label class=md-nav__link for=__nav_5_7> Prediction algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Prediction algorithms" data-md-level=2> <label class=md-nav__title for=__nav_5_7> <span class="md-nav__icon md-icon"></span> Prediction algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_7_1 type=checkbox id=__nav_5_7_1> <label class=md-nav__link for=__nav_5_7_1> Classification Algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Classification Algorithms" data-md-level=3> <label class=md-nav__title for=__nav_5_7_1> <span class="md-nav__icon md-icon"></span> Classification Algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/logistic-regression/ class=md-nav__link> Logistic Regression (R) </a> </li> <li class=md-nav__item> <a href=../../R/CHAID/ class=md-nav__link> CHAID Decision Trees (R) </a> </li> <li class=md-nav__item> <a href=../../R/CART-Classification/ class=md-nav__link> CART Classification (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_7_2 type=checkbox id=__nav_5_7_2> <label class=md-nav__link for=__nav_5_7_2> Regression Algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Regression Algorithms" data-md-level=3> <label class=md-nav__title for=__nav_5_7_2> <span class="md-nav__icon md-icon"></span> Regression Algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/part-and-partial-corr/ class=md-nav__link> Part and partial correlation </a> </li> <li class=md-nav__item> <a href=../../R/Linear-regression/ class=md-nav__link> Linear Regression (R) </a> </li> <li class=md-nav__item> <a href=../Linear%20regression%20usecase%20mpg%20prediction/ class=md-nav__link> Lasso and Ridge regression (Python) </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_8 type=checkbox id=__nav_5_8> <label class=md-nav__link for=__nav_5_8> Machine Learning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Machine Learning" data-md-level=2> <label class=md-nav__title for=__nav_5_8> <span class="md-nav__icon md-icon"></span> Machine Learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://harshaachyuthuni.shinyapps.io/Machine_Learning/ class=md-nav__link> Interactive Machine Learning (RShiny) </a> </li> <li class=md-nav__item> <a href=../ML%20using%20scikit-learn/ class=md-nav__link> Multi models (Python) </a> </li> <li class=md-nav__item> <a href=../Explainable%20models%20using%20Heart%20Failure/ class=md-nav__link> Explainable ML (Python) </a> </li> <li class=md-nav__item> <a href=../Demonstrating%20online%20learning/ class=md-nav__link> Streaming Machine Learning (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_9 type=checkbox id=__nav_5_9> <label class=md-nav__link for=__nav_5_9> Time Series forecasting <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Time Series forecasting" data-md-level=2> <label class=md-nav__title for=__nav_5_9> <span class="md-nav__icon md-icon"></span> Time Series forecasting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/time-series/ class=md-nav__link> Introduction to stationarity (R) </a> </li> <li class=md-nav__item> <a href=../../R/Stationarity-tests/ class=md-nav__link> Stationary Tests (R) </a> </li> <li class=md-nav__item> <a href=../../R/ARIMA/ class=md-nav__link> ARIMA in R </a> </li> <li class=md-nav__item> <a href=../ARIMA%20Forecasting/ class=md-nav__link> ARIMA in Python </a> </li> <li class=md-nav__item> <a href=../../R/Seasonal-Time-Series/ class=md-nav__link> Seasonal time series (R) </a> </li> <li class=md-nav__item> <a href=../../R/VAR-models/ class=md-nav__link> VAR Models (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_10 type=checkbox id=__nav_5_10> <label class=md-nav__link for=__nav_5_10> Deep learning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Deep learning" data-md-level=2> <label class=md-nav__title for=__nav_5_10> <span class="md-nav__icon md-icon"></span> Deep learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ANN-1/ class=md-nav__link> Perceptron </a> </li> <li class=md-nav__item> <a href=../Backpropagation/ class=md-nav__link> Backpropagation </a> </li> <li class=md-nav__item> <a href=../DNN/ class=md-nav__link> Tensorflow and Keras </a> </li> <li class=md-nav__item> <a href=../Time%20series%20deep%20learning/ class=md-nav__link> Time series (python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_11 type=checkbox id=__nav_5_11> <label class=md-nav__link for=__nav_5_11> Generative AI <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Generative AI" data-md-level=2> <label class=md-nav__title for=__nav_5_11> <span class="md-nav__icon md-icon"></span> Generative AI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../LLM%20Tokenizers/ class=md-nav__link> LLM Tokenizers </a> </li> <li class=md-nav__item> <a href=../prompt_engineering_techniques/ class=md-nav__link> Prompt Engineering </a> </li> <li class=md-nav__item> <a href=../Agentic%20AI/ class=md-nav__link> Agentic AI </a> </li> <li class=md-nav__item> <a href=../RAG/ class=md-nav__link> RAG </a> </li> <li class=md-nav__item> <a href=../Blog%20validation/ class=md-nav__link> LangGraphs </a> </li> <li class=md-nav__item> <a href=../CrewAI/ class=md-nav__link> CrewAI </a> </li> <li class=md-nav__item> <a href=../../Others/yashoda_presentation/ class=md-nav__link> AI in Healthcare </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_12 type=checkbox id=__nav_5_12> <label class=md-nav__link for=__nav_5_12> Prescriptive Analytics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Prescriptive Analytics" data-md-level=2> <label class=md-nav__title for=__nav_5_12> <span class="md-nav__icon md-icon"></span> Prescriptive Analytics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/Linear-programming/ class=md-nav__link> Linear Programming (R) </a> </li> <li class=md-nav__item> <a href=../../Others/integer_programming_blog/ class=md-nav__link> Integer Programming tricks </a> </li> <li class=md-nav__item> <a href=../inventory_optimization_eoq_ortools/ class=md-nav__link> Inventory Optimisation (Python) </a> </li> <li class=md-nav__item> <a href=../../R/adoption_of_new_product/ class=md-nav__link> Adoption of new product (R) </a> </li> <li class=md-nav__item> <a href=../Diffusion%20on%20networks/ class=md-nav__link> Bass Forecasting model (Python) </a> </li> <li class=md-nav__item> <a href=../../Others/AHP/ class=md-nav__link> Analytic Hierarchy Process </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_13 type=checkbox id=__nav_5_13 checked> <label class=md-nav__link for=__nav_5_13> Clustering <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Clustering data-md-level=2> <label class=md-nav__title for=__nav_5_13> <span class="md-nav__icon md-icon"></span> Clustering </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/hierarchical_clustering/ class=md-nav__link> Hierarchical Clustering </a> </li> <li class=md-nav__item> <a href=../../R/kMeansClustering/ class=md-nav__link> K-Means Clustering </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> DBSCAN Clustering (Python) <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> DBSCAN Clustering (Python) </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#use-case-overview class=md-nav__link> Use Case Overview </a> </li> <li class=md-nav__item> <a href=#web-scraping-with-beautifulsoup class=md-nav__link> Web Scraping with BeautifulSoup </a> </li> <li class=md-nav__item> <a href=#geocoding-with-google-maps-api class=md-nav__link> Geocoding with Google Maps API </a> </li> <li class=md-nav__item> <a href=#clustering-with-dbscan class=md-nav__link> Clustering with DBSCAN </a> </li> <li class=md-nav__item> <a href=#cluster-analysis class=md-nav__link> Cluster Analysis </a> <nav class=md-nav aria-label="Cluster Analysis"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cluster-1-noise-colorblack class=md-nav__link> Cluster -1 (Noise, color:black) </a> </li> <li class=md-nav__item> <a href=#cluster-0-minimal-delays-color-green-mostly-near-patna class=md-nav__link> Cluster 0 (Minimal Delays, color: green, mostly near Patna) </a> </li> <li class=md-nav__item> <a href=#cluster-1-moderate-delays-color-blue-most-of-india class=md-nav__link> Cluster 1 (Moderate Delays, color: blue, most of India) </a> </li> <li class=md-nav__item> <a href=#cluster-2-high-delays-color-yellow-bilaspur-raigarh-stretch class=md-nav__link> Cluster 2 (High Delays, color: Yellow, Bilaspur-Raigarh stretch) </a> </li> <li class=md-nav__item> <a href=#cluster-3-severe-delays-color-red-ongole-khammam-nalgonda-stretch class=md-nav__link> Cluster 3 (Severe Delays, color: red, Ongole-Khammam-Nalgonda stretch) </a> </li> <li class=md-nav__item> <a href=#key-insights class=md-nav__link> Key Insights </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#visualizing-the-results class=md-nav__link> Visualizing the Results </a> </li> <li class=md-nav__item> <a href=#key-insights_1 class=md-nav__link> Key Insights </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> References </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_14 type=checkbox id=__nav_5_14> <label class=md-nav__link for=__nav_5_14> Reinforcement Learning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Reinforcement Learning" data-md-level=2> <label class=md-nav__title for=__nav_5_14> <span class="md-nav__icon md-icon"></span> Reinforcement Learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/CustomerLifetimeValue/ class=md-nav__link> Customer Lifetime Value </a> </li> <li class=md-nav__item> <a href=../../R/recommendation-systems/ class=md-nav__link> Recommendation Systems (R) </a> </li> <li class=md-nav__item> <a href=../Neural_collaborative_filtering/ class=md-nav__link> Collaborative Filtering (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_15 type=checkbox id=__nav_5_15> <label class=md-nav__link for=__nav_5_15> Networks <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Networks data-md-level=2> <label class=md-nav__title for=__nav_5_15> <span class="md-nav__icon md-icon"></span> Networks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Introduction%20to%20Networkx/ class=md-nav__link> Introduction to NetworkX (Python) </a> </li> <li class=md-nav__item> <a href=../Network%20Science/ class=md-nav__link> Network Science (Python) </a> </li> <li class=md-nav__item> <a href=../Network%20centrality/ class=md-nav__link> Network Centrality (Python) </a> </li> <li class=md-nav__item> <a href=../Shortest%20path%20problems/ class=md-nav__link> Shortest path using integer programming (Python) </a> </li> <li class=md-nav__item> <a href=../Network%20Flow%20problems/ class=md-nav__link> Network flow problems (Python) </a> </li> <li class=md-nav__item> <a href=../Community%20detection/ class=md-nav__link> Community detection (Python) </a> </li> <li class=md-nav__item> <a href=../Bipartite%20matching/ class=md-nav__link> Bipartite matching (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_16 type=checkbox id=__nav_5_16> <label class=md-nav__link for=__nav_5_16> Deployment <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Deployment data-md-level=2> <label class=md-nav__title for=__nav_5_16> <span class="md-nav__icon md-icon"></span> Deployment </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Machine%20learning%20as%20HTTP%20Request/ class=md-nav__link> ML deployment in Flask (Python) </a> </li> <li class=md-nav__item> <a href=../Saving%20predictions%20in%20database/ class=md-nav__link> Handling databases using python </a> </li> <li class=md-nav__item> <a href=../ORM/ class=md-nav__link> ORM (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_17 type=checkbox id=__nav_5_17> <label class=md-nav__link for=__nav_5_17> Career lessons <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Career lessons" data-md-level=2> <label class=md-nav__title for=__nav_5_17> <span class="md-nav__icon md-icon"></span> Career lessons </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/learnings/ class=md-nav__link> Learnings from failures </a> </li> <li class=md-nav__item> <a href=../../Others/podcast/ class=md-nav__link> Making ML Consumable </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_18 type=checkbox id=__nav_5_18> <label class=md-nav__link for=__nav_5_18> Higher education review <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Higher education review" data-md-level=2> <label class=md-nav__title for=__nav_5_18> <span class="md-nav__icon md-icon"></span> Higher education review </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/IIMB%20BAI/ class=md-nav__link> IIMB BAI </a> </li> <li class=md-nav__item> <a href=../../Others/part%20time%20data%20science%20masters/ class=md-nav__link> Part-time DS masters </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_19 type=checkbox id=__nav_5_19> <label class=md-nav__link for=__nav_5_19> External blogs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="External blogs" data-md-level=2> <label class=md-nav__title for=__nav_5_19> <span class="md-nav__icon md-icon"></span> External blogs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/Imperial%20College%20London/ class=md-nav__link> Imperial college London </a> </li> <li class=md-nav__item> <a href=../../Others/Publications/ class=md-nav__link> Publications/conferences </a> </li> <li class=md-nav__item> <a href=../../Others/Deployed%20apps/ class=md-nav__link> Deployed apps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_20 type=checkbox id=__nav_5_20> <label class=md-nav__link for=__nav_5_20> Projects <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Projects data-md-level=2> <label class=md-nav__title for=__nav_5_20> <span class="md-nav__icon md-icon"></span> Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/preventive_maintainence/ class=md-nav__link> Preventive maintainence </a> </li> <li class=md-nav__item> <a href=../../Others/Contract%20Intelligence%20tool/ class=md-nav__link> Contract Intelligence </a> </li> <li class=md-nav__item> <a href=../../Others/competitor%20intelligence/ class=md-nav__link> Competitor intelligence </a> </li> <li class=md-nav__item> <a href=../../Others/quiz%20generation/ class=md-nav__link> Quiz Generation </a> </li> <li class=md-nav__item> <a href=../../Others/Scarecrow/ class=md-nav__link> Intelligent annotation </a> </li> <li class=md-nav__item> <a href=../../Others/Demand%20Forecasting/ class=md-nav__link> Demand Forecasting </a> </li> <li class=md-nav__item> <a href=../../Others/bid%20allocation%20model/ class=md-nav__link> Bid Allocation </a> </li> <li class=md-nav__item> <a href=../../Others/IIMB%20project/ class=md-nav__link> Reward and Recognition contests </a> </li> <li class=md-nav__item> <a href=../../Others/supply%20chain%20analytics/ class=md-nav__link> Supply chain analytics </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#use-case-overview class=md-nav__link> Use Case Overview </a> </li> <li class=md-nav__item> <a href=#web-scraping-with-beautifulsoup class=md-nav__link> Web Scraping with BeautifulSoup </a> </li> <li class=md-nav__item> <a href=#geocoding-with-google-maps-api class=md-nav__link> Geocoding with Google Maps API </a> </li> <li class=md-nav__item> <a href=#clustering-with-dbscan class=md-nav__link> Clustering with DBSCAN </a> </li> <li class=md-nav__item> <a href=#cluster-analysis class=md-nav__link> Cluster Analysis </a> <nav class=md-nav aria-label="Cluster Analysis"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cluster-1-noise-colorblack class=md-nav__link> Cluster -1 (Noise, color:black) </a> </li> <li class=md-nav__item> <a href=#cluster-0-minimal-delays-color-green-mostly-near-patna class=md-nav__link> Cluster 0 (Minimal Delays, color: green, mostly near Patna) </a> </li> <li class=md-nav__item> <a href=#cluster-1-moderate-delays-color-blue-most-of-india class=md-nav__link> Cluster 1 (Moderate Delays, color: blue, most of India) </a> </li> <li class=md-nav__item> <a href=#cluster-2-high-delays-color-yellow-bilaspur-raigarh-stretch class=md-nav__link> Cluster 2 (High Delays, color: Yellow, Bilaspur-Raigarh stretch) </a> </li> <li class=md-nav__item> <a href=#cluster-3-severe-delays-color-red-ongole-khammam-nalgonda-stretch class=md-nav__link> Cluster 3 (Severe Delays, color: red, Ongole-Khammam-Nalgonda stretch) </a> </li> <li class=md-nav__item> <a href=#key-insights class=md-nav__link> Key Insights </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#visualizing-the-results class=md-nav__link> Visualizing the Results </a> </li> <li class=md-nav__item> <a href=#key-insights_1 class=md-nav__link> Key Insights </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> References </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <p><meta name=description content="Analysing Indian Railway Delays with DBSCAN Clustering. Analyze Indian railway delays by scraping real-time data and applying DBSCAN clustering."></p> <h1 id=analyzing-train-delays-in-india-using-dbscan>Analyzing Train Delays in India Using DBSCAN<a class=headerlink href=#analyzing-train-delays-in-india-using-dbscan title="Permanent link">&para;</a></h1> <h2 id=use-case-overview>Use Case Overview<a class=headerlink href=#use-case-overview title="Permanent link">&para;</a></h2> <p>Train delays are a common challenge in India’s vast railway network, impacting millions of passengers daily. Understanding patterns behind these delays can help optimize scheduling and improve operational efficiency. In this blog, we collected real-time train running status data, calculated delay metrics, and applied clustering techniques to identify geographical and temporal patterns of delays across stations. The goal is to uncover hotspots where delays frequently occur and analyze their severity.</p> <div class=highlight><pre><span></span><code><span class=kn>from</span><span class=w> </span><span class=nn>bs4</span><span class=w> </span><span class=kn>import</span> <span class=n>BeautifulSoup</span>
<span class=kn>import</span><span class=w> </span><span class=nn>requests</span>
<span class=kn>import</span><span class=w> </span><span class=nn>pandas</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pd</span>
<span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span>
</code></pre></div> <h2 id=web-scraping-with-beautifulsoup>Web Scraping with BeautifulSoup<a class=headerlink href=#web-scraping-with-beautifulsoup title="Permanent link">&para;</a></h2> <p>To gather train delay data, we used BeautifulSoup, a Python library for parsing HTML and XML documents. The data was sourced from <a href=https://runningstatus.in/ >runningstatus.in</a>, which provides live train status updates. BeautifulSoup allowed us to:<br> 1. Extract structured data from HTML tables containing station names, scheduled and actual arrival/departure times, and delay information.<br> 2. Handle inconsistencies in HTML tags and parse nested elements like <code>&lt;abbr&gt;</code> for station codes and <code>&lt;small&gt;</code> for delay status.<br> 3. Convert the extracted data into a pandas DataFrame for further analysis. </p> <p>This approach automated data collection for thousands of trains, creating a rich dataset of over 26,000 rows. </p> <p>For the Train <a href=https://runningstatus.in/status/12805>Janmabhoomi express</a>, we have the following in the live running status:<br> <img alt=image.png src=311af7a0-32af-451d-8cb0-1aec9661e82f.png></p> <p>The corresponding html code is:<br> <img alt=image.png src=94d55fe5-ddd6-4399-9ac6-580867636879.png></p> <div class=highlight><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_table</span><span class=p>(</span><span class=n>train_number</span><span class=p>):</span>
    <span class=c1># The link takes two inputs, train number and date in YYYYMMDD (2025-12-13)</span>
    <span class=n>link</span> <span class=o>=</span> <span class=s1>&#39;https://runningstatus.in/status/&#39;</span><span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>train_number</span><span class=p>)</span><span class=o>+</span><span class=s1>&#39;-on-20251213&#39;</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>link</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=mi>15</span><span class=p>)</span>
    <span class=k>except</span><span class=p>:</span>
        <span class=c1># Timeout happens if there is no train for the train number on the date</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;timeout for&quot;</span><span class=p>,</span> <span class=n>train_number</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>()</span>
    <span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>status_code</span> <span class=o>==</span> <span class=mi>200</span><span class=p>:</span>
        <span class=n>page_content</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>text</span>
        <span class=n>soup</span> <span class=o>=</span> <span class=n>BeautifulSoup</span><span class=p>(</span><span class=n>page_content</span><span class=p>,</span> <span class=s1>&#39;html.parser&#39;</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=nb>print</span><span class=p>(</span><span class=n>train_number</span><span class=p>,</span> <span class=s1>&#39;Failed&#39;</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>()</span>
    <span class=n>table</span> <span class=o>=</span> <span class=n>soup</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;table&quot;</span><span class=p>)</span>
    <span class=n>last_updated</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>for</span> <span class=n>thead</span> <span class=ow>in</span> <span class=n>table</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s2>&quot;thead&quot;</span><span class=p>):</span>
        <span class=c1># thead contains the header row in the table</span>
        <span class=n>last_row</span> <span class=o>=</span> <span class=n>thead</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;tr&quot;</span><span class=p>)</span>
        <span class=c1># tr is the row</span>
        <span class=k>if</span> <span class=n>last_row</span><span class=p>:</span>
            <span class=n>td</span> <span class=o>=</span> <span class=n>last_row</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;td&quot;</span><span class=p>,</span> <span class=n>colspan</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>td</span> <span class=ow>and</span> <span class=s2>&quot;Last Updated&quot;</span> <span class=ow>in</span> <span class=n>td</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>):</span>
                <span class=n>last_updated</span> <span class=o>=</span> <span class=n>td</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
                <span class=k>break</span>

    <span class=n>rows</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>tbody</span> <span class=o>=</span> <span class=n>table</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;tbody&quot;</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>tr</span> <span class=ow>in</span> <span class=n>tbody</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s2>&quot;tr&quot;</span><span class=p>):</span>
        <span class=c1># td is every cell (table data)</span>
        <span class=n>tds</span> <span class=o>=</span> <span class=n>tr</span><span class=o>.</span><span class=n>find_all</span><span class=p>(</span><span class=s2>&quot;td&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>tds</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>4</span><span class=p>:</span>
            <span class=k>continue</span>
            <span class=c1># should have 4 rows</span>

        <span class=c1># --- Station cell ---</span>
        <span class=n>station_cell</span> <span class=o>=</span> <span class=n>tds</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
        <span class=n>abbr</span> <span class=o>=</span> <span class=n>station_cell</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;abbr&quot;</span><span class=p>)</span> <span class=c1># this is the station name abbreviation</span>
        <span class=n>station_name</span> <span class=o>=</span> <span class=n>abbr</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span> <span class=k>if</span> <span class=n>abbr</span> <span class=k>else</span> <span class=n>station_cell</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
        <span class=n>station_code</span> <span class=o>=</span> <span class=n>abbr</span><span class=p>[</span><span class=s2>&quot;title&quot;</span><span class=p>]</span> <span class=k>if</span> <span class=p>(</span><span class=n>abbr</span> <span class=ow>and</span> <span class=n>abbr</span><span class=o>.</span><span class=n>has_attr</span><span class=p>(</span><span class=s2>&quot;title&quot;</span><span class=p>))</span> <span class=k>else</span> <span class=kc>None</span>

        <span class=n>delay_small</span> <span class=o>=</span> <span class=n>station_cell</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;small&quot;</span><span class=p>)</span> <span class=c1># this is delay status</span>
        <span class=n>delay_status</span> <span class=o>=</span> <span class=n>delay_small</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span> <span class=k>if</span> <span class=n>delay_small</span> <span class=k>else</span> <span class=kc>None</span>

        <span class=c1># --- Arrival cell ---</span>
        <span class=n>arrival_cell</span> <span class=o>=</span> <span class=n>tds</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
        <span class=n>arrival_text</span> <span class=o>=</span> <span class=n>arrival_cell</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=s2>&quot; &quot;</span><span class=p>,</span> <span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># e.g., &quot;02:11 PM / 02:11 PM&quot; or &quot;Source&quot;</span>
        <span class=n>arrival_status_tag</span> <span class=o>=</span> <span class=n>arrival_cell</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;span&quot;</span><span class=p>)</span>
        <span class=n>arrival_status</span> <span class=o>=</span> <span class=n>arrival_status_tag</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span> <span class=k>if</span> <span class=n>arrival_status_tag</span> <span class=k>else</span> <span class=kc>None</span>

        <span class=c1># Parse arrival times if present</span>
        <span class=n>arr_sch</span><span class=p>,</span> <span class=n>arr_act</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=s2>&quot;/&quot;</span> <span class=ow>in</span> <span class=n>arrival_text</span><span class=p>:</span>
            <span class=n>parts</span> <span class=o>=</span> <span class=p>[</span><span class=n>p</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>arrival_text</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>)]</span>
            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>parts</span><span class=p>)</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
                <span class=n>arr_sch</span><span class=p>,</span> <span class=n>arr_act</span> <span class=o>=</span> <span class=n>parts</span>

        <span class=c1># --- Departure cell ---</span>
        <span class=n>departure_cell</span> <span class=o>=</span> <span class=n>tds</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span>
        <span class=n>departure_text</span> <span class=o>=</span> <span class=n>departure_cell</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=s2>&quot; &quot;</span><span class=p>,</span> <span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># e.g., &quot;02:12 PM / 02:12 PM&quot; or &quot;Destination&quot;</span>
        <span class=n>departure_status_tag</span> <span class=o>=</span> <span class=n>departure_cell</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;span&quot;</span><span class=p>)</span>
        <span class=n>departure_status</span> <span class=o>=</span> <span class=n>departure_status_tag</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span> <span class=k>if</span> <span class=n>departure_status_tag</span> <span class=k>else</span> <span class=kc>None</span>

        <span class=n>dep_sch</span><span class=p>,</span> <span class=n>dep_act</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=s2>&quot;/&quot;</span> <span class=ow>in</span> <span class=n>departure_text</span><span class=p>:</span>
            <span class=n>parts</span> <span class=o>=</span> <span class=p>[</span><span class=n>p</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>departure_text</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>)]</span>
            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>parts</span><span class=p>)</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
                <span class=n>dep_sch</span><span class=p>,</span> <span class=n>dep_act</span> <span class=o>=</span> <span class=n>parts</span>

        <span class=c1># --- PF cell ---</span>
        <span class=n>pf</span> <span class=o>=</span> <span class=n>tds</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=n>strip</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>

        <span class=n>rows</span><span class=o>.</span><span class=n>append</span><span class=p>({</span>
            <span class=s2>&quot;Station Name&quot;</span><span class=p>:</span> <span class=n>station_name</span><span class=p>,</span>
            <span class=s2>&quot;Station Code&quot;</span><span class=p>:</span> <span class=n>station_code</span><span class=p>,</span>
            <span class=s2>&quot;Delay Status&quot;</span><span class=p>:</span> <span class=n>delay_status</span><span class=p>,</span>
            <span class=s2>&quot;Arrival Scheduled&quot;</span><span class=p>:</span> <span class=n>arr_sch</span><span class=p>,</span>
            <span class=s2>&quot;Arrival Actual&quot;</span><span class=p>:</span> <span class=n>arr_act</span><span class=p>,</span>
            <span class=s2>&quot;Arrival Status&quot;</span><span class=p>:</span> <span class=n>arrival_status</span><span class=p>,</span>
            <span class=s2>&quot;Departure Scheduled&quot;</span><span class=p>:</span> <span class=n>dep_sch</span><span class=p>,</span>
            <span class=s2>&quot;Departure Actual&quot;</span><span class=p>:</span> <span class=n>dep_act</span><span class=p>,</span>
            <span class=s2>&quot;Departure Status&quot;</span><span class=p>:</span> <span class=n>departure_status</span><span class=p>,</span>  <span class=c1># e.g., &quot;Destination&quot;</span>
            <span class=s2>&quot;PF&quot;</span><span class=p>:</span> <span class=n>pf</span>
        <span class=p>})</span>

    <span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>rows</span><span class=p>)</span>
    <span class=n>df</span><span class=p>[</span><span class=s1>&#39;train_number&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>train_number</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>train_number</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>df</span>
</code></pre></div> <p><a href="https://etrain.info/list/SF-TRAINS?page=1">Superfast express Trains</a> usually are of the form 12XXX or 22XXX. This analysis focuses on superfast trains, as they operate regularly and cover major stations.</p> <div class=highlight><pre><span></span><code><span class=n>train_details</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>()</span>
<span class=k>for</span> <span class=n>train_number</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>12101</span><span class=p>,</span> <span class=mi>12999</span><span class=p>):</span>
    <span class=n>train_details</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>concat</span><span class=p>([</span><span class=n>train_details</span><span class=p>,</span> <span class=n>get_table</span><span class=p>(</span><span class=n>train_number</span><span class=p>)],</span> <span class=n>ignore_index</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<span class=k>for</span> <span class=n>train_number</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>22101</span><span class=p>,</span> <span class=mi>22999</span><span class=p>):</span>
    <span class=n>train_details</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>concat</span><span class=p>([</span><span class=n>train_details</span><span class=p>,</span> <span class=n>get_table</span><span class=p>(</span><span class=n>train_number</span><span class=p>)],</span> <span class=n>ignore_index</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<span class=n>train_details</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class="dataframe table"> <thead> <tr style="text-align: right;"> <th></th> <th>Station Name</th> <th>Station Code</th> <th>Delay Status</th> <th>Arrival Scheduled</th> <th>Arrival Actual</th> <th>Arrival Status</th> <th>Departure Scheduled</th> <th>Departure Actual</th> <th>Departure Status</th> <th>PF</th> <th>train_number</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>Lokmanyatilak</td> <td>LTT</td> <td></td> <td>None</td> <td>None</td> <td>Source</td> <td>08:35PM</td> <td>08:36PM 01M Late</td> <td>08:36PM</td> <td>PF: 3</td> <td>12101</td> </tr> <tr> <th>1</th> <td>Kalyan</td> <td>KYN</td> <td>58 Km/Hr</td> <td>09:12PM</td> <td>09:35PM 23M Late</td> <td>09:35PM</td> <td>09:15PM</td> <td>09:45PM 30M Late</td> <td>09:45PM</td> <td>PF: 4</td> <td>12101</td> </tr> <tr> <th>2</th> <td>Bhusaval</td> <td>BSL</td> <td>30 Km/Hr</td> <td>02:50AM</td> <td>03:20AM 30M Late</td> <td>03:20AM</td> <td>02:55AM</td> <td>03:28AM 33M Late</td> <td>03:28AM</td> <td>PF: 5</td> <td>12101</td> </tr> <tr> <th>3</th> <td>Akola</td> <td>AK</td> <td>120 Km/Hr</td> <td>04:50AM</td> <td>05:20AM 30M Late</td> <td>05:20AM</td> <td>04:55AM</td> <td>05:24AM 29M Late</td> <td>05:24AM</td> <td>PF: 2</td> <td>12101</td> </tr> <tr> <th>4</th> <td>Badnera</td> <td>BD</td> <td>105 Km/Hr</td> <td>06:20AM</td> <td>06:36AM 16M Late</td> <td>06:36AM</td> <td>06:23AM</td> <td>06:39AM 16M Late</td> <td>06:39AM</td> <td>PF: 2</td> <td>12101</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>27</th> <td>Keshorai Patan</td> <td>KPTN</td> <td>126 Km/Hr</td> <td>09:23AM</td> <td>09:37AM 14M Late</td> <td>09:37AM</td> <td>09:25AM</td> <td>09:43AM 18M Late</td> <td>09:43AM</td> <td>PF: 1</td> <td>22998</td> </tr> <tr> <th>28</th> <td>Kota</td> <td>KOTA</td> <td>95 Km/Hr</td> <td>09:50AM</td> <td>09:57AM 07M Late</td> <td>09:57AM</td> <td>10:00AM</td> <td>10:08AM 08M Late</td> <td>10:08AM</td> <td>PF: 2</td> <td>22998</td> </tr> <tr> <th>29</th> <td>New Kota</td> <td>NKOT</td> <td>64 Km/Hr</td> <td>10:13AM</td> <td>10:21AM 08M Late</td> <td>10:21AM</td> <td>10:15AM</td> <td>10:24AM 09M Late</td> <td>10:24AM</td> <td>PF: 2</td> <td>22998</td> </tr> <tr> <th>30</th> <td>Ramganj Mandi</td> <td>RMA</td> <td>121 Km/Hr</td> <td>11:03AM</td> <td>11:14AM 11M Late</td> <td>11:14AM</td> <td>11:05AM</td> <td>11:19AM 14M Late</td> <td>11:19AM</td> <td>PF: 1</td> <td>22998</td> </tr> <tr> <th>31</th> <td>Jhalawar City</td> <td>JLWC</td> <td>55 Km/Hr</td> <td>12:05PM</td> <td>12:02PM No Delay</td> <td>12:02PM</td> <td>None</td> <td>None</td> <td>Destination</td> <td>PF: 1</td> <td>22998</td> </tr> </tbody> </table> <p>26152 rows × 11 columns</p> </div> <div class=highlight><pre><span></span><code><span class=n>train_details</span><span class=o>.</span><span class=n>columns</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;station_name&#39;</span><span class=p>,</span> <span class=s1>&#39;station_code&#39;</span><span class=p>,</span> <span class=s1>&#39;delay_status&#39;</span><span class=p>,</span> <span class=s1>&#39;scheduled_arrival&#39;</span><span class=p>,</span> <span class=s1>&#39;actual_arrival&#39;</span><span class=p>,</span> <span class=s1>&#39;arrival_status&#39;</span><span class=p>,</span> <span class=s1>&#39;scheduled_departure&#39;</span><span class=p>,</span> <span class=s1>&#39;actual_departure&#39;</span><span class=p>,</span> <span class=s1>&#39;departure_status&#39;</span><span class=p>,</span> <span class=s1>&#39;pf&#39;</span><span class=p>,</span> <span class=s1>&#39;train_number&#39;</span><span class=p>]</span>
</code></pre></div> <p>Creating variables such as delay in departure and arrival times.</p> <div class=highlight><pre><span></span><code><span class=n>train_details</span><span class=p>[[</span><span class=s1>&#39;actual_departure&#39;</span><span class=p>,</span> <span class=s1>&#39;delay_departure&#39;</span><span class=p>]]</span> <span class=o>=</span> <span class=n>train_details</span><span class=p>[</span><span class=s1>&#39;actual_departure&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>str</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;M&#39;</span><span class=p>,</span> <span class=n>n</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>expand</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=n>train_details</span><span class=p>[[</span><span class=s1>&#39;actual_arrival&#39;</span><span class=p>,</span> <span class=s1>&#39;arrival_departure&#39;</span><span class=p>]]</span> <span class=o>=</span> <span class=n>train_details</span><span class=p>[</span><span class=s1>&#39;actual_arrival&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>str</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;M&#39;</span><span class=p>,</span> <span class=n>n</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>expand</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=n>time_cols</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;scheduled_arrival&#39;</span><span class=p>,</span> <span class=s1>&#39;actual_arrival&#39;</span><span class=p>,</span> <span class=s1>&#39;scheduled_departure&#39;</span><span class=p>,</span> <span class=s1>&#39;actual_departure&#39;</span><span class=p>]</span>
<span class=n>train_details</span><span class=p>[</span><span class=s1>&#39;actual_departure&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>train_details</span><span class=p>[</span><span class=s1>&#39;actual_departure&#39;</span><span class=p>]</span> <span class=o>+</span> <span class=s1>&#39;M&#39;</span>
<span class=n>train_details</span><span class=p>[</span><span class=s1>&#39;actual_arrival&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>train_details</span><span class=p>[</span><span class=s1>&#39;actual_arrival&#39;</span><span class=p>]</span> <span class=o>+</span> <span class=s1>&#39;M&#39;</span>
<span class=k>for</span> <span class=n>time_col</span> <span class=ow>in</span> <span class=n>time_cols</span><span class=p>:</span>
    <span class=n>train_details</span><span class=p>[</span><span class=n>time_col</span><span class=p>]</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>to_datetime</span><span class=p>(</span><span class=n>train_details</span><span class=p>[</span><span class=n>time_col</span><span class=p>])</span>
</code></pre></div> <p>Creating delay variables</p> <div class=highlight><pre><span></span><code><span class=n>train_details</span><span class=p>[</span><span class=s1>&#39;arrival_delay&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=n>train_details</span><span class=o>.</span><span class=n>actual_arrival</span> <span class=o>-</span> <span class=n>train_details</span><span class=o>.</span><span class=n>scheduled_arrival</span><span class=p>)</span><span class=o>/</span><span class=n>pd</span><span class=o>.</span><span class=n>Timedelta</span><span class=p>(</span><span class=n>minutes</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<span class=n>train_details</span><span class=p>[</span><span class=s1>&#39;departure_delay&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=n>train_details</span><span class=o>.</span><span class=n>actual_departure</span> <span class=o>-</span> <span class=n>train_details</span><span class=o>.</span><span class=n>scheduled_departure</span><span class=p>)</span><span class=o>/</span><span class=n>pd</span><span class=o>.</span><span class=n>Timedelta</span><span class=p>(</span><span class=n>minutes</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<span class=n>train_details</span><span class=p>[</span><span class=s1>&#39;arrival_delay&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>maximum</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>train_details</span><span class=p>[</span><span class=s1>&#39;arrival_delay&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=mi>0</span><span class=p>))</span>
<span class=n>train_details</span><span class=p>[</span><span class=s1>&#39;departure_delay&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>maximum</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>train_details</span><span class=p>[</span><span class=s1>&#39;departure_delay&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=mi>0</span><span class=p>))</span>
<span class=n>train_details</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=c1># Filtering for midnight issues: </span>
<span class=c1># When the day changes and the arrival is just after midnight, the delay is shown as 24*60=1440 rather than the actual delay</span>
<span class=n>train_details</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>train_details</span><span class=o>.</span><span class=n>arrival_delay</span> <span class=o>&gt;=</span> <span class=mi>1350</span><span class=p>,</span> <span class=s1>&#39;arrival_delay&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1440</span> <span class=o>-</span> <span class=n>train_details</span><span class=p>[</span><span class=n>train_details</span><span class=o>.</span><span class=n>arrival_delay</span> <span class=o>&gt;=</span> <span class=mi>1350</span><span class=p>]</span><span class=o>.</span><span class=n>arrival_delay</span>
<span class=n>train_details</span><span class=o>.</span><span class=n>sort_values</span><span class=p>(</span><span class=s1>&#39;arrival_delay&#39;</span><span class=p>,</span> <span class=n>ascending</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span><span class=o>.</span><span class=n>tail</span><span class=p>(</span><span class=mi>25</span><span class=p>)</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class="dataframe table"> <thead> <tr style="text-align: right;"> <th></th> <th>Unnamed: 0</th> <th>station_name</th> <th>station_code</th> <th>delay_status</th> <th>scheduled_arrival</th> <th>actual_arrival</th> <th>arrival_status</th> <th>scheduled_departure</th> <th>actual_departure</th> <th>departure_status</th> <th>pf</th> <th>train_number</th> <th>delay_departure</th> <th>arrival_departure</th> <th>arrival_delay</th> <th>departure_delay</th> </tr> </thead> <tbody> <tr> <th>3491</th> <td>32</td> <td>Howrah</td> <td>HWH</td> <td>98 Km/Hr</td> <td>2025-12-14 07:35:00</td> <td>2025-12-14 15:28:00</td> <td>03:28PM</td> <td>NaT</td> <td>NaT</td> <td>Destination</td> <td>PF: 10</td> <td>12334</td> <td>NaN</td> <td>7H 53M Late</td> <td>473.0</td> <td>0.0</td> </tr> <tr> <th>13082</th> <td>15</td> <td>Rourkela</td> <td>ROU</td> <td>-4 Km/Hr</td> <td>2025-12-14 12:57:00</td> <td>2025-12-14 20:57:00</td> <td>08:57PM</td> <td>2025-12-14 13:05:00</td> <td>2025-12-14 21:41:00</td> <td>09:41PM</td> <td>PF: 3</td> <td>12871</td> <td>8H 36M Late</td> <td>8H Late</td> <td>480.0</td> <td>516.0</td> </tr> <tr> <th>3490</th> <td>31</td> <td>Bardhaman</td> <td>BWN</td> <td>4 Km/Hr</td> <td>2025-12-14 05:46:00</td> <td>2025-12-14 13:53:00</td> <td>01:53PM</td> <td>2025-12-14 05:50:00</td> <td>2025-12-14 13:56:00</td> <td>01:56PM</td> <td>PF: 3</td> <td>12334</td> <td>8H 6M Late</td> <td>8H 7M Late</td> <td>487.0</td> <td>486.0</td> </tr> <tr> <th>4571</th> <td>33</td> <td>Mathura</td> <td>MTJ</td> <td>91 Km/Hr</td> <td>2025-12-14 02:55:00</td> <td>2025-12-14 11:05:00</td> <td>11:05AM</td> <td>2025-12-14 02:57:00</td> <td>2025-12-14 11:08:00</td> <td>11:08AM</td> <td>PF: 2</td> <td>12409</td> <td>8H 11M Late</td> <td>8H 10M Late</td> <td>490.0</td> <td>491.0</td> </tr> <tr> <th>23263</th> <td>18</td> <td>Joychandi Pahar</td> <td>JOC</td> <td>21 Km/Hr</td> <td>2025-12-14 06:50:00</td> <td>2025-12-14 15:10:00</td> <td>03:10PM</td> <td>2025-12-14 06:52:00</td> <td>2025-12-14 15:36:00</td> <td>03:36PM</td> <td>-</td> <td>22844</td> <td>8H 44M Late</td> <td>8H 20M Late</td> <td>500.0</td> <td>524.0</td> </tr> <tr> <th>975</th> <td>5</td> <td>Bina</td> <td>BINA</td> <td>13 Km/Hr</td> <td>2025-12-14 00:50:00</td> <td>2025-12-14 09:11:00</td> <td>09:11AM</td> <td>2025-12-14 00:53:00</td> <td>2025-12-14 09:15:00</td> <td>09:15AM</td> <td>PF: 3</td> <td>12162</td> <td>8H 22M Late</td> <td>8H 21M Late</td> <td>501.0</td> <td>502.0</td> </tr> <tr> <th>842</th> <td>5</td> <td>Adra</td> <td>ADRA</td> <td>101 Km/Hr</td> <td>2025-12-14 00:05:00</td> <td>2025-12-14 09:10:00</td> <td>09:10AM</td> <td>2025-12-14 00:10:00</td> <td>2025-12-14 09:17:00</td> <td>09:17AM</td> <td>PF: 1</td> <td>12152</td> <td>9H 7M Late</td> <td>9H 5M Late</td> <td>545.0</td> <td>547.0</td> </tr> <tr> <th>977</th> <td>7</td> <td>Itarsi</td> <td>ET</td> <td>96 Km/Hr</td> <td>2025-12-14 04:15:00</td> <td>2025-12-14 13:20:00</td> <td>01:20PM</td> <td>2025-12-14 04:20:00</td> <td>2025-12-14 13:23:00</td> <td>01:23PM</td> <td>PF: 2</td> <td>12162</td> <td>9H 3M Late</td> <td>9H 5M Late</td> <td>545.0</td> <td>543.0</td> </tr> <tr> <th>976</th> <td>6</td> <td>Rani Kamalapati</td> <td>RKMP</td> <td>91 Km/Hr</td> <td>2025-12-14 02:40:00</td> <td>2025-12-14 11:46:00</td> <td>11:46AM</td> <td>2025-12-14 02:50:00</td> <td>2025-12-14 11:56:00</td> <td>11:56AM</td> <td>PF: 5</td> <td>12162</td> <td>9H 6M Late</td> <td>9H 6M Late</td> <td>546.0</td> <td>546.0</td> </tr> <tr> <th>978</th> <td>8</td> <td>Timarni</td> <td>TBN</td> <td>130 Km/Hr</td> <td>2025-12-14 04:58:00</td> <td>2025-12-14 14:09:00</td> <td>02:09PM</td> <td>2025-12-14 05:00:00</td> <td>2025-12-14 14:10:00</td> <td>02:10PM</td> <td>PF: 1</td> <td>12162</td> <td>9H 10M Late</td> <td>9H 11M Late</td> <td>551.0</td> <td>550.0</td> </tr> <tr> <th>4572</th> <td>34</td> <td>Hazrat Nizamuddin</td> <td>NZM</td> <td>68 Km/Hr</td> <td>2025-12-14 05:00:00</td> <td>2025-12-14 14:11:00</td> <td>02:11PM</td> <td>NaT</td> <td>NaT</td> <td>Destination</td> <td>PF: 2</td> <td>12409</td> <td>NaN</td> <td>9H 11M Late</td> <td>551.0</td> <td>0.0</td> </tr> <tr> <th>23264</th> <td>19</td> <td>Purulia</td> <td>PRR</td> <td>55 Km/Hr</td> <td>2025-12-14 07:30:00</td> <td>2025-12-14 16:41:00</td> <td>04:41PM</td> <td>2025-12-14 07:32:00</td> <td>2025-12-14 16:45:00</td> <td>04:45PM</td> <td>PF: 3</td> <td>22844</td> <td>9H 13M Late</td> <td>9H 11M Late</td> <td>551.0</td> <td>553.0</td> </tr> <tr> <th>979</th> <td>9</td> <td>Harda</td> <td>HD</td> <td>83 Km/Hr</td> <td>2025-12-14 05:11:00</td> <td>2025-12-14 14:26:00</td> <td>02:26PM</td> <td>2025-12-14 05:13:00</td> <td>2025-12-14 14:28:00</td> <td>02:28PM</td> <td>PF: 3</td> <td>12162</td> <td>9H 15M Late</td> <td>9H 15M Late</td> <td>555.0</td> <td>555.0</td> </tr> <tr> <th>13083</th> <td>16</td> <td>Raj Gangpur</td> <td>GP</td> <td>40 Km/Hr</td> <td>2025-12-14 13:30:00</td> <td>2025-12-14 22:48:00</td> <td>10:48PM</td> <td>2025-12-14 13:32:00</td> <td>2025-12-14 22:51:00</td> <td>10:51PM</td> <td>PF: 1</td> <td>12871</td> <td>9H 19M Late</td> <td>9H 18M Late</td> <td>558.0</td> <td>559.0</td> </tr> <tr> <th>843</th> <td>6</td> <td>Purulia</td> <td>PRR</td> <td>55 Km/Hr</td> <td>2025-12-14 00:55:00</td> <td>2025-12-14 10:22:00</td> <td>10:22AM</td> <td>2025-12-14 01:00:00</td> <td>2025-12-14 10:25:00</td> <td>10:25AM</td> <td>PF: 3</td> <td>12152</td> <td>9H 25M Late</td> <td>9H 27M Late</td> <td>567.0</td> <td>565.0</td> </tr> <tr> <th>13084</th> <td>17</td> <td>Garpos</td> <td>GPH</td> <td>53 Km/Hr</td> <td>2025-12-14 13:56:00</td> <td>2025-12-14 23:24:00</td> <td>11:24PM</td> <td>2025-12-14 13:57:00</td> <td>2025-12-14 23:25:00</td> <td>11:25PM</td> <td>PF: 1</td> <td>12871</td> <td>9H 28M Late</td> <td>9H 28M Late</td> <td>568.0</td> <td>568.0</td> </tr> <tr> <th>980</th> <td>10</td> <td>Khandwa Junction</td> <td>KNW</td> <td>91 Km/Hr</td> <td>2025-12-14 06:43:00</td> <td>2025-12-14 16:20:00</td> <td>04:20PM</td> <td>2025-12-14 06:45:00</td> <td>2025-12-14 16:25:00</td> <td>04:25PM</td> <td>PF: 5</td> <td>12162</td> <td>9H 40M Late</td> <td>9H 37M Late</td> <td>577.0</td> <td>580.0</td> </tr> <tr> <th>981</th> <td>11</td> <td>Burhanpur</td> <td>BAU</td> <td>130 Km/Hr</td> <td>2025-12-14 07:38:00</td> <td>2025-12-14 17:16:00</td> <td>05:16PM</td> <td>2025-12-14 07:40:00</td> <td>2025-12-14 17:18:00</td> <td>05:18PM</td> <td>PF: 1</td> <td>12162</td> <td>9H 38M Late</td> <td>9H 38M Late</td> <td>578.0</td> <td>578.0</td> </tr> <tr> <th>13085</th> <td>18</td> <td>Bamra</td> <td>BMB</td> <td>109 Km/Hr</td> <td>2025-12-14 14:01:00</td> <td>2025-12-14 23:39:00</td> <td>11:39PM</td> <td>2025-12-14 14:02:00</td> <td>2025-12-14 23:41:00</td> <td>11:41PM</td> <td>PF: 1</td> <td>12871</td> <td>9H 39M Late</td> <td>9H 38M Late</td> <td>578.0</td> <td>579.0</td> </tr> <tr> <th>982</th> <td>12</td> <td>Bhusaval</td> <td>BSL</td> <td>115 Km/Hr</td> <td>2025-12-14 08:25:00</td> <td>2025-12-14 18:03:00</td> <td>06:03PM</td> <td>2025-12-14 08:30:00</td> <td>2025-12-14 08:30:00</td> <td>08:30AM</td> <td>PF: 4</td> <td>12162</td> <td>9H 38M Late</td> <td>9H 38M Late</td> <td>578.0</td> <td>0.0</td> </tr> <tr> <th>13086</th> <td>19</td> <td>Bagdihi</td> <td>BEH</td> <td>128 Km/Hr</td> <td>2025-12-14 14:13:00</td> <td>2025-12-14 23:53:00</td> <td>11:53PM</td> <td>2025-12-14 14:14:00</td> <td>2025-12-14 23:53:00</td> <td>11:53PM</td> <td>PF: 2</td> <td>12871</td> <td>9H 39M Late</td> <td>9H 40M Late</td> <td>580.0</td> <td>579.0</td> </tr> <tr> <th>844</th> <td>7</td> <td>Chakaradharpur</td> <td>CKP</td> <td>85 Km/Hr</td> <td>2025-12-14 02:55:00</td> <td>2025-12-14 12:37:00</td> <td>12:37PM</td> <td>2025-12-14 02:57:00</td> <td>2025-12-14 12:41:00</td> <td>12:41PM</td> <td>PF: 1</td> <td>12152</td> <td>9H 44M Late</td> <td>9H 42M Late</td> <td>582.0</td> <td>584.0</td> </tr> <tr> <th>23265</th> <td>20</td> <td>Tatanagar</td> <td>TATA</td> <td>53 Km/Hr</td> <td>2025-12-14 09:30:00</td> <td>2025-12-14 19:21:00</td> <td>07:21PM</td> <td>2025-12-14 09:55:00</td> <td>2025-12-14 09:55:00</td> <td>09:55AM</td> <td>PF: 2</td> <td>22844</td> <td>9H 51M Late</td> <td>9H 51M Late</td> <td>591.0</td> <td>0.0</td> </tr> <tr> <th>845</th> <td>8</td> <td>Rourkela</td> <td>ROU</td> <td>78 Km/Hr</td> <td>2025-12-14 04:20:00</td> <td>2025-12-14 14:42:00</td> <td>02:42PM</td> <td>2025-12-14 04:28:00</td> <td>2025-12-14 14:49:00</td> <td>02:49PM</td> <td>PF: 3</td> <td>12152</td> <td>10H 21M Late</td> <td>10H 22M Late</td> <td>622.0</td> <td>621.0</td> </tr> <tr> <th>846</th> <td>9</td> <td>Jharsuguda</td> <td>JSG</td> <td>71 Km/Hr</td> <td>2025-12-14 06:13:00</td> <td>2025-12-14 17:03:00</td> <td>05:03PM</td> <td>2025-12-14 06:15:00</td> <td>2025-12-14 17:08:00</td> <td>05:08PM</td> <td>PF: 1</td> <td>12152</td> <td>10H 53M Late</td> <td>10H 50M Late</td> <td>650.0</td> <td>653.0</td> </tr> </tbody> </table> </div> <p>Creating an delay dataset at station level. Ignoring small stations (Stations that have less than 10 train stops in a day) </p> <div class=highlight><pre><span></span><code><span class=n>delays</span> <span class=o>=</span> <span class=n>train_details</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;station_name&#39;</span><span class=p>,</span> <span class=s1>&#39;station_code&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>aggregate</span><span class=p>({</span>
    <span class=s1>&#39;arrival_delay&#39;</span><span class=p>:</span> <span class=s1>&#39;mean&#39;</span><span class=p>,</span>
    <span class=s1>&#39;departure_delay&#39;</span><span class=p>:</span> <span class=s1>&#39;mean&#39;</span><span class=p>,</span>
    <span class=s1>&#39;delay_status&#39;</span><span class=p>:</span> <span class=s1>&#39;count&#39;</span>
<span class=p>})</span><span class=o>.</span><span class=n>reset_index</span><span class=p>()</span>
<span class=n>delays</span> <span class=o>=</span> <span class=n>delays</span><span class=p>[</span><span class=n>delays</span><span class=o>.</span><span class=n>delay_status</span><span class=o>&gt;=</span><span class=mi>10</span><span class=p>]</span><span class=o>.</span><span class=n>reset_index</span><span class=p>(</span><span class=n>drop</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=n>delays</span><span class=o>.</span><span class=n>sort_values</span><span class=p>(</span><span class=s1>&#39;delay_status&#39;</span><span class=p>,</span> <span class=n>ascending</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class="dataframe table"> <thead> <tr style="text-align: right;"> <th></th> <th>station_name</th> <th>station_code</th> <th>arrival_delay</th> <th>departure_delay</th> <th>delay_status</th> </tr> </thead> <tbody> <tr> <th>556</th> <td>Vijayawada</td> <td>BZA</td> <td>6.866337</td> <td>7.564356</td> <td>187</td> </tr> <tr> <th>514</th> <td>Surat</td> <td>ST</td> <td>5.010204</td> <td>5.663265</td> <td>187</td> </tr> <tr> <th>94</th> <td>Bhusaval</td> <td>BSL</td> <td>13.020513</td> <td>11.815385</td> <td>185</td> </tr> <tr> <th>229</th> <td>Itarsi</td> <td>ET</td> <td>10.010471</td> <td>10.460733</td> <td>183</td> </tr> <tr> <th>550</th> <td>Vadodara</td> <td>BRC</td> <td>7.391753</td> <td>6.835052</td> <td>182</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>215</th> <td>Harpalpur</td> <td>HPP</td> <td>17.600000</td> <td>18.100000</td> <td>10</td> </tr> <tr> <th>220</th> <td>Hindaun City</td> <td>HAN</td> <td>37.400000</td> <td>37.100000</td> <td>10</td> </tr> <tr> <th>241</th> <td>Jamtara</td> <td>JMT</td> <td>59.900000</td> <td>60.000000</td> <td>10</td> </tr> <tr> <th>214</th> <td>Harihar</td> <td>HRR</td> <td>2.300000</td> <td>2.300000</td> <td>10</td> </tr> <tr> <th>40</th> <td>Aunrihar</td> <td>ARJ</td> <td>36.600000</td> <td>29.200000</td> <td>10</td> </tr> </tbody> </table> <p>577 rows × 5 columns</p> </div> <h2 id=geocoding-with-google-maps-api>Geocoding with Google Maps API<a class=headerlink href=#geocoding-with-google-maps-api title="Permanent link">&para;</a></h2> <p>To visualize delays geographically, we needed latitude and longitude for each station. The Google Geocoding API was used to convert station names into coordinates:<br> 1. Constructed queries like "Station Name (Code) Railway station, India" to improve accuracy.<br> 2. Applied region bias (region='in') to ensure results were relevant to India.<br> 3. Parsed JSON responses to extract lat and lng values. </p> <p>This step enabled mapping delays across India, providing spatial insights into where clusters of delays occur</p> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=nn>config</span>
<span class=kn>import</span><span class=w> </span><span class=nn>requests</span>

<span class=k>def</span><span class=w> </span><span class=nf>get_lat_lng</span><span class=p>(</span><span class=n>location</span><span class=p>,</span> <span class=n>gmaps_key</span><span class=o>=</span><span class=n>config</span><span class=o>.</span><span class=n>gmaps_key</span><span class=p>,</span> <span class=n>region_bias</span> <span class=o>=</span> <span class=s1>&#39;in&#39;</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Returns (lat, lng) for a given location using Google Geocoding API.</span>
<span class=sd>    Raises informative exceptions on common failure modes.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>url</span> <span class=o>=</span> <span class=s2>&quot;https://maps.googleapis.com/maps/api/geocode/json&quot;</span>
    <span class=n>params</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;address&quot;</span><span class=p>:</span> <span class=n>location</span><span class=p>,</span>
        <span class=s2>&quot;key&quot;</span><span class=p>:</span> <span class=n>gmaps_key</span><span class=p>,</span>
    <span class=p>}</span>
    <span class=c1># Optional: region bias (e.g., &quot;in&quot; for India) to improve relevance</span>
    <span class=k>if</span> <span class=n>region_bias</span><span class=p>:</span>
        <span class=n>params</span><span class=p>[</span><span class=s2>&quot;region&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>region_bias</span>

    <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>params</span><span class=o>=</span><span class=n>params</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=mi>15</span><span class=p>)</span>
    <span class=n>response</span><span class=o>.</span><span class=n>raise_for_status</span><span class=p>()</span>  <span class=c1># network/HTTP-level errors</span>

    <span class=n>payload</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>()</span>

    <span class=n>status</span> <span class=o>=</span> <span class=n>payload</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;status&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>status</span> <span class=o>!=</span> <span class=s2>&quot;OK&quot;</span><span class=p>:</span>
        <span class=c1># Common statuses: ZERO_RESULTS, OVER_QUERY_LIMIT, REQUEST_DENIED, INVALID_REQUEST</span>
        <span class=n>error_message</span> <span class=o>=</span> <span class=n>payload</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;error_message&quot;</span><span class=p>)</span>
        <span class=k>return</span> <span class=mi>0</span><span class=p>,</span><span class=mi>0</span>

    <span class=n>results</span> <span class=o>=</span> <span class=n>payload</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;results&quot;</span><span class=p>,</span> <span class=p>[])</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>results</span><span class=p>:</span>
        <span class=k>return</span> <span class=mi>0</span><span class=p>,</span><span class=mi>0</span>

    <span class=n>location_obj</span> <span class=o>=</span> <span class=n>results</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=s2>&quot;geometry&quot;</span><span class=p>][</span><span class=s2>&quot;location&quot;</span><span class=p>]</span>  <span class=c1># guaranteed when status == OK</span>
    <span class=n>lat</span> <span class=o>=</span> <span class=n>location_obj</span><span class=p>[</span><span class=s2>&quot;lat&quot;</span><span class=p>]</span>
    <span class=n>lng</span> <span class=o>=</span> <span class=n>location_obj</span><span class=p>[</span><span class=s2>&quot;lng&quot;</span><span class=p>]</span>
    <span class=k>return</span> <span class=n>lat</span><span class=p>,</span> <span class=n>lng</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=n>delays</span><span class=p>[</span><span class=s1>&#39;address&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>delays</span><span class=p>[</span><span class=s1>&#39;station_name&#39;</span><span class=p>]</span><span class=o>+</span><span class=s1>&#39; (&#39;</span><span class=o>+</span> <span class=n>delays</span><span class=o>.</span><span class=n>station_code</span> <span class=o>+</span> <span class=s1>&#39;) Railway station, India&#39;</span>
<span class=n>delays</span><span class=p>[[</span><span class=s1>&#39;lat&#39;</span><span class=p>,</span><span class=s1>&#39;long&#39;</span><span class=p>]]</span> <span class=o>=</span> <span class=n>delays</span><span class=p>[</span><span class=s1>&#39;address&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=k>lambda</span> <span class=n>addr</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>(</span><span class=n>get_lat_lng</span><span class=p>(</span><span class=n>addr</span><span class=p>),</span> <span class=n>index</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;lat&quot;</span><span class=p>,</span> <span class=s2>&quot;lng&quot;</span><span class=p>]))</span>
<span class=n>delays</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class="dataframe table"> <thead> <tr style="text-align: right;"> <th></th> <th>station_name</th> <th>station_code</th> <th>arrival_delay</th> <th>departure_delay</th> <th>delay_status</th> <th>address</th> <th>lat</th> <th>long</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>Abhaipur</td> <td>AHA</td> <td>5.785714</td> <td>5.857143</td> <td>13</td> <td>Abhaipur (AHA) Railway station, India</td> <td>25.215607</td> <td>86.322353</td> </tr> <tr> <th>1</th> <td>Abu Road</td> <td>ABR</td> <td>2.250000</td> <td>1.975000</td> <td>38</td> <td>Abu Road (ABR) Railway station, India</td> <td>24.480749</td> <td>72.785071</td> </tr> <tr> <th>2</th> <td>Achhnera</td> <td>AH</td> <td>33.800000</td> <td>34.200000</td> <td>17</td> <td>Achhnera (AH) Railway station, India</td> <td>27.177370</td> <td>77.753791</td> </tr> <tr> <th>3</th> <td>Adoni</td> <td>AD</td> <td>16.208333</td> <td>16.541667</td> <td>21</td> <td>Adoni (AD) Railway station, India</td> <td>15.631882</td> <td>77.275883</td> </tr> <tr> <th>4</th> <td>Adra</td> <td>ADRA</td> <td>33.920000</td> <td>28.640000</td> <td>24</td> <td>Adra (ADRA) Railway station, India</td> <td>23.496133</td> <td>86.676755</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>572</th> <td>Washim</td> <td>WHM</td> <td>0.687500</td> <td>0.875000</td> <td>14</td> <td>Washim (WHM) Railway station, India</td> <td>20.103064</td> <td>77.148166</td> </tr> <tr> <th>573</th> <td>Yadgir</td> <td>YG</td> <td>19.050000</td> <td>19.000000</td> <td>17</td> <td>Yadgir (YG) Railway station, India</td> <td>16.742595</td> <td>77.133291</td> </tr> <tr> <th>574</th> <td>Yelahanka</td> <td>YNK</td> <td>5.352941</td> <td>6.470588</td> <td>16</td> <td>Yelahanka (YNK) Railway station, India</td> <td>13.104980</td> <td>77.591798</td> </tr> <tr> <th>575</th> <td>Yerraguntla</td> <td>YA</td> <td>22.437500</td> <td>23.062500</td> <td>15</td> <td>Yerraguntla (YA) Railway station, India</td> <td>14.645948</td> <td>78.549873</td> </tr> <tr> <th>576</th> <td>Yesvantpur</td> <td>YPR</td> <td>1.421053</td> <td>2.605263</td> <td>28</td> <td>Yesvantpur (YPR) Railway station, India</td> <td>13.023212</td> <td>77.551373</td> </tr> </tbody> </table> <p>577 rows × 8 columns</p> </div> <div class=highlight><pre><span></span><code><span class=c1># Fixing mapping issues</span>
<span class=n>delays</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>delays</span><span class=o>.</span><span class=n>address</span> <span class=o>==</span> <span class=s1>&#39;Kareli (KY) Railway station, India&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;lat&#39;</span><span class=p>,</span> <span class=s1>&#39;long&#39;</span><span class=p>]]</span> <span class=o>=</span> <span class=p>[</span><span class=mf>22.931886</span><span class=p>,</span> <span class=mf>79.066079</span><span class=p>]</span>
</code></pre></div> <h2 id=clustering-with-dbscan>Clustering with DBSCAN<a class=headerlink href=#clustering-with-dbscan title="Permanent link">&para;</a></h2> <p>For clustering, we used DBSCAN (Density-Based Spatial Clustering of Applications with Noise) from scikit-learn. DBSCAN is ideal for this use case because:<br> 1. It identifies clusters of stations with similar delay patterns without requiring the number of clusters upfront.<br> 2. Handles noise effectively, marking outliers (stations with unique delay behavior) with a label of -1.<br> 3. Works well with spatial data when combined with delay metrics. </p> <p>To ensure fair clustering, we normalized arrival delays and station coordinates using MinMaxScaler before applying DBSCAN with:<br> 1. eps = 0.07 (distance threshold in normalized units)<br> 2. min_samples = 5 (minimum points to form a cluster) </p> <p>The result: stations grouped into clusters based on delay severity and geographic proximity, revealing hotspots of chronic delays.</p> <div class=highlight><pre><span></span><code><span class=kn>from</span><span class=w> </span><span class=nn>sklearn.cluster</span><span class=w> </span><span class=kn>import</span> <span class=n>DBSCAN</span>
<span class=kn>from</span><span class=w> </span><span class=nn>sklearn.preprocessing</span><span class=w> </span><span class=kn>import</span> <span class=n>MinMaxScaler</span>
<span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=n>scaler</span> <span class=o>=</span> <span class=n>MinMaxScaler</span><span class=p>()</span><span class=o>.</span><span class=n>set_output</span><span class=p>(</span><span class=n>transform</span><span class=o>=</span><span class=s2>&quot;pandas&quot;</span><span class=p>)</span>
<span class=n>X</span> <span class=o>=</span> <span class=n>scaler</span><span class=o>.</span><span class=n>fit_transform</span><span class=p>(</span><span class=n>delays</span><span class=p>[[</span><span class=s1>&#39;arrival_delay&#39;</span><span class=p>,</span> <span class=s1>&#39;lat&#39;</span><span class=p>,</span> <span class=s1>&#39;long&#39;</span><span class=p>]])</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=c1># 3) Run DBSCAN with a single eps in meters</span>
<span class=n>eps_meters</span> <span class=o>=</span> <span class=mf>0.07</span>
<span class=n>min_samples</span> <span class=o>=</span> <span class=mi>5</span>

<span class=n>db</span> <span class=o>=</span> <span class=n>DBSCAN</span><span class=p>(</span><span class=n>eps</span><span class=o>=</span><span class=n>eps_meters</span><span class=p>,</span> <span class=n>min_samples</span><span class=o>=</span><span class=n>min_samples</span><span class=p>,</span> <span class=n>metric</span><span class=o>=</span><span class=s1>&#39;euclidean&#39;</span><span class=p>)</span>
<span class=n>delays</span><span class=p>[</span><span class=s1>&#39;labels&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>fit_predict</span><span class=p>(</span><span class=n>X</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=n>delays</span><span class=p>[</span><span class=s1>&#39;labels&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>unique</span><span class=p>()</span>
</code></pre></div> <div class=highlight><pre><span></span><code>array([ 0,  1, -1,  2,  3])
</code></pre></div> <div class=highlight><pre><span></span><code><span class=c1># Details of each cluster</span>
<span class=n>delays</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;labels&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>aggregate</span><span class=p>({</span>
    <span class=s1>&#39;arrival_delay&#39;</span><span class=p>:[</span><span class=s1>&#39;min&#39;</span><span class=p>,</span> <span class=s1>&#39;max&#39;</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>mean</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>std</span><span class=p>],</span>
    <span class=s1>&#39;departure_delay&#39;</span><span class=p>:[</span><span class=s1>&#39;min&#39;</span><span class=p>,</span> <span class=s1>&#39;max&#39;</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>mean</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>std</span><span class=p>]</span>
<span class=p>})</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style> <table border=1 class="dataframe table"> <thead> <tr> <th></th> <th colspan=4 halign=left>arrival_delay</th> <th colspan=4 halign=left>departure_delay</th> </tr> <tr> <th></th> <th>min</th> <th>max</th> <th>mean</th> <th>std</th> <th>min</th> <th>max</th> <th>mean</th> <th>std</th> </tr> <tr> <th>labels</th> <th></th> <th></th> <th></th> <th></th> <th></th> <th></th> <th></th> <th></th> </tr> </thead> <tbody> <tr> <th>-1</th> <td>0.000000</td> <td>113.750000</td> <td>34.124167</td> <td>23.680011</td> <td>0.071429</td> <td>113.833333</td> <td>33.884537</td> <td>24.351357</td> </tr> <tr> <th>0</th> <td>1.470588</td> <td>8.000000</td> <td>4.306110</td> <td>2.471251</td> <td>1.500000</td> <td>8.368421</td> <td>4.545647</td> <td>2.490323</td> </tr> <tr> <th>1</th> <td>0.000000</td> <td>50.615385</td> <td>13.112440</td> <td>9.528010</td> <td>0.000000</td> <td>50.615385</td> <td>13.106862</td> <td>9.426237</td> </tr> <tr> <th>2</th> <td>26.833333</td> <td>35.368421</td> <td>30.642969</td> <td>2.950345</td> <td>26.367647</td> <td>35.894737</td> <td>29.186663</td> <td>3.379501</td> </tr> <tr> <th>3</th> <td>30.615385</td> <td>44.200000</td> <td>38.826864</td> <td>4.979863</td> <td>31.000000</td> <td>45.500000</td> <td>39.613117</td> <td>5.290575</td> </tr> </tbody> </table> </div> <h2 id=cluster-analysis>Cluster Analysis<a class=headerlink href=#cluster-analysis title="Permanent link">&para;</a></h2> <h3 id=cluster-1-noise-colorblack>Cluster -1 (Noise, color:black)<a class=headerlink href=#cluster-1-noise-colorblack title="Permanent link">&para;</a></h3> <ul> <li>Arrival Delay: Mean ≈ 34.12 min, max up to 113.75 min </li> <li>Departure Delay: Mean ≈ 33.88 min, max up to 113.83 min </li> <li>Interpretation: These are extreme cases or irregular stations with very high delays. DBSCAN marks them as outliers because they don’t fit the density pattern of other clusters. </li> </ul> <h3 id=cluster-0-minimal-delays-color-green-mostly-near-patna>Cluster 0 (Minimal Delays, color: green, mostly near Patna)<a class=headerlink href=#cluster-0-minimal-delays-color-green-mostly-near-patna title="Permanent link">&para;</a></h3> <ul> <li>Arrival Delay: Mean ≈ 4.31 min, max ≈ 8 min </li> <li>Departure Delay: Mean ≈ 4.54 min </li> <li>Interpretation: Stations in this cluster are highly efficient with almost negligible delays. Likely major hubs or well-managed routes.</li> </ul> <h3 id=cluster-1-moderate-delays-color-blue-most-of-india>Cluster 1 (Moderate Delays, color: blue, most of India)<a class=headerlink href=#cluster-1-moderate-delays-color-blue-most-of-india title="Permanent link">&para;</a></h3> <ul> <li>Arrival Delay: Mean ≈ 13.11 min, max ≈ 50.61 min </li> <li>Departure Delay: Mean ≈ 13.10 min </li> <li>Interpretation: These stations experience moderate delays, possibly due to congestion or operational constraints. </li> </ul> <h3 id=cluster-2-high-delays-color-yellow-bilaspur-raigarh-stretch>Cluster 2 (High Delays, color: Yellow, Bilaspur-Raigarh stretch)<a class=headerlink href=#cluster-2-high-delays-color-yellow-bilaspur-raigarh-stretch title="Permanent link">&para;</a></h3> <ul> <li>Arrival Delay: Mean ≈ 30.64 min, max ≈ 35.36 min </li> <li>Departure Delay: Mean ≈ 29.18 min </li> <li>Interpretation: Stations consistently facing high delays. These could be bottlenecks in the network or areas with infrastructure limitations. </li> </ul> <h3 id=cluster-3-severe-delays-color-red-ongole-khammam-nalgonda-stretch>Cluster 3 (Severe Delays, color: red, Ongole-Khammam-Nalgonda stretch)<a class=headerlink href=#cluster-3-severe-delays-color-red-ongole-khammam-nalgonda-stretch title="Permanent link">&para;</a></h3> <ul> <li>Arrival Delay: Mean ≈ 38.82 min, max ≈ 44.20 min </li> <li>Departure Delay: Mean ≈ 39.61 min </li> <li>Interpretation: Chronic delay hotspots. Likely major junctions with heavy traffic or systemic scheduling issues. </li> </ul> <h3 id=key-insights>Key Insights<a class=headerlink href=#key-insights title="Permanent link">&para;</a></h3> <ol> <li>Cluster 0 represents the best-performing stations. </li> <li>Clusters 2 and 3 highlight critical problem areas needing immediate attention. </li> <li>Noise (-1) includes extreme anomalies—these might require separate investigation. </li> </ol> <h2 id=visualizing-the-results>Visualizing the Results<a class=headerlink href=#visualizing-the-results title="Permanent link">&para;</a></h2> <p>Using GeoPandas and Matplotlib, we plotted:<br> 1. Clusters on an India map with color-coded labels.<br> 2. Delay intensity using a heatmap-style scatter plot. </p> <p>These visualizations make it easy to identify regions where delays are concentrated, such as major junctions or congested routes. </p> <div class=highlight><pre><span></span><code><span class=c1># Set the default colors</span>
<span class=n>my_colors_list</span> <span class=o>=</span> <span class=p>{</span><span class=o>-</span><span class=mi>1</span><span class=p>:</span> <span class=s1>&#39;black&#39;</span><span class=p>,</span> <span class=mi>0</span><span class=p>:</span> <span class=s1>&#39;green&#39;</span><span class=p>,</span> <span class=mi>1</span><span class=p>:</span> <span class=s1>&#39;blue&#39;</span><span class=p>,</span> <span class=mi>2</span><span class=p>:</span> <span class=s1>&#39;orange&#39;</span><span class=p>,</span> <span class=mi>3</span><span class=p>:</span> <span class=s1>&#39;red&#39;</span><span class=p>}</span>
<span class=n>delays</span><span class=p>[</span><span class=s1>&#39;label_colors&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>delays</span><span class=o>.</span><span class=n>labels</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>my_colors_list</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=nn>geopandas</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>gpd</span>
<span class=kn>import</span><span class=w> </span><span class=nn>matplotlib.pyplot</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>plt</span>
<span class=kn>from</span><span class=w> </span><span class=nn>matplotlib.lines</span><span class=w> </span><span class=kn>import</span> <span class=n>Line2D</span>

<span class=c1># Has India map with state boundaries</span>
<span class=n>map_gdf</span> <span class=o>=</span> <span class=n>gpd</span><span class=o>.</span><span class=n>read_file</span><span class=p>(</span><span class=s1>&#39;https://gist.githubusercontent.com/jbrobst/56c13bbbf9d97d187fea01ca62ea5112/raw/e388c4cae20aa53cb5090210a42ebb9b765c0a36/india_states.geojson&#39;</span><span class=p>)</span>

<span class=n>fig</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>))</span>
<span class=n>map_gdf</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>ax</span><span class=o>=</span><span class=n>ax</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;white&#39;</span><span class=p>,</span> <span class=n>edgecolor</span><span class=o>=</span><span class=s1>&#39;lightgrey&#39;</span><span class=p>)</span>
<span class=n>delays</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>x</span><span class=o>=</span><span class=s1>&#39;long&#39;</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=s1>&#39;lat&#39;</span><span class=p>,</span> <span class=n>c</span> <span class=o>=</span> <span class=s1>&#39;label_colors&#39;</span><span class=p>,</span> <span class=n>kind</span><span class=o>=</span><span class=s1>&#39;scatter&#39;</span><span class=p>,</span> <span class=n>alpha</span><span class=o>=</span><span class=mf>0.75</span><span class=p>,</span> <span class=n>ax</span><span class=o>=</span><span class=n>ax</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s2>&quot;Clusters of train stations based on delays on 13/14-12-2025&quot;</span><span class=p>)</span>

<span class=c1># Add legends</span>
<span class=n>legend_spec</span> <span class=o>=</span> <span class=p>[</span>
    <span class=p>(</span><span class=s2>&quot;black&quot;</span><span class=p>,</span>  <span class=s2>&quot;Outliers&quot;</span><span class=p>),</span>
    <span class=p>(</span><span class=s2>&quot;green&quot;</span><span class=p>,</span>  <span class=s2>&quot;No delays&quot;</span><span class=p>),</span>
    <span class=p>(</span><span class=s2>&quot;blue&quot;</span><span class=p>,</span>   <span class=s2>&quot;Average delays&quot;</span><span class=p>),</span>
    <span class=p>(</span><span class=s2>&quot;orange&quot;</span><span class=p>,</span> <span class=s2>&quot;High delays&quot;</span><span class=p>),</span>
    <span class=p>(</span><span class=s2>&quot;red&quot;</span><span class=p>,</span>    <span class=s2>&quot;Severe delays&quot;</span><span class=p>),</span>
<span class=p>]</span>

<span class=c1># Build legend handles</span>
<span class=n>handles</span> <span class=o>=</span> <span class=p>[</span><span class=n>Line2D</span><span class=p>([</span><span class=mi>0</span><span class=p>],</span> <span class=p>[</span><span class=mi>0</span><span class=p>],</span><span class=n>marker</span><span class=o>=</span><span class=s1>&#39;o&#39;</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;w&#39;</span><span class=p>,</span> <span class=n>label</span><span class=o>=</span><span class=n>label</span><span class=p>,</span> <span class=n>markerfacecolor</span><span class=o>=</span><span class=n>color</span><span class=p>,</span> <span class=n>markersize</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span> <span class=k>for</span> <span class=n>color</span><span class=p>,</span> <span class=n>label</span> <span class=ow>in</span> <span class=n>legend_spec</span><span class=p>]</span>
<span class=n>ax</span><span class=o>.</span><span class=n>legend</span><span class=p>(</span><span class=n>handles</span><span class=o>=</span><span class=n>handles</span><span class=p>,</span> <span class=n>title</span><span class=o>=</span><span class=s2>&quot;Cluster meaning&quot;</span><span class=p>,</span> <span class=n>loc</span><span class=o>=</span><span class=s2>&quot;upper right&quot;</span><span class=p>,</span> <span class=n>frameon</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>();</span>
</code></pre></div> <p><img alt=png src=output_28_0.png></p> <div class=highlight><pre><span></span><code><span class=n>fig</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>))</span>
<span class=n>map_gdf</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>ax</span><span class=o>=</span><span class=n>ax</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;white&#39;</span><span class=p>,</span> <span class=n>edgecolor</span><span class=o>=</span><span class=s1>&#39;lightgrey&#39;</span><span class=p>)</span>
<span class=n>delays</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>x</span><span class=o>=</span><span class=s1>&#39;long&#39;</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=s1>&#39;lat&#39;</span><span class=p>,</span> <span class=n>s</span> <span class=o>=</span> <span class=s1>&#39;delay_status&#39;</span><span class=p>,</span> <span class=n>c</span> <span class=o>=</span> <span class=s1>&#39;arrival_delay&#39;</span><span class=p>,</span> <span class=n>colormap</span><span class=o>=</span><span class=s1>&#39;Reds&#39;</span><span class=p>,</span> <span class=n>kind</span><span class=o>=</span><span class=s1>&#39;scatter&#39;</span><span class=p>,</span> <span class=n>ax</span><span class=o>=</span><span class=n>ax</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s2>&quot;Average delays on on 13/14-12-2025&quot;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_29_0.png></p> <h2 id=key-insights_1>Key Insights<a class=headerlink href=#key-insights_1 title="Permanent link">&para;</a></h2> <ol> <li>Stations like Khammam and Raighar had high delays counts. </li> <li>Clusters often formed around busy corridors, indicating systemic congestion. </li> <li>Outliers represented stations with unusually high delays, possibly due to local operational issues. </li> </ol> <p>This blog demonstrates how clustering techniques like DBSCAN can uncover delay hotspots and operational bottlenecks in India’s railway network. To make this approach more impactful, we could extend the analysis across longer timeframes and incorporate additional factors such as weather, seasonal demand, and maintenance schedules. These enhancements will enable predictive modeling for proactive scheduling and resource allocation. Operationally, Indian Railways can leverage these insights to prioritize infrastructure upgrades in chronic delay clusters, implement dynamic timetabling, and improve passenger communication for better reliability and customer experience. </p> <p>(Blog text improved using Gen AI) </p> <h2 id=references>References<a class=headerlink href=#references title="Permanent link">&para;</a></h2> <ol> <li><a href=https://etrain.info/list/SF-TRAINS>List of superfast trains</a> </li> <li><a href=https://runningstatus.in/ >Data for web scraping</a> </li> <li><a href=https://www.sciencedirect.com/science/article/abs/pii/S0360835225004917>Modeling train delays : A study of Indian Railways</a> </li> <li><a href=https://www.arxiv.org/pdf/2510.01262>RSTGCN: Railway-centric Spatio-Temporal Graph Convolutional Network for Train Delay Prediction</a></li> </ol> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../R/kMeansClustering/ class="md-footer__link md-footer__link--prev" aria-label="Previous: K-Means Clustering" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> K-Means Clustering </div> </div> </a> <a href=../../R/CustomerLifetimeValue/ class="md-footer__link md-footer__link--next" aria-label="Next: Customer Lifetime Value" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Customer Lifetime Value </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> <img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by/4.0/88x31.png> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-contact style="text-align: center; margin: 1rem 0;"> <a href=../../contact title="Contact Me" style="display: inline-flex; align-items: center; gap: 0.5rem; color: rgba(255, 255, 255, 0.7); text-decoration: none;"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24" style="width: 1.2rem; height: 1.2rem; fill: rgba(255, 255, 255, 0.7);"> <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/> </svg> <span>Contact Me</span> </a> </div> <div class=md-footer-social> <a href=https://github.com/HarshaAsh target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://www.linkedin.com/in/sri-harsha-achyuthuni/ target=_blank rel=noopener title=www.linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://www.instagram.com/harshaash_com/ target=_blank rel=noopener title=www.instagram.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg> </a> <a href=https://www.facebook.com/sri.harsha.achyuthuni/ target=_blank rel=noopener title=www.facebook.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.tabs.link", "header.autohide", "navigation.sections", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../../assets/javascripts/workers/search.709b4209.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.56838a2c.min.js></script> </body> </html>