<!doctype html><html lang=en class=no-js> <head><!-- Code from google optimiser --><script src="https://www.googleoptimize.com/optimize.js?id=OPT-M98W6LW"></script><!-- Code from Mouseflow --><script type=text/javascript>
      window._mfq = window._mfq || [];
      (function() {
        var mf = document.createElement("script");
        mf.type = "text/javascript"; mf.defer = true;
        mf.src = "//cdn.mouseflow.com/projects/7b4494c9-7974-49f0-9777-d14450db37e6.js";
        document.getElementsByTagName("head")[0].appendChild(mf);
      })();
    </script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Harsha's notes on data science"><meta name=author content="Harsha Achyuthuni"><link href=https://www.harshaash.com/Python/Machine%20Learning%20Part%201/ rel=canonical><link rel=icon href=../../assets/images/logo.jpg><meta name=generator content="mkdocs-1.5.0, mkdocs-material-7.2.4"><title>Feature engineering (Python) - Data Science with Harsha</title><link rel=stylesheet href=../../assets/stylesheets/main.f7f47774.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.3f5d1f46.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=../../overrides/assets/stylesheets/user_defined.css><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-65034507-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-scheme data-md-color-primary data-md-color-accent> <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#feature-engineering-for-machine-learning class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Data Science with Harsha" class="md-header__button md-logo" aria-label="Data Science with Harsha" data-md-component=logo> <img src=../../assets/images/logo.jpg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Data Science with Harsha </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Feature engineering (Python) </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme data-md-color-primary data-md-color-accent aria-hidden=true type=radio name=__palette id=__palette_1> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme data-md-color-primary data-md-color-accent aria-hidden=true type=radio name=__palette id=__palette_3> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_4> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_3 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Data Science with Harsha" class="md-nav__button md-logo" aria-label="Data Science with Harsha" data-md-component=logo> <img src=../../assets/images/logo.jpg alt=logo> </a> Data Science with Harsha </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../../resume/ class=md-nav__link> Resume </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> Blog <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Blog data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_1 type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1> Visualization <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Visualization data-md-level=2> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Visualization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Vizualisation%20using%20python%20Part%201/ class=md-nav__link> Vizualizing tabular data (Python) </a> </li> <li class=md-nav__item> <a href=../Visualization%20for%20predictive%20analytics/ class=md-nav__link> Vizualising for predictive analytics (Python) </a> </li> <li class=md-nav__item> <a href=../../R/Univariate-analysis/ class=md-nav__link> Univariate Analysis (R) </a> </li> <li class=md-nav__item> <a href=../../R/multivariateAnalysis/ class=md-nav__link> Multivariate Analysis (R) </a> </li> <li class=md-nav__item> <a href=../../R/multicollinearity/ class=md-nav__link> Multicollinearity (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2> Statistics basics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Statistics basics" data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Statistics basics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/Probability/ class=md-nav__link> Probability (R) </a> </li> <li class=md-nav__item> <a href=../../R/vectors/ class=md-nav__link> Vectors (R) </a> </li> <li class=md-nav__item> <a href=../../R/matrices/ class=md-nav__link> Matrices (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3> Hypothesis Testing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Hypothesis Testing" data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Hypothesis Testing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/attendance_t_test/ class=md-nav__link> z-test and t-test (R) </a> </li> <li class=md-nav__item> <a href=../../R/anova/ class=md-nav__link> ANOVA Test (R) </a> </li> <li class=md-nav__item> <a href=../../R/chi-sq-goodness-of-fit/ class=md-nav__link> Chi-Square Goodness of fit (R) </a> </li> <li class=md-nav__item> <a href=../../R/chi-sq-test-of-independence/ class=md-nav__link> Chi-Square test of independence (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4> Factor Analysis <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Factor Analysis" data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Factor Analysis </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/Curse-of-Dimensionality/ class=md-nav__link> Curse of dimensionality </a> </li> <li class=md-nav__item> <a href=../../R/EFA/ class=md-nav__link> Exploratory factor analysis (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_5 type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5> Prediction algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Prediction algorithms" data-md-level=2> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Prediction algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_5_1 type=checkbox id=__nav_3_5_1> <label class=md-nav__link for=__nav_3_5_1> Classification Algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Classification Algorithms" data-md-level=3> <label class=md-nav__title for=__nav_3_5_1> <span class="md-nav__icon md-icon"></span> Classification Algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/logistic-regression/ class=md-nav__link> Logistic Regression (R) </a> </li> <li class=md-nav__item> <a href=../../R/CHAID/ class=md-nav__link> CHAID Decision Trees (R) </a> </li> <li class=md-nav__item> <a href=../../R/CART-Classification/ class=md-nav__link> CART Classification (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_5_2 type=checkbox id=__nav_3_5_2> <label class=md-nav__link for=__nav_3_5_2> Regression Algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Regression Algorithms" data-md-level=3> <label class=md-nav__title for=__nav_3_5_2> <span class="md-nav__icon md-icon"></span> Regression Algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/part-and-partial-corr/ class=md-nav__link> Part and partial correlation </a> </li> <li class=md-nav__item> <a href=../../R/Linear-regression/ class=md-nav__link> Linear Regression (R) </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_6 type=checkbox id=__nav_3_6 checked> <label class=md-nav__link for=__nav_3_6> Preprocessing data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Preprocessing data" data-md-level=2> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Preprocessing data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/KNN_Imputation/ class=md-nav__link> Null Value Imputation (R) </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Feature engineering (Python) <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Feature engineering (Python) </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#predicting-absenteeism class=md-nav__link> Predicting absenteeism </a> </li> <li class=md-nav__item> <a href=#employee-absenteeism-dataset class=md-nav__link> Employee absenteeism dataset </a> </li> <li class=md-nav__item> <a href=#employee-details class=md-nav__link> Employee details </a> </li> <li class=md-nav__item> <a href=#votes class=md-nav__link> Votes </a> <nav class=md-nav aria-label=Votes> <ul class=md-nav__list> <li class=md-nav__item> <a href=#eda class=md-nav__link> EDA </a> </li> <li class=md-nav__item> <a href=#feature-engineering class=md-nav__link> Feature engineering </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#feedback-dataset class=md-nav__link> Feedback dataset </a> <nav class=md-nav aria-label="Feedback dataset"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#eda_1 class=md-nav__link> EDA </a> </li> <li class=md-nav__item> <a href=#feature-engineering_1 class=md-nav__link> Feature engineering </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#merging-all-the-datasets class=md-nav__link> Merging all the datasets </a> </li> <li class=md-nav__item> <a href=#date-as-a-predictor-variable class=md-nav__link> Date as a predictor variable </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> References </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../R/Handling-Imbalanced-classes/ class=md-nav__link> Handling Imbalanced Classes </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_7 type=checkbox id=__nav_3_7> <label class=md-nav__link for=__nav_3_7> Machine Learning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Machine Learning" data-md-level=2> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Machine Learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://harshaachyuthuni.shinyapps.io/Machine_Learning/ class=md-nav__link> Interactive Machine Learning (RShiny) </a> </li> <li class=md-nav__item> <a href=../ML%20using%20scikit-learn/ class=md-nav__link> ML using scikit-learn (Python) </a> </li> <li class=md-nav__item> <a href=../Demonstrating%20online%20learning/ class=md-nav__link> Streaming Machine Learning (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_8 type=checkbox id=__nav_3_8> <label class=md-nav__link for=__nav_3_8> Time Series forecasting <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Time Series forecasting" data-md-level=2> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Time Series forecasting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/time-series/ class=md-nav__link> Introduction to stationarity (R) </a> </li> <li class=md-nav__item> <a href=../../R/Stationarity-tests/ class=md-nav__link> Stationary Tests (R) </a> </li> <li class=md-nav__item> <a href=../../R/ARIMA/ class=md-nav__link> ARIMA in R </a> </li> <li class=md-nav__item> <a href=../ARIMA%20Forecasting/ class=md-nav__link> ARIMA in Python </a> </li> <li class=md-nav__item> <a href=../../R/Seasonal-Time-Series/ class=md-nav__link> Seasonal time series (R) </a> </li> <li class=md-nav__item> <a href=../../R/VAR-models/ class=md-nav__link> VAR Models (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_9 type=checkbox id=__nav_3_9> <label class=md-nav__link for=__nav_3_9> Deep learning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Deep learning" data-md-level=2> <label class=md-nav__title for=__nav_3_9> <span class="md-nav__icon md-icon"></span> Deep learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/ANN-1/ class=md-nav__link> Artificial Neural Network (Theory) </a> </li> <li class=md-nav__item> <a href=../../R/ANN2/ class=md-nav__link> The math behind ANN </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_10 type=checkbox id=__nav_3_10> <label class=md-nav__link for=__nav_3_10> Prescriptive Analytics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Prescriptive Analytics" data-md-level=2> <label class=md-nav__title for=__nav_3_10> <span class="md-nav__icon md-icon"></span> Prescriptive Analytics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/Linear-programming/ class=md-nav__link> Linear Programming (R) </a> </li> <li class=md-nav__item> <a href=../../R/adoption_of_new_product/ class=md-nav__link> Adoption of new product (R) </a> </li> <li class=md-nav__item> <a href=../Diffusion%20on%20networks/ class=md-nav__link> Bass Forecasting model (Python) </a> </li> <li class=md-nav__item> <a href=../../Others/AHP/ class=md-nav__link> Analytic Hierarchy Process </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_11 type=checkbox id=__nav_3_11> <label class=md-nav__link for=__nav_3_11> Clustering <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Clustering data-md-level=2> <label class=md-nav__title for=__nav_3_11> <span class="md-nav__icon md-icon"></span> Clustering </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/hierarchical_clustering/ class=md-nav__link> Hierarchical Clustering </a> </li> <li class=md-nav__item> <a href=../../R/kMeansClustering/ class=md-nav__link> K-Means Clustering </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_12 type=checkbox id=__nav_3_12> <label class=md-nav__link for=__nav_3_12> Reinforcement Learning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Reinforcement Learning" data-md-level=2> <label class=md-nav__title for=__nav_3_12> <span class="md-nav__icon md-icon"></span> Reinforcement Learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/CustomerLifetimeValue/ class=md-nav__link> Customer Lifetime Value </a> </li> <li class=md-nav__item> <a href=../../R/recommendation-systems/ class=md-nav__link> Recommendation Systems (R) </a> </li> <li class=md-nav__item> <a href=../Neural_collaborative_filtering/ class=md-nav__link> Collaborative Filtering (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_13 type=checkbox id=__nav_3_13> <label class=md-nav__link for=__nav_3_13> Networks <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Networks data-md-level=2> <label class=md-nav__title for=__nav_3_13> <span class="md-nav__icon md-icon"></span> Networks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Introduction%20to%20Networkx/ class=md-nav__link> Introduction to NetworkX (Python) </a> </li> <li class=md-nav__item> <a href=../Network%20Science/ class=md-nav__link> Network Science (Python) </a> </li> <li class=md-nav__item> <a href=../Network%20centrality/ class=md-nav__link> Network Centrality (Python) </a> </li> <li class=md-nav__item> <a href=../Shortest%20path%20problems/ class=md-nav__link> Shortest path using integer programming (Python) </a> </li> <li class=md-nav__item> <a href=../Network%20Flow%20problems/ class=md-nav__link> Network flow problems (Python) </a> </li> <li class=md-nav__item> <a href=../Community%20detection/ class=md-nav__link> Community detection (Python) </a> </li> <li class=md-nav__item> <a href=../Bipartite%20matching/ class=md-nav__link> Bipartite matching (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_14 type=checkbox id=__nav_3_14> <label class=md-nav__link for=__nav_3_14> Deployment <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Deployment data-md-level=2> <label class=md-nav__title for=__nav_3_14> <span class="md-nav__icon md-icon"></span> Deployment </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Machine%20learning%20as%20HTTP%20Request/ class=md-nav__link> ML deployment in Flask (Python) </a> </li> <li class=md-nav__item> <a href=../Saving%20predictions%20in%20database/ class=md-nav__link> Handling databases using python </a> </li> <li class=md-nav__item> <a href=../ORM/ class=md-nav__link> ORM (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_15 type=checkbox id=__nav_3_15> <label class=md-nav__link for=__nav_3_15> Higher education review <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Higher education review" data-md-level=2> <label class=md-nav__title for=__nav_3_15> <span class="md-nav__icon md-icon"></span> Higher education review </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/IIMB%20BAI/ class=md-nav__link> IIMB BAI </a> </li> <li class=md-nav__item> <a href=../../Others/part%20time%20data%20science%20masters/ class=md-nav__link> Part-time DS masters </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_16 type=checkbox id=__nav_3_16> <label class=md-nav__link for=__nav_3_16> External blogs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="External blogs" data-md-level=2> <label class=md-nav__title for=__nav_3_16> <span class="md-nav__icon md-icon"></span> External blogs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/Imperial%20College%20London/ class=md-nav__link> Imperial college London </a> </li> <li class=md-nav__item> <a href=../../Others/Rolls%20Royce/ class=md-nav__link> Rolls Royce </a> </li> <li class=md-nav__item> <a href=../../Others/Publications/ class=md-nav__link> Publications/conferences </a> </li> <li class=md-nav__item> <a href=../../Others/Deployed%20apps/ class=md-nav__link> Deployed apps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_17 type=checkbox id=__nav_3_17> <label class=md-nav__link for=__nav_3_17> Projects <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Projects data-md-level=2> <label class=md-nav__title for=__nav_3_17> <span class="md-nav__icon md-icon"></span> Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/Scarecrow/ class=md-nav__link> Scarecrow </a> </li> <li class=md-nav__item> <a href=../../Others/preventive_maintainence/ class=md-nav__link> Preventive maintainence </a> </li> <li class=md-nav__item> <a href=../../Others/bid%20allocation%20model/ class=md-nav__link> Bid Allocation </a> </li> <li class=md-nav__item> <a href=../../Others/IIMB%20project/ class=md-nav__link> Reward and Recognition contests </a> </li> <li class=md-nav__item> <a href=../../Others/supply%20chain%20analytics/ class=md-nav__link> Supply chain analytics </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#predicting-absenteeism class=md-nav__link> Predicting absenteeism </a> </li> <li class=md-nav__item> <a href=#employee-absenteeism-dataset class=md-nav__link> Employee absenteeism dataset </a> </li> <li class=md-nav__item> <a href=#employee-details class=md-nav__link> Employee details </a> </li> <li class=md-nav__item> <a href=#votes class=md-nav__link> Votes </a> <nav class=md-nav aria-label=Votes> <ul class=md-nav__list> <li class=md-nav__item> <a href=#eda class=md-nav__link> EDA </a> </li> <li class=md-nav__item> <a href=#feature-engineering class=md-nav__link> Feature engineering </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#feedback-dataset class=md-nav__link> Feedback dataset </a> <nav class=md-nav aria-label="Feedback dataset"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#eda_1 class=md-nav__link> EDA </a> </li> <li class=md-nav__item> <a href=#feature-engineering_1 class=md-nav__link> Feature engineering </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#merging-all-the-datasets class=md-nav__link> Merging all the datasets </a> </li> <li class=md-nav__item> <a href=#date-as-a-predictor-variable class=md-nav__link> Date as a predictor variable </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> References </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=feature-engineering-for-machine-learning>Feature engineering for Machine Learning<a class=headerlink href=#feature-engineering-for-machine-learning title="Permanent link">&para;</a></h1> <h2 id=predicting-absenteeism>Predicting absenteeism<a class=headerlink href=#predicting-absenteeism title="Permanent link">&para;</a></h2> <p>A large problem within organisations is how to motivate their employees. In this blog, we will use <a href=https://www.kaggle.com/harriken/predict-employee-ausentism>HappyForce</a> in order to predict employment absenteeism. The goal is to identify who are likely to be absent in the near future, and find the reasons for absenteeism. </p> <p>This blog is the first part and contains Feature engineering and EDA for machine learning. <a href=../ML%20using%20scikit-learn/ >Part 2</a> contains the machine learning part where we build models and compare the results. This blog shows various ways in which feature engineering can be carried out on time series datasets. </p> <p>We focused on data from 408 employees of one company in Spain; 62 have record of absence. The below chart summarizes the main reasons for leave; in our case, common sickness / non job-related accidents are the main reasons. Given we are to analyse employee absence as it relates to motivation, it is feasible to assume a portion of these employees simply call in sick as they lack motivation or commitment to their workplace. </p> <h2 id=employee-absenteeism-dataset>Employee absenteeism dataset<a class=headerlink href=#employee-absenteeism-dataset title="Permanent link">&para;</a></h2> <p>The datasets contains 7 files, first let us look at the <strong>employeeAbsenteeism</strong> dataset</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
<span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
<span class=kn>import</span> <span class=nn>seaborn</span> <span class=k>as</span> <span class=nn>sns</span>
<span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
<span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>date</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s1>&#39;employeeAbsenteeism.csv&#39;</span><span class=p>)</span>
<span class=n>df</span><span class=o>.</span><span class=n>to</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>to_datetime</span><span class=p>(</span><span class=n>df</span><span class=o>.</span><span class=n>to</span><span class=p>)</span> <span class=c1># converts string to type datetime</span>
<span class=n>df</span><span class=p>[</span><span class=s1>&#39;from&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>to_datetime</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;from&#39;</span><span class=p>])</span>
<span class=n>df</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>employee</th> <th>companyAlias</th> <th>from</th> <th>to</th> <th>reason</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>19Q</td> <td>C1</td> <td>2018-10-01 00:10:00</td> <td>2018-10-26 00:10:00</td> <td>Workplace accident</td> </tr> <tr> <th>1</th> <td>NY3</td> <td>C1</td> <td>2018-10-01 00:10:00</td> <td>2018-10-31 00:10:00</td> <td>Common sickness or accident not related to th...</td> </tr> <tr> <th>2</th> <td>qKO</td> <td>C1</td> <td>2018-10-01 00:10:00</td> <td>2018-10-05 00:10:00</td> <td>Common sickness or accident not related to th...</td> </tr> <tr> <th>3</th> <td>qKO</td> <td>C1</td> <td>2018-10-10 00:10:00</td> <td>2018-10-31 00:10:00</td> <td>Common sickness or accident not related to th...</td> </tr> <tr> <th>4</th> <td>2wx</td> <td>C1</td> <td>2018-10-01 00:10:00</td> <td>2018-10-31 00:10:00</td> <td>Common sickness or accident not related to th...</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>101</th> <td>JD1</td> <td>C1</td> <td>2018-06-19 00:06:00</td> <td>2018-06-22 00:06:00</td> <td>Common sickness or accident not related to th...</td> </tr> <tr> <th>102</th> <td>3WW</td> <td>C1</td> <td>2018-06-20 00:06:00</td> <td>2018-06-21 00:06:00</td> <td>Common sickness or accident not related to th...</td> </tr> <tr> <th>103</th> <td>2ER</td> <td>C1</td> <td>2018-06-01 00:06:00</td> <td>2018-06-30 00:06:00</td> <td>Common sickness or accident not related to th...</td> </tr> <tr> <th>104</th> <td>ONv</td> <td>C1</td> <td>2018-06-08 00:06:00</td> <td>2018-06-08 00:06:00</td> <td>Common sickness or accident not related to th...</td> </tr> <tr> <th>105</th> <td>xyG</td> <td>C1</td> <td>2018-06-01 00:06:00</td> <td>2018-06-30 00:06:00</td> <td>Non job related sickness</td> </tr> </tbody> </table> <p>106 rows Ã— 5 columns</p> </div> <p>We can see that the dataset contains details of leaves taken by employees, the from-date, to-date, the leave time, and the reason for leave given by the employee. </p> <div class=highlight><pre><span></span><code><span class=n>df</span><span class=o>.</span><span class=n>describe</span><span class=p>(</span><span class=n>include</span><span class=o>=</span><span class=s1>&#39;all&#39;</span><span class=p>,</span> <span class=n>datetime_is_numeric</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>employee</th> <th>companyAlias</th> <th>from</th> <th>to</th> <th>reason</th> </tr> </thead> <tbody> <tr> <th>count</th> <td>106</td> <td>106</td> <td>106</td> <td>106</td> <td>106</td> </tr> <tr> <th>unique</th> <td>62</td> <td>1</td> <td>NaN</td> <td>NaN</td> <td>4</td> </tr> <tr> <th>top</th> <td>yKX</td> <td>C1</td> <td>NaN</td> <td>NaN</td> <td>Common sickness or accident not related to th...</td> </tr> <tr> <th>freq</th> <td>4</td> <td>106</td> <td>NaN</td> <td>NaN</td> <td>96</td> </tr> <tr> <th>mean</th> <td>NaN</td> <td>NaN</td> <td>2018-08-11 04:12:33.962264320</td> <td>2018-08-26 23:13:41.886792448</td> <td>NaN</td> </tr> <tr> <th>min</th> <td>NaN</td> <td>NaN</td> <td>2018-06-01 00:06:00</td> <td>2018-06-06 00:06:00</td> <td>NaN</td> </tr> <tr> <th>25%</th> <td>NaN</td> <td>NaN</td> <td>2018-06-18 06:06:00</td> <td>2018-06-30 00:06:00</td> <td>NaN</td> </tr> <tr> <th>50%</th> <td>NaN</td> <td>NaN</td> <td>2018-08-01 00:08:00</td> <td>2018-08-31 00:08:00</td> <td>NaN</td> </tr> <tr> <th>75%</th> <td>NaN</td> <td>NaN</td> <td>2018-10-01 00:10:00</td> <td>2018-10-23 12:10:00</td> <td>NaN</td> </tr> <tr> <th>max</th> <td>NaN</td> <td>NaN</td> <td>2018-10-31 00:10:00</td> <td>2018-10-31 00:10:00</td> <td>NaN</td> </tr> </tbody> </table> </div> <p>Further we can see that the data is across only one company, across 62 employees taking a total of around 106 leaves (not days of leave) with 4 unique reasons. The maximum period of leaves is 30 days, and the frequency of the leave period is shown below. The majority of employees take either a short 1-3 days leave, or a much longer 27-30 day leave (likely due to a sickness, accident, or similar issue).</p> <div class=highlight><pre><span></span><code><span class=n>df</span><span class=p>[</span><span class=s1>&#39;leave_time&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;to&#39;</span><span class=p>]</span> <span class=o>-</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;from&#39;</span><span class=p>])</span><span class=o>/</span><span class=n>np</span><span class=o>.</span><span class=n>timedelta64</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;D&#39;</span><span class=p>)</span> <span class=c1># takes the difference in days</span>
<span class=n>df</span><span class=p>[</span><span class=s1>&#39;date&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;from&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>dt</span><span class=o>.</span><span class=n>date</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=s1>&#39;datetime64[ns]&#39;</span><span class=p>)</span> <span class=c1># gets only the date part from the timeframe</span>

<span class=n>f</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>figsize</span> <span class=o>=</span> <span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>10</span><span class=p>))</span>
<span class=n>df</span><span class=p>[</span><span class=s1>&#39;leave_time&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>plot</span><span class=o>.</span><span class=n>hist</span><span class=p>()</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Histogram of the leave period&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_6_0.png></p> <p>There are four reasons given for leaves, with "Common sickness not related to the job" as the most common reason. The below pie charts summarize the main reasons for leave shows that the main reasons employees take leave. In our case, common sickness / non job-related accidents are the main reasons for absence.</p> <div class=highlight><pre><span></span><code><span class=n>df</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;reason&#39;</span><span class=p>)</span><span class=o>.</span>\
    <span class=n>aggregate</span><span class=p>({</span><span class=s1>&#39;leave_time&#39;</span><span class=p>:</span><span class=s1>&#39;sum&#39;</span><span class=p>})</span><span class=o>.</span>\
    <span class=n>plot</span><span class=o>.</span><span class=n>pie</span><span class=p>(</span><span class=n>y</span><span class=o>=</span><span class=s1>&#39;leave_time&#39;</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>),</span> 
             <span class=n>autopct</span><span class=o>=</span><span class=s1>&#39;</span><span class=si>%1.1f%%</span><span class=s1>&#39;</span><span class=p>,</span> <span class=c1># to add the percentages text</span>
             <span class=n>wedgeprops</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>width</span><span class=o>=</span><span class=mf>.5</span><span class=p>)</span>
            <span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>ylabel</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Proportion of the number of days leaves were taken due to different reasons&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_8_0.png></p> <p>Additionally, we can observe that the most of the leaves were taken from the first of the month, and ended at the end of the month.</p> <div class=highlight><pre><span></span><code><span class=n>f</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=n>figsize</span> <span class=o>=</span> <span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>10</span><span class=p>),</span> <span class=n>sharey</span> <span class=o>=</span> <span class=kc>True</span><span class=p>)</span>
<span class=n>df</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;from&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>dt</span><span class=o>.</span><span class=n>day</span><span class=p>)[</span><span class=s1>&#39;employee&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>count</span><span class=p>()</span><span class=o>.</span>\
    <span class=n>plot</span><span class=p>(</span><span class=n>kind</span><span class=o>=</span><span class=s1>&#39;bar&#39;</span><span class=p>,</span> <span class=n>ax</span><span class=o>=</span><span class=n>ax</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>title</span> <span class=o>=</span> <span class=s1>&#39;Number of leaves with &quot;from&quot; date&#39;</span><span class=p>)</span>
<span class=n>df</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;to&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>dt</span><span class=o>.</span><span class=n>day</span><span class=p>)[</span><span class=s1>&#39;employee&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>count</span><span class=p>()</span><span class=o>.</span>\
    <span class=n>plot</span><span class=p>(</span><span class=n>kind</span><span class=o>=</span><span class=s1>&#39;bar&#39;</span><span class=p>,</span> <span class=n>ax</span><span class=o>=</span><span class=n>ax</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>title</span> <span class=o>=</span> <span class=s1>&#39;Number of leaves with &quot;to&quot; date&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_10_0.png></p> <p>The below scatter plot shows the number of employees at any date.</p> <div class=highlight><pre><span></span><code><span class=c1># Feature engineering on absentism dataset</span>
<span class=c1># creating a dataframe with leaves as per employee and dates</span>
<span class=n>leave_df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>({</span><span class=s1>&#39;date&#39;</span><span class=p>:[],</span> <span class=s1>&#39;employee&#39;</span><span class=p>:[],</span> <span class=s1>&#39;reason&#39;</span><span class=p>:[]})</span>
<span class=k>for</span> <span class=n>index</span><span class=p>,</span> <span class=n>row</span> <span class=ow>in</span> <span class=n>df</span><span class=o>.</span><span class=n>iterrows</span><span class=p>():</span>
    <span class=n>dates</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>date_range</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=s1>&#39;from&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>date</span><span class=p>(),</span> <span class=n>row</span><span class=p>[</span><span class=s1>&#39;to&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>date</span><span class=p>())</span>
    <span class=k>for</span> <span class=n>date</span> <span class=ow>in</span> <span class=n>dates</span><span class=p>:</span>
        <span class=n>leave_df</span> <span class=o>=</span> <span class=n>leave_df</span><span class=o>.</span><span class=n>append</span><span class=p>({</span><span class=s1>&#39;date&#39;</span><span class=p>:</span><span class=n>date</span><span class=p>,</span> <span class=s1>&#39;employee&#39;</span><span class=p>:</span><span class=n>row</span><span class=p>[</span><span class=s1>&#39;employee&#39;</span><span class=p>],</span> <span class=s1>&#39;reason&#39;</span><span class=p>:</span><span class=n>row</span><span class=p>[</span><span class=s1>&#39;reason&#39;</span><span class=p>]}</span> <span class=p>,</span><span class=n>ignore_index</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=n>leave_df</span><span class=p>[</span><span class=s1>&#39;on_leave&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span>

<span class=c1># Creating a cumulative sum to get tehe number of leaves taken by the employee till date</span>
<span class=n>leave_df</span><span class=p>[</span><span class=s1>&#39;no_leaves_till_date&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>leave_df</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;employee&#39;</span><span class=p>)[</span><span class=s1>&#39;on_leave&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>transform</span><span class=p>(</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=o>.</span><span class=n>cumsum</span><span class=p>()</span><span class=o>.</span><span class=n>shift</span><span class=p>())</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>

<span class=n>f</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>figsize</span> <span class=o>=</span> <span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>10</span><span class=p>))</span>
<span class=n>leave_df</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;date&#39;</span><span class=p>])[</span><span class=s1>&#39;on_leave&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span><span class=o>.</span><span class=n>reset_index</span><span class=p>()</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=s1>&#39;on_leave&#39;</span><span class=p>,</span> <span class=n>kind</span> <span class=o>=</span> <span class=s1>&#39;scatter&#39;</span><span class=p>,</span> <span class=n>ax</span><span class=o>=</span><span class=n>ax</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Number of people on leave&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_12_0.png></p> <p>We can see that most of the leaves are in three months in 2018, indicating that these could be a subset of the data.</p> <h2 id=employee-details>Employee details<a class=headerlink href=#employee-details title="Permanent link">&para;</a></h2> <p>The next dataset to look at <strong>lastparticipationExists</strong> which has the last participation date along with the details of the employee. This data also has the number of votes each employee voted till date (this variable can be used as a proxy for engagement).</p> <div class=highlight><pre><span></span><code><span class=n>employee_details</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s2>&quot;lastParticipationExists.csv&quot;</span><span class=p>)</span>
<span class=n>employee_details</span><span class=o>.</span><span class=n>lastParticipationDate</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>to_datetime</span><span class=p>(</span><span class=n>employee_details</span><span class=o>.</span><span class=n>lastParticipationDate</span><span class=p>)</span>
<span class=n>employee_details</span><span class=o>.</span><span class=n>deletedOn</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>to_datetime</span><span class=p>(</span><span class=n>employee_details</span><span class=o>.</span><span class=n>deletedOn</span><span class=p>)</span>
<span class=n>employee_details</span><span class=o>.</span><span class=n>stillExists</span> <span class=o>=</span> <span class=n>employee_details</span><span class=o>.</span><span class=n>stillExists</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span>
<span class=n>employee_details</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>employee</th> <th>companyAlias</th> <th>numVotes</th> <th>lastParticipationDate</th> <th>timezone</th> <th>stillExists</th> <th>deletedOn</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>l8</td> <td>C1</td> <td>285</td> <td>2019-03-08 01:03:00</td> <td>Europe/Madrid</td> <td>1</td> <td>NaT</td> </tr> <tr> <th>1</th> <td>Xv</td> <td>C1</td> <td>143</td> <td>2018-04-21 02:04:00</td> <td>Europe/Berlin</td> <td>1</td> <td>NaT</td> </tr> <tr> <th>2</th> <td>w7</td> <td>C1</td> <td>381</td> <td>2019-03-11 01:03:00</td> <td>Europe/Madrid</td> <td>1</td> <td>NaT</td> </tr> <tr> <th>3</th> <td>jE</td> <td>C1</td> <td>173</td> <td>2019-03-01 01:03:00</td> <td>Europe/Madrid</td> <td>1</td> <td>NaT</td> </tr> <tr> <th>4</th> <td>QP</td> <td>C1</td> <td>312</td> <td>2019-03-08 01:03:00</td> <td>Europe/Berlin</td> <td>1</td> <td>NaT</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>475</th> <td>D7J</td> <td>C1</td> <td>29</td> <td>2018-11-19 01:11:00</td> <td>Europe/Madrid</td> <td>0</td> <td>2018-11-20 13:11:00</td> </tr> <tr> <th>476</th> <td>9KA</td> <td>C1</td> <td>50</td> <td>2018-11-09 01:11:00</td> <td>Europe/Madrid</td> <td>0</td> <td>2018-12-13 16:12:00</td> </tr> <tr> <th>477</th> <td>zR7</td> <td>C1</td> <td>42</td> <td>2018-10-26 02:10:00</td> <td>Europe/Madrid</td> <td>0</td> <td>2018-11-20 13:11:00</td> </tr> <tr> <th>478</th> <td>B7E</td> <td>C1</td> <td>16</td> <td>2019-01-21 01:01:00</td> <td>Europe/Madrid</td> <td>0</td> <td>2019-02-11 18:02:00</td> </tr> <tr> <th>479</th> <td>QJg</td> <td>C1</td> <td>1</td> <td>2018-11-28 01:11:00</td> <td>Europe/Madrid</td> <td>0</td> <td>2019-01-28 10:01:00</td> </tr> </tbody> </table> <p>480 rows Ã— 7 columns</p> </div> <div class=highlight><pre><span></span><code><span class=n>employee_details</span><span class=o>.</span><span class=n>describe</span><span class=p>(</span><span class=n>include</span><span class=o>=</span><span class=s1>&#39;all&#39;</span><span class=p>,</span> <span class=n>datetime_is_numeric</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>employee</th> <th>companyAlias</th> <th>numVotes</th> <th>lastParticipationDate</th> <th>timezone</th> <th>stillExists</th> <th>deletedOn</th> </tr> </thead> <tbody> <tr> <th>count</th> <td>480</td> <td>480</td> <td>480.000000</td> <td>470</td> <td>480</td> <td>480.00000</td> <td>105</td> </tr> <tr> <th>unique</th> <td>480</td> <td>1</td> <td>NaN</td> <td>NaN</td> <td>6</td> <td>NaN</td> <td>NaN</td> </tr> <tr> <th>top</th> <td>l8</td> <td>C1</td> <td>NaN</td> <td>NaN</td> <td>Europe/Madrid</td> <td>NaN</td> <td>NaN</td> </tr> <tr> <th>freq</th> <td>1</td> <td>480</td> <td>NaN</td> <td>NaN</td> <td>411</td> <td>NaN</td> <td>NaN</td> </tr> <tr> <th>mean</th> <td>NaN</td> <td>NaN</td> <td>222.570833</td> <td>2018-12-05 02:49:16.212765696</td> <td>NaN</td> <td>0.78125</td> <td>2018-04-20 20:56:21.142856960</td> </tr> <tr> <th>min</th> <td>NaN</td> <td>NaN</td> <td>0.000000</td> <td>2017-05-06 02:05:00</td> <td>NaN</td> <td>0.00000</td> <td>2017-05-12 10:05:00</td> </tr> <tr> <th>25%</th> <td>NaN</td> <td>NaN</td> <td>44.000000</td> <td>2018-12-29 07:09:15</td> <td>NaN</td> <td>1.00000</td> <td>2017-11-09 17:11:00</td> </tr> <tr> <th>50%</th> <td>NaN</td> <td>NaN</td> <td>175.000000</td> <td>2019-03-08 01:03:00</td> <td>NaN</td> <td>1.00000</td> <td>2018-05-15 17:05:00</td> </tr> <tr> <th>75%</th> <td>NaN</td> <td>NaN</td> <td>374.500000</td> <td>2019-03-11 01:03:00</td> <td>NaN</td> <td>1.00000</td> <td>2018-08-29 09:08:00</td> </tr> <tr> <th>max</th> <td>NaN</td> <td>NaN</td> <td>671.000000</td> <td>2019-03-11 01:03:00</td> <td>NaN</td> <td>1.00000</td> <td>2019-03-07 14:03:00</td> </tr> <tr> <th>std</th> <td>NaN</td> <td>NaN</td> <td>193.047398</td> <td>NaN</td> <td>NaN</td> <td>0.41383</td> <td>NaN</td> </tr> </tbody> </table> </div> <p>We can see that this dataset contains more employees than the previous dataset. The previous dataset might be a subset of all the leaves that different people have taken. We can see that most of the people are from Madrid in Europe, while considerable number of employees are from Berlin. </p> <div class=highlight><pre><span></span><code><span class=n>employee_details</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;timezone&#39;</span><span class=p>)</span><span class=o>.</span>\
    <span class=n>aggregate</span><span class=p>({</span><span class=s1>&#39;lastParticipationDate&#39;</span><span class=p>:</span><span class=s1>&#39;count&#39;</span><span class=p>})</span><span class=o>.</span>\
    <span class=n>plot</span><span class=o>.</span><span class=n>pie</span><span class=p>(</span><span class=n>y</span><span class=o>=</span><span class=s1>&#39;lastParticipationDate&#39;</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>),</span> 
             <span class=n>autopct</span><span class=o>=</span><span class=s1>&#39;</span><span class=si>%1.1f%%</span><span class=s1>&#39;</span><span class=p>,</span> <span class=c1># to add the percentages text</span>
             <span class=n>wedgeprops</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>width</span><span class=o>=</span><span class=mf>.5</span><span class=p>)</span>
            <span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>ylabel</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Employees Locations&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_18_0.png></p> <div class=highlight><pre><span></span><code><span class=n>f</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>figsize</span> <span class=o>=</span> <span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>10</span><span class=p>))</span>

<span class=n>employee_details</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>employee_details</span><span class=o>.</span><span class=n>lastParticipationDate</span><span class=o>.</span><span class=fm>__ne__</span><span class=p>(</span><span class=kc>None</span><span class=p>)]</span><span class=o>.</span>\
    <span class=n>loc</span><span class=p>[</span><span class=n>employee_details</span><span class=o>.</span><span class=n>stillExists</span> <span class=o>==</span> <span class=mi>0</span><span class=p>]</span><span class=o>.</span>\
    <span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;lastParticipationDate&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>aggregate</span><span class=p>({</span><span class=s1>&#39;stillExists&#39;</span><span class=p>:</span><span class=s1>&#39;count&#39;</span><span class=p>})</span><span class=o>.</span><span class=n>reset_index</span><span class=p>()</span><span class=o>.</span>\
    <span class=n>plot</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=s1>&#39;lastParticipationDate&#39;</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=s1>&#39;stillExists&#39;</span><span class=p>,</span> <span class=n>kind</span> <span class=o>=</span> <span class=s1>&#39;scatter&#39;</span><span class=p>,</span> <span class=n>ax</span><span class=o>=</span><span class=n>ax</span><span class=p>)</span>

<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Number of people who have left across time&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>xlabel</span><span class=p>(</span><span class=s1>&#39;Number of employees&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>ylabel</span><span class=p>(</span><span class=s1>&#39;Date&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_19_0.png></p> <h2 id=votes>Votes<a class=headerlink href=#votes title="Permanent link">&para;</a></h2> <p>The next dataset of interest is the <strong>vote's dataset</strong>. A listing of all votes registered on Happyforce to the question "How are you today?" from the employees on the dataset. All employees do not participate in this survey, but quite a lot of them do regularly. </p> <div class=highlight><pre><span></span><code><span class=n>votes</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s2>&quot;votes.csv&quot;</span><span class=p>)</span>
<span class=n>votes</span><span class=p>[</span><span class=s1>&#39;voteDate&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>to_datetime</span><span class=p>(</span><span class=n>votes</span><span class=p>[</span><span class=s1>&#39;voteDate&#39;</span><span class=p>])</span>
<span class=n>votes</span> <span class=o>=</span> <span class=n>votes</span><span class=o>.</span><span class=n>sort_values</span><span class=p>([</span><span class=s1>&#39;employee&#39;</span><span class=p>,</span> <span class=s1>&#39;voteDate&#39;</span><span class=p>])</span>
<span class=n>votes</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>employee</th> <th>companyAlias</th> <th>voteDate</th> <th>vote</th> </tr> </thead> <tbody> <tr> <th>17862</th> <td>13L</td> <td>C1</td> <td>2017-09-26 02:09:00</td> <td>2</td> </tr> <tr> <th>18093</th> <td>13L</td> <td>C1</td> <td>2017-09-27 02:09:00</td> <td>3</td> </tr> <tr> <th>18406</th> <td>13L</td> <td>C1</td> <td>2017-09-29 02:09:00</td> <td>3</td> </tr> <tr> <th>18562</th> <td>13L</td> <td>C1</td> <td>2017-09-30 02:09:00</td> <td>4</td> </tr> <tr> <th>18635</th> <td>13L</td> <td>C1</td> <td>2017-10-01 02:10:00</td> <td>3</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>90055</th> <td>zyx</td> <td>C1</td> <td>2018-12-15 01:12:00</td> <td>3</td> </tr> <tr> <th>90797</th> <td>zyx</td> <td>C1</td> <td>2018-12-19 01:12:00</td> <td>2</td> </tr> <tr> <th>91235</th> <td>zyx</td> <td>C1</td> <td>2018-12-21 01:12:00</td> <td>2</td> </tr> <tr> <th>91983</th> <td>zyx</td> <td>C1</td> <td>2018-12-26 01:12:00</td> <td>3</td> </tr> <tr> <th>92186</th> <td>zyx</td> <td>C1</td> <td>2018-12-28 01:12:00</td> <td>2</td> </tr> </tbody> </table> <p>106834 rows Ã— 4 columns</p> </div> <div class=highlight><pre><span></span><code><span class=n>votes</span><span class=o>.</span><span class=n>describe</span><span class=p>(</span><span class=n>include</span><span class=o>=</span><span class=s1>&#39;all&#39;</span><span class=p>,</span> <span class=n>datetime_is_numeric</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>employee</th> <th>companyAlias</th> <th>voteDate</th> <th>vote</th> </tr> </thead> <tbody> <tr> <th>count</th> <td>106834</td> <td>106834</td> <td>106834</td> <td>106834.000000</td> </tr> <tr> <th>unique</th> <td>472</td> <td>1</td> <td>NaN</td> <td>NaN</td> </tr> <tr> <th>top</th> <td>xE4</td> <td>C1</td> <td>NaN</td> <td>NaN</td> </tr> <tr> <th>freq</th> <td>671</td> <td>106834</td> <td>NaN</td> <td>NaN</td> </tr> <tr> <th>mean</th> <td>NaN</td> <td>NaN</td> <td>2018-05-06 22:41:28.348840192</td> <td>2.849580</td> </tr> <tr> <th>min</th> <td>NaN</td> <td>NaN</td> <td>2017-05-03 02:05:00</td> <td>1.000000</td> </tr> <tr> <th>25%</th> <td>NaN</td> <td>NaN</td> <td>2017-11-27 01:11:00</td> <td>2.000000</td> </tr> <tr> <th>50%</th> <td>NaN</td> <td>NaN</td> <td>2018-05-21 02:05:00</td> <td>3.000000</td> </tr> <tr> <th>75%</th> <td>NaN</td> <td>NaN</td> <td>2018-10-19 02:10:00</td> <td>4.000000</td> </tr> <tr> <th>max</th> <td>NaN</td> <td>NaN</td> <td>2019-03-11 01:03:00</td> <td>4.000000</td> </tr> <tr> <th>std</th> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>0.980259</td> </tr> </tbody> </table> </div> <h3 id=eda>EDA<a class=headerlink href=#eda title="Permanent link">&para;</a></h3> <p>We can see that the votes vary between 1 and 4, with average being 2.89. This survey has data from 3-5-2017 to 11-3-2019. This survey was taken by 472 employees. While the data has details from 3-5-2017, there would be employees who joined after the survey has already started. Identifying them will help us to look for patterns over time for new employees. We are considering any employee that has the first vote 100 days after the inception (3-5-2017) as a new employee. </p> <div class=highlight><pre><span></span><code><span class=n>f</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>figsize</span> <span class=o>=</span> <span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>10</span><span class=p>))</span>
<span class=n>votes</span><span class=o>.</span><span class=n>vote</span><span class=o>.</span><span class=n>hist</span><span class=p>(</span><span class=n>grid</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>ax</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Histogram of the votes&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>xlabel</span><span class=p>(</span><span class=s1>&#39;Vote&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>ylabel</span><span class=p>(</span><span class=s1>&#39;Frequency&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_24_0.png></p> <h3 id=feature-engineering>Feature engineering<a class=headerlink href=#feature-engineering title="Permanent link">&para;</a></h3> <p>We can observe that the default vote is 3, with more happy employees using 4 and less happy employees using 2 or 3. For the modelling, we want to create features which take only the data before the observation into account, and it is useful to have running means to capture the default characteristics of the employee, and also to capture the latest 2 votes to capture if there has been any change from the normal recently. The columns after feature engineering are:<br> 1. (existing column) vote: what the employee voted (1 to 4, representing being very Bad, Bad, Good, Very Good)<br> 2. new_employee: We add a new parameter called "new employee" - we will label someone as a newer employee if their first vote has been more than 100 days (~3 months) since the software began collecting data<br> 3. min_date: the date of the first recorded vote by an employee<br> 4. no_of_days_since_first_vote: we use this as proxy for tenure in the company<br> 5. no_of_votes_till_date: use this as proxy for engagement with the company<br> 6. perc_days_voted: another way to look at engagement with the company (adjusted for tenure)<br> 7. avg_vote_till_date: proxy for job satisfaction (the higher, the better)<br> 8. avg_vote: same as above, but taking all votes (not just to date)<br> 9. last_2_votes_avg: proxy for most recent sentiment at their job</p> <div class=highlight><pre><span></span><code><span class=c1># Feature engineering on the votes dataset</span>
<span class=n>votes</span><span class=p>[</span><span class=s1>&#39;min_date&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>votes</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;employee&#39;</span><span class=p>)[</span><span class=s1>&#39;voteDate&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>transform</span><span class=p>(</span><span class=nb>min</span><span class=p>)</span>

<span class=c1># new employee is 100 day since inception of the software</span>
<span class=n>votes</span><span class=p>[</span><span class=s1>&#39;new_employee&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=n>votes</span><span class=o>.</span><span class=n>min_date</span> <span class=o>&gt;=</span> <span class=s1>&#39;13-06-2017 00:00:00&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span> 

<span class=c1># Getting the difference in days since first vote in days</span>
<span class=n>votes</span><span class=p>[</span><span class=s1>&#39;no_of_days_since_first_vote&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>((</span><span class=n>votes</span><span class=o>.</span><span class=n>voteDate</span> <span class=o>-</span> <span class=n>votes</span><span class=o>.</span><span class=n>min_date</span><span class=p>)</span><span class=o>/</span><span class=n>np</span><span class=o>.</span><span class=n>timedelta64</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;D&#39;</span><span class=p>))</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span><span class=o>+</span><span class=mi>1</span>

<span class=c1># Calculating the cumulative number of votes till date (only considering the past: this step should be done after order by)</span>
<span class=n>votes</span><span class=p>[</span><span class=s1>&#39;no_of_votes_till_date&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>votes</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;employee&#39;</span><span class=p>)[</span><span class=s1>&#39;voteDate&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>transform</span><span class=p>(</span><span class=s1>&#39;cumcount&#39;</span><span class=p>)</span><span class=o>+</span><span class=mi>1</span>

<span class=c1># calculating the percentage of days that the employee has voted till date</span>
<span class=n>votes</span><span class=p>[</span><span class=s1>&#39;perc_days_voted&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>votes</span><span class=p>[</span><span class=s1>&#39;no_of_votes_till_date&#39;</span><span class=p>]</span><span class=o>/</span><span class=n>votes</span><span class=p>[</span><span class=s1>&#39;no_of_days_since_first_vote&#39;</span><span class=p>]</span>

<span class=c1># average of the vote till date by the employee</span>
<span class=n>votes</span><span class=p>[</span><span class=s1>&#39;avg_vote_till_date&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>votes</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;employee&#39;</span><span class=p>)[</span><span class=s1>&#39;vote&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>transform</span><span class=p>(</span><span class=s1>&#39;cumsum&#39;</span><span class=p>)</span><span class=o>/</span><span class=p>(</span><span class=n>votes</span><span class=p>[</span><span class=s1>&#39;no_of_votes_till_date&#39;</span><span class=p>])</span>

<span class=c1># Average vote in general of the employee</span>
<span class=n>votes</span><span class=p>[</span><span class=s1>&#39;avg_vote&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>votes</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;employee&#39;</span><span class=p>)[</span><span class=s1>&#39;vote&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>transform</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>mean</span><span class=p>)</span>

<span class=c1># The average of the last two votes (The last two votes might redict the probability of taking a leave now)</span>
<span class=n>votes</span><span class=p>[</span><span class=s1>&#39;last_2_votes_avg&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>votes</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;employee&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>rolling</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=n>min_periods</span><span class=o>=</span><span class=mi>1</span><span class=p>)[</span><span class=s1>&#39;vote&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>mean</span><span class=p>))</span>
<span class=n>votes</span><span class=p>[</span><span class=s1>&#39;date&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>votes</span><span class=o>.</span><span class=n>voteDate</span><span class=o>.</span><span class=n>dt</span><span class=o>.</span><span class=n>date</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=s1>&#39;datetime64[ns]&#39;</span><span class=p>)</span>
</code></pre></div> <p>In the scatter plot below we can see an interesting trend / relationship between votes (1 to 4) and employee tenure. We can see the newer employees (green dots) are overall more satisfied than older employees (red dots). We can also see that over time, more tenured employees show a concerning downward trend in satisfaction. This could be one of the drivers for churn or increased absences.</p> <div class=highlight><pre><span></span><code><span class=n>fs</span><span class=p>,</span> <span class=n>axs</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>10</span><span class=p>))</span>
<span class=n>votes</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;new_employee&#39;</span><span class=p>,</span> <span class=s1>&#39;no_of_days_since_first_vote&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>agg</span><span class=p>({</span><span class=s1>&#39;vote&#39;</span><span class=p>:</span><span class=s1>&#39;mean&#39;</span><span class=p>})</span><span class=o>.</span><span class=n>reset_index</span><span class=p>()</span><span class=o>.</span>\
    <span class=n>plot</span><span class=o>.</span><span class=n>scatter</span><span class=p>(</span><span class=n>x</span><span class=o>=</span><span class=s1>&#39;no_of_days_since_first_vote&#39;</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=s1>&#39;vote&#39;</span><span class=p>,</span> <span class=n>c</span><span class=o>=</span><span class=s1>&#39;new_employee&#39;</span><span class=p>,</span> <span class=n>alpha</span> <span class=o>=</span> <span class=mf>0.4</span><span class=p>,</span> 
                <span class=n>cmap</span> <span class=o>=</span> <span class=n>sns</span><span class=o>.</span><span class=n>diverging_palette</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>133</span><span class=p>,</span><span class=n>as_cmap</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>axs</span><span class=p>)</span><span class=c1>#, vmin = 2.0, vmax=3.5)</span>
<span class=n>axs</span><span class=o>.</span><span class=n>set_ylim</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span> <span class=mf>3.5</span><span class=p>])</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Averge vote across new and old employee&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>xlabel</span><span class=p>(</span><span class=s1>&#39;Number of days since first vote&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_28_0.png></p> <p>We can see there is some seasonality in votes. This could be related to specific busy periods at the company, or relate to specific incidents that have occurred. It can also be a matter of seasons (employees tend to be happier before or around holiday seasons, for example).</p> <div class=highlight><pre><span></span><code><span class=n>fs</span><span class=p>,</span> <span class=n>axs</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>10</span><span class=p>))</span>
<span class=n>votes</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;voteDate&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>agg</span><span class=p>({</span><span class=s1>&#39;vote&#39;</span><span class=p>:</span><span class=s1>&#39;mean&#39;</span><span class=p>})</span><span class=o>.</span><span class=n>reset_index</span><span class=p>()</span><span class=o>.</span>\
    <span class=n>plot</span><span class=o>.</span><span class=n>scatter</span><span class=p>(</span><span class=n>x</span><span class=o>=</span><span class=s1>&#39;voteDate&#39;</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=s1>&#39;vote&#39;</span><span class=p>,</span> <span class=n>alpha</span> <span class=o>=</span> <span class=mf>0.4</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>axs</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Seasonality in the average vote&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>xlabel</span><span class=p>(</span><span class=s1>&#39;Date of vote&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_30_0.png></p> <div class=highlight><pre><span></span><code><span class=c1># joining the votes table with employee details to add the details of the employee</span>
<span class=n>votes</span> <span class=o>=</span> <span class=n>votes</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>employee_details</span><span class=p>,</span> <span class=n>how</span> <span class=o>=</span> <span class=s1>&#39;left&#39;</span><span class=p>,</span> <span class=n>on</span> <span class=o>=</span> <span class=s1>&#39;employee&#39;</span><span class=p>)</span>
</code></pre></div> <p>Does the average vote decrease just before a person quits the organisation? We can identify this by filtering for the employees who have already quit, and look at the average votes since the last day. We identify that the votes are actually pretty consistent with a mean around 2.8 before the notice period while it decreases in the notice period(of presumably 60 days).</p> <div class=highlight><pre><span></span><code><span class=n>people_who_left</span> <span class=o>=</span> <span class=n>votes</span><span class=p>[</span><span class=n>votes</span><span class=o>.</span><span class=n>stillExists</span> <span class=o>==</span> <span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
<span class=n>people_who_left</span><span class=o>.</span><span class=n>loc</span><span class=p>[:,</span><span class=s1>&#39;no_of_days_since_exit&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>((</span><span class=n>people_who_left</span><span class=o>.</span><span class=n>voteDate</span> <span class=o>-</span> <span class=n>people_who_left</span><span class=o>.</span><span class=n>deletedOn</span><span class=p>)</span><span class=o>/</span><span class=n>np</span><span class=o>.</span><span class=n>timedelta64</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;D&#39;</span><span class=p>))</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span>

<span class=n>fs</span><span class=p>,</span> <span class=n>axs</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>10</span><span class=p>))</span>
<span class=n>people_who_left</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;new_employee&#39;</span><span class=p>,</span> <span class=s1>&#39;no_of_days_since_exit&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>agg</span><span class=p>({</span><span class=s1>&#39;vote&#39;</span><span class=p>:</span><span class=s1>&#39;mean&#39;</span><span class=p>})</span><span class=o>.</span><span class=n>reset_index</span><span class=p>()</span><span class=o>.</span>\
    <span class=n>plot</span><span class=o>.</span><span class=n>scatter</span><span class=p>(</span><span class=n>x</span><span class=o>=</span><span class=s1>&#39;no_of_days_since_exit&#39;</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=s1>&#39;vote&#39;</span><span class=p>,</span> <span class=n>alpha</span> <span class=o>=</span> <span class=mf>0.4</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>axs</span><span class=p>)</span>
<span class=n>axs</span><span class=o>.</span><span class=n>set_xlim</span><span class=p>([</span><span class=o>-</span><span class=mi>200</span><span class=p>,</span> <span class=mi>0</span><span class=p>])</span>
<span class=n>axs</span><span class=o>.</span><span class=n>set_ylim</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span> <span class=mf>3.5</span><span class=p>])</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Averge vote for employees who have left the organisation&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>xlabel</span><span class=p>(</span><span class=s1>&#39;Number of days since exit date&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_33_0.png></p> <p>As we have employees across 5 time zones, the average votes across time zones are also shown. We can see distinct seasonality patterns across different geographies. Some geographies have low variation as they have very few employees. </p> <div class=highlight><pre><span></span><code><span class=n>fs</span><span class=p>,</span> <span class=n>axs</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>10</span><span class=p>))</span>
<span class=n>sns</span><span class=o>.</span><span class=n>scatterplot</span><span class=p>(</span><span class=n>data</span> <span class=o>=</span> <span class=n>votes</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;timezone&#39;</span><span class=p>,</span> <span class=s1>&#39;voteDate&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>agg</span><span class=p>({</span><span class=s1>&#39;vote&#39;</span><span class=p>:</span><span class=s1>&#39;mean&#39;</span><span class=p>})</span><span class=o>.</span><span class=n>reset_index</span><span class=p>(),</span> 
                <span class=n>x</span><span class=o>=</span><span class=s1>&#39;voteDate&#39;</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=s1>&#39;vote&#39;</span><span class=p>,</span> <span class=n>hue</span> <span class=o>=</span> <span class=s1>&#39;timezone&#39;</span><span class=p>,</span> <span class=n>alpha</span> <span class=o>=</span> <span class=mf>0.4</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>axs</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Averge vote for employees in different geographies&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>xlabel</span><span class=p>(</span><span class=s1>&#39;Vote date&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_35_0.png></p> <h2 id=feedback-dataset>Feedback dataset<a class=headerlink href=#feedback-dataset title="Permanent link">&para;</a></h2> <p>The next dataset of interest is the <strong>comment's feedback</strong> dataset. This contains all the different comments given by employees, and the number of likes and dislikes on each of the comment. Likes, Dislikes and comments are various proxyâ€™s for engagement. </p> <div class=highlight><pre><span></span><code><span class=n>feedback</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s2>&quot;comments_by_employees_in_anonymous_forum.csv&quot;</span><span class=p>)</span>
<span class=n>feedback</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>employee</th> <th>companyAlias</th> <th>commentId</th> <th>commentLength</th> <th>likes</th> <th>dislikes</th> <th>commentDate</th> <th>feedbackType</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>aKP</td> <td>C1</td> <td>5909b33da2ede4000473da6f</td> <td>17</td> <td>9</td> <td>0</td> <td>2017-05-03 12:05</td> <td>OTHER</td> </tr> <tr> <th>1</th> <td>dNx</td> <td>C1</td> <td>5909b6aca2ede4000473da72</td> <td>25</td> <td>12</td> <td>0</td> <td>2017-05-03 12:05</td> <td>OTHER</td> </tr> <tr> <th>2</th> <td>ONv</td> <td>C1</td> <td>5909c2dea2ede4000473db8c</td> <td>58</td> <td>33</td> <td>5</td> <td>2017-05-03 13:05</td> <td>OTHER</td> </tr> <tr> <th>3</th> <td>e9M</td> <td>C1</td> <td>5909d32ea2ede4000473db97</td> <td>56</td> <td>11</td> <td>4</td> <td>2017-05-03 14:05</td> <td>OTHER</td> </tr> <tr> <th>4</th> <td>RWM</td> <td>C1</td> <td>5909f227a2ede4000473dcbe</td> <td>105</td> <td>18</td> <td>0</td> <td>2017-05-03 17:05</td> <td>OTHER</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>5067</th> <td>7o1</td> <td>C1</td> <td>5c7108e8434c4500041722b0</td> <td>28</td> <td>0</td> <td>0</td> <td>2019-02-23 09:02</td> <td>OTHER</td> </tr> <tr> <th>5068</th> <td>N3</td> <td>C1</td> <td>5c71519ca9f66e00042896f6</td> <td>14</td> <td>0</td> <td>0</td> <td>2019-02-23 14:02</td> <td>OTHER</td> </tr> <tr> <th>5069</th> <td>DNY</td> <td>C1</td> <td>5c73b11e50b72e0004cab283</td> <td>63</td> <td>0</td> <td>0</td> <td>2019-02-25 10:02</td> <td>OTHER</td> </tr> <tr> <th>5070</th> <td>72j</td> <td>C1</td> <td>5c744971e29c7b0004391da3</td> <td>44</td> <td>0</td> <td>0</td> <td>2019-02-25 21:02</td> <td>OTHER</td> </tr> <tr> <th>5071</th> <td>qKO</td> <td>C1</td> <td>5c781339efad100004ebb886</td> <td>39</td> <td>0</td> <td>0</td> <td>2019-02-28 17:02</td> <td>OTHER</td> </tr> </tbody> </table> <p>5072 rows Ã— 8 columns</p> </div> <div class=highlight><pre><span></span><code><span class=n>feedback</span><span class=o>.</span><span class=n>describe</span><span class=p>(</span><span class=n>include</span><span class=o>=</span><span class=s1>&#39;all&#39;</span><span class=p>,</span> <span class=n>datetime_is_numeric</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>employee</th> <th>companyAlias</th> <th>commentId</th> <th>commentLength</th> <th>likes</th> <th>dislikes</th> <th>commentDate</th> <th>feedbackType</th> </tr> </thead> <tbody> <tr> <th>count</th> <td>5072</td> <td>5072</td> <td>5072</td> <td>5072.000000</td> <td>5072.000000</td> <td>5072.00000</td> <td>5072</td> <td>5072</td> </tr> <tr> <th>unique</th> <td>305</td> <td>1</td> <td>5072</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>3580</td> <td>5</td> </tr> <tr> <th>top</th> <td>4ov</td> <td>C1</td> <td>595f9176719d61000484a93d</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>2018-09-10 09:09</td> <td>OTHER</td> </tr> <tr> <th>freq</th> <td>373</td> <td>5072</td> <td>1</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>26</td> <td>3188</td> </tr> <tr> <th>mean</th> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>168.518336</td> <td>13.605875</td> <td>4.89097</td> <td>NaN</td> <td>NaN</td> </tr> <tr> <th>std</th> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>193.802568</td> <td>15.280530</td> <td>6.62993</td> <td>NaN</td> <td>NaN</td> </tr> <tr> <th>min</th> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>1.000000</td> <td>0.000000</td> <td>0.00000</td> <td>NaN</td> <td>NaN</td> </tr> <tr> <th>25%</th> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>48.000000</td> <td>2.000000</td> <td>0.00000</td> <td>NaN</td> <td>NaN</td> </tr> <tr> <th>50%</th> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>111.000000</td> <td>9.000000</td> <td>3.00000</td> <td>NaN</td> <td>NaN</td> </tr> <tr> <th>75%</th> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>223.000000</td> <td>20.000000</td> <td>7.00000</td> <td>NaN</td> <td>NaN</td> </tr> <tr> <th>max</th> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>2509.000000</td> <td>135.000000</td> <td>65.00000</td> <td>NaN</td> <td>NaN</td> </tr> </tbody> </table> </div> <h3 id=eda_1>EDA<a class=headerlink href=#eda_1 title="Permanent link">&para;</a></h3> <p>We can observe that as the number of interactions becomes larger, the overall trend goes either towards likes or dislikes. We can also observe that comments above 80 interactions are usually highly liked. </p> <div class=highlight><pre><span></span><code><span class=n>feedback</span><span class=p>[</span><span class=s1>&#39;log_comment_length&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>log10</span><span class=p>(</span><span class=n>feedback</span><span class=o>.</span><span class=n>commentLength</span><span class=p>)</span>
<span class=n>feedback</span><span class=p>[</span><span class=s1>&#39;total_interactions&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>feedback</span><span class=o>.</span><span class=n>likes</span><span class=o>+</span><span class=n>feedback</span><span class=o>.</span><span class=n>dislikes</span>
<span class=n>feedback</span><span class=p>[</span><span class=s1>&#39;mean_feedback&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=n>feedback</span><span class=o>.</span><span class=n>likes</span><span class=o>-</span><span class=n>feedback</span><span class=o>.</span><span class=n>dislikes</span><span class=p>)</span><span class=o>/</span><span class=n>feedback</span><span class=o>.</span><span class=n>total_interactions</span>

<span class=n>fs</span><span class=p>,</span> <span class=n>axs</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>10</span><span class=p>))</span>
<span class=n>sns</span><span class=o>.</span><span class=n>scatterplot</span><span class=p>(</span><span class=n>data</span> <span class=o>=</span> <span class=n>feedback</span><span class=p>,</span> 
                <span class=n>x</span><span class=o>=</span><span class=s1>&#39;total_interactions&#39;</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=s1>&#39;mean_feedback&#39;</span><span class=p>,</span> <span class=n>hue</span> <span class=o>=</span> <span class=s1>&#39;log_comment_length&#39;</span><span class=p>,</span> <span class=n>alpha</span> <span class=o>=</span> <span class=mf>0.8</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>axs</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Mean interaction vs response level for employee&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>xlabel</span><span class=p>(</span><span class=s1>&#39;Number of interactions&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>ylabel</span><span class=p>(</span><span class=s1>&#39;Mean of feedback&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_40_0.png></p> <p>We can see that we have five types of comments</p> <div class=highlight><pre><span></span><code><span class=n>feedback</span><span class=o>.</span><span class=n>feedbackType</span><span class=o>.</span><span class=n>unique</span><span class=p>()</span>
<span class=n>feedback</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;feedbackType&#39;</span><span class=p>)</span><span class=o>.</span>\
    <span class=n>aggregate</span><span class=p>({</span><span class=s1>&#39;commentId&#39;</span><span class=p>:</span><span class=s1>&#39;count&#39;</span><span class=p>})</span><span class=o>.</span>\
    <span class=n>plot</span><span class=o>.</span><span class=n>pie</span><span class=p>(</span><span class=n>y</span><span class=o>=</span><span class=s1>&#39;commentId&#39;</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>),</span> 
             <span class=n>autopct</span><span class=o>=</span><span class=s1>&#39;</span><span class=si>%1.1f%%</span><span class=s1>&#39;</span><span class=p>,</span> <span class=c1># to add the percentages text</span>
             <span class=n>wedgeprops</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>width</span><span class=o>=</span><span class=mf>.5</span><span class=p>)</span>
            <span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>ylabel</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Frequency of somments&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_42_0.png></p> <p>Similarly, we can see a trend between different comment types, with congratulations receiving more likes than dislikes, while suggestions and information having similar distributions. We can also see how the number of likes are skewed.</p> <div class=highlight><pre><span></span><code><span class=n>fs</span><span class=p>,</span> <span class=n>axs</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>10</span><span class=p>))</span>
<span class=n>sns</span><span class=o>.</span><span class=n>scatterplot</span><span class=p>(</span><span class=n>data</span> <span class=o>=</span> <span class=n>feedback</span><span class=p>,</span> 
                <span class=n>x</span><span class=o>=</span><span class=s1>&#39;likes&#39;</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=s1>&#39;dislikes&#39;</span><span class=p>,</span> <span class=n>hue</span> <span class=o>=</span> <span class=s1>&#39;feedbackType&#39;</span><span class=p>,</span> <span class=n>alpha</span> <span class=o>=</span> <span class=mf>0.4</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>axs</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Total likes and dislikes for comments&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_44_0.png></p> <div class=highlight><pre><span></span><code><span class=n>feedback</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;feedbackType&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>aggregate</span><span class=p>({</span><span class=s1>&#39;likes&#39;</span><span class=p>:</span><span class=s1>&#39;mean&#39;</span><span class=p>,</span> <span class=s1>&#39;dislikes&#39;</span><span class=p>:</span><span class=s1>&#39;mean&#39;</span><span class=p>})</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>likes</th> <th>dislikes</th> </tr> <tr> <th>feedbackType</th> <th></th> <th></th> </tr> </thead> <tbody> <tr> <th>CONGRATULATION</th> <td>30.941538</td> <td>3.824615</td> </tr> <tr> <th>CRITICISM</th> <td>11.125000</td> <td>1.562500</td> </tr> <tr> <th>INFORMATION</th> <td>18.751152</td> <td>7.657450</td> </tr> <tr> <th>OTHER</th> <td>9.325282</td> <td>3.705144</td> </tr> <tr> <th>SUGGESTION</th> <td>19.219917</td> <td>7.290456</td> </tr> </tbody> </table> </div> <div class=highlight><pre><span></span><code><span class=n>f</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=n>figsize</span> <span class=o>=</span> <span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>20</span><span class=p>),</span> <span class=n>sharex</span> <span class=o>=</span> <span class=kc>True</span><span class=p>)</span>

<span class=n>sns</span><span class=o>.</span><span class=n>boxplot</span><span class=p>(</span><span class=n>data</span> <span class=o>=</span> <span class=n>feedback</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;feedbackType&#39;</span><span class=p>,</span> <span class=s1>&#39;employee&#39;</span><span class=p>])[</span><span class=s1>&#39;commentId&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>count</span><span class=p>()</span><span class=o>.</span><span class=n>reset_index</span><span class=p>()</span><span class=o>.</span><span class=n>assign</span><span class=p>(</span>
        <span class=n>log_count_comments</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>df</span><span class=p>:</span> <span class=n>np</span><span class=o>.</span><span class=n>log10</span><span class=p>(</span><span class=n>df</span><span class=o>.</span><span class=n>commentId</span><span class=p>)</span>
    <span class=p>),</span> 
            <span class=n>x</span> <span class=o>=</span> <span class=s1>&#39;feedbackType&#39;</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=s1>&#39;log_count_comments&#39;</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>ax</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>

<span class=n>sns</span><span class=o>.</span><span class=n>boxplot</span><span class=p>(</span><span class=n>data</span> <span class=o>=</span> <span class=n>feedback</span><span class=p>,</span> <span class=n>x</span> <span class=o>=</span> <span class=s1>&#39;feedbackType&#39;</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=s1>&#39;log_comment_length&#39;</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>ax</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>

<span class=n>ax</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s1>&#39;Log of number of comments&#39;</span><span class=p>)</span>
<span class=n>ax</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s1>&#39;Log of comment length&#39;</span><span class=p>)</span>
<span class=n>ax</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s1>&#39;Number of comments and comment legth across different feedback types&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_46_0.png></p> <h3 id=feature-engineering_1>Feature engineering<a class=headerlink href=#feature-engineering_1 title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1># feature engineering on the feedback dataset</span>
<span class=n>feedback</span><span class=p>[</span><span class=s1>&#39;commentDate&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>to_datetime</span><span class=p>(</span><span class=n>feedback</span><span class=p>[</span><span class=s1>&#39;commentDate&#39;</span><span class=p>])</span>

<span class=c1># sort by date in ascending to do cumulative sum and rolling calculations</span>
<span class=n>feedback</span> <span class=o>=</span> <span class=n>feedback</span><span class=o>.</span><span class=n>sort_values</span><span class=p>([</span><span class=s1>&#39;employee&#39;</span><span class=p>,</span> <span class=s1>&#39;commentDate&#39;</span><span class=p>])</span>

<span class=c1># Count the likes and dislikes till the date given</span>
<span class=n>feedback</span><span class=p>[</span><span class=s1>&#39;likes_till_date&#39;</span><span class=p>]</span><span class=o>=</span> <span class=n>feedback</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;employee&#39;</span><span class=p>)[</span><span class=s1>&#39;likes&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>transform</span><span class=p>(</span><span class=s1>&#39;cumsum&#39;</span><span class=p>)</span>
<span class=n>feedback</span><span class=p>[</span><span class=s1>&#39;dislikes_till_date&#39;</span><span class=p>]</span><span class=o>=</span> <span class=n>feedback</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;employee&#39;</span><span class=p>)[</span><span class=s1>&#39;dislikes&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>transform</span><span class=p>(</span><span class=s1>&#39;cumsum&#39;</span><span class=p>)</span>
<span class=n>feedback</span><span class=p>[</span><span class=s1>&#39;comments_till_date&#39;</span><span class=p>]</span><span class=o>=</span> <span class=n>feedback</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;employee&#39;</span><span class=p>)[</span><span class=s1>&#39;commentId&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>transform</span><span class=p>(</span><span class=s1>&#39;cumcount&#39;</span><span class=p>)</span>

<span class=c1># Rolling two likes and dislikes, indicating the last two likes and dislikes</span>
<span class=n>feedback</span><span class=p>[</span><span class=s1>&#39;last_2_likes&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>feedback</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;employee&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>rolling</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=n>min_periods</span><span class=o>=</span><span class=mi>1</span><span class=p>)[</span><span class=s1>&#39;likes&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=nb>sum</span><span class=p>))</span>
<span class=n>feedback</span><span class=p>[</span><span class=s1>&#39;last_2_dislikes&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>feedback</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;employee&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>rolling</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=n>min_periods</span><span class=o>=</span><span class=mi>1</span><span class=p>)[</span><span class=s1>&#39;dislikes&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=nb>sum</span><span class=p>))</span>
<span class=n>feedback</span><span class=p>[</span><span class=s1>&#39;date&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>feedback</span><span class=o>.</span><span class=n>commentDate</span><span class=o>.</span><span class=n>dt</span><span class=o>.</span><span class=n>date</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=s1>&#39;datetime64[ns]&#39;</span><span class=p>)</span>
<span class=n>feedback</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>employee</th> <th>companyAlias</th> <th>commentId</th> <th>commentLength</th> <th>likes</th> <th>dislikes</th> <th>commentDate</th> <th>feedbackType</th> <th>log_comment_length</th> <th>total_interactions</th> <th>mean_feedback</th> <th>likes_till_date</th> <th>dislikes_till_date</th> <th>comments_till_date</th> <th>last_2_likes</th> <th>last_2_dislikes</th> <th>date</th> </tr> </thead> <tbody> <tr> <th>4373</th> <td>19Q</td> <td>C1</td> <td>5959ec954040610004272a21</td> <td>11</td> <td>0</td> <td>0</td> <td>2017-07-03 09:07:00</td> <td>OTHER</td> <td>1.041393</td> <td>0</td> <td>NaN</td> <td>0</td> <td>0</td> <td>0</td> <td>0.0</td> <td>0.0</td> <td>2017-07-03</td> </tr> <tr> <th>970</th> <td>19Q</td> <td>C1</td> <td>5970e1483da0e10004b17a27</td> <td>64</td> <td>3</td> <td>4</td> <td>2017-07-20 18:07:00</td> <td>OTHER</td> <td>1.806180</td> <td>7</td> <td>-0.142857</td> <td>3</td> <td>4</td> <td>1</td> <td>3.0</td> <td>4.0</td> <td>2017-07-20</td> </tr> <tr> <th>1903</th> <td>19Q</td> <td>C1</td> <td>5a36f82b26c0110004c55d90</td> <td>57</td> <td>17</td> <td>6</td> <td>2017-12-18 00:12:00</td> <td>OTHER</td> <td>1.755875</td> <td>23</td> <td>0.478261</td> <td>20</td> <td>10</td> <td>2</td> <td>20.0</td> <td>10.0</td> <td>2017-12-18</td> </tr> <tr> <th>1949</th> <td>19Q</td> <td>C1</td> <td>5a40e7d3de51cb00042dfda4</td> <td>31</td> <td>5</td> <td>0</td> <td>2017-12-25 12:12:00</td> <td>OTHER</td> <td>1.491362</td> <td>5</td> <td>1.000000</td> <td>25</td> <td>10</td> <td>3</td> <td>22.0</td> <td>6.0</td> <td>2017-12-25</td> </tr> <tr> <th>1972</th> <td>19Q</td> <td>C1</td> <td>5a4a8275eb84e0000492659f</td> <td>11</td> <td>8</td> <td>0</td> <td>2018-01-01 19:01:00</td> <td>OTHER</td> <td>1.041393</td> <td>8</td> <td>1.000000</td> <td>33</td> <td>10</td> <td>4</td> <td>13.0</td> <td>0.0</td> <td>2018-01-01</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>4740</th> <td>zRx</td> <td>C1</td> <td>5be95746ed7ae70004b83417</td> <td>11</td> <td>0</td> <td>0</td> <td>2018-11-12 11:11:00</td> <td>OTHER</td> <td>1.041393</td> <td>0</td> <td>NaN</td> <td>0</td> <td>0</td> <td>0</td> <td>0.0</td> <td>0.0</td> <td>2018-11-12</td> </tr> <tr> <th>4746</th> <td>zRx</td> <td>C1</td> <td>5be95746ed7ae70004b83415</td> <td>26</td> <td>0</td> <td>0</td> <td>2018-11-12 11:11:00</td> <td>OTHER</td> <td>1.414973</td> <td>0</td> <td>NaN</td> <td>0</td> <td>0</td> <td>1</td> <td>0.0</td> <td>0.0</td> <td>2018-11-12</td> </tr> <tr> <th>4758</th> <td>zRx</td> <td>C1</td> <td>5be95747ed7ae70004b83419</td> <td>33</td> <td>0</td> <td>0</td> <td>2018-11-12 11:11:00</td> <td>OTHER</td> <td>1.518514</td> <td>0</td> <td>NaN</td> <td>0</td> <td>0</td> <td>2</td> <td>0.0</td> <td>0.0</td> <td>2018-11-12</td> </tr> <tr> <th>4764</th> <td>zRx</td> <td>C1</td> <td>5be95746ed7ae70004b83418</td> <td>11</td> <td>0</td> <td>0</td> <td>2018-11-12 11:11:00</td> <td>OTHER</td> <td>1.041393</td> <td>0</td> <td>NaN</td> <td>0</td> <td>0</td> <td>3</td> <td>0.0</td> <td>0.0</td> <td>2018-11-12</td> </tr> <tr> <th>4781</th> <td>zRx</td> <td>C1</td> <td>5be95746ed7ae70004b83416</td> <td>8</td> <td>0</td> <td>0</td> <td>2018-11-12 11:11:00</td> <td>OTHER</td> <td>0.903090</td> <td>0</td> <td>NaN</td> <td>0</td> <td>0</td> <td>4</td> <td>0.0</td> <td>0.0</td> <td>2018-11-12</td> </tr> </tbody> </table> <p>5072 rows Ã— 17 columns</p> </div> <h2 id=merging-all-the-datasets>Merging all the datasets<a class=headerlink href=#merging-all-the-datasets title="Permanent link">&para;</a></h2> <p>Now we combine employee absenteeism data with votes and comments datasets. We have the following issues: 1. The absenteeism dataset is a subset of the data and does not cover all employees and months <br> 2. Not all employees have voted and even those who have voted infrequently<br> 3. Not all employees have commented and even those who have posted a comment posted infrequently </p> <p>So we have the following assumptions:<br> 1. We are working with the data only for the employees that exist in the absenteeism dataset<br> 2. We are assuming that the last vote of the employee talks about how the employee is today<br> 3. We are also assuming that the last comment and the likes and dislikes have an effect on the employee </p> <p>With these assumptions, we combine the datasets.</p> <div class=highlight><pre><span></span><code><span class=c1># Creating a dataframe containing the time from the start to the end of voting period</span>
<span class=n>time_dataframe</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>({</span><span class=s1>&#39;date&#39;</span><span class=p>:</span><span class=n>pd</span><span class=o>.</span><span class=n>date_range</span><span class=p>(</span><span class=nb>min</span><span class=p>(</span><span class=n>votes</span><span class=p>[</span><span class=s1>&#39;voteDate&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>date</span><span class=p>(),</span> <span class=nb>max</span><span class=p>(</span><span class=n>votes</span><span class=p>[</span><span class=s1>&#39;voteDate&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>date</span><span class=p>())})</span>
<span class=n>time_dataframe</span><span class=p>[</span><span class=s1>&#39;tmp&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span>

<span class=c1># Creating a dataframe with all employees in the absenteeism dataset</span>
<span class=n>complete_df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>({</span><span class=s1>&#39;employee&#39;</span><span class=p>:</span><span class=n>df</span><span class=o>.</span><span class=n>employee</span><span class=o>.</span><span class=n>unique</span><span class=p>()})</span>
<span class=n>complete_df</span><span class=p>[</span><span class=s1>&#39;tmp&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span>

<span class=c1># Creating a dataset that contains the combinations of all days for all employees</span>
<span class=n>complete_df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>complete_df</span><span class=p>,</span> <span class=n>time_dataframe</span><span class=p>,</span> <span class=n>on</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;tmp&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>drop</span><span class=p>(</span><span class=s1>&#39;tmp&#39;</span><span class=p>,</span> <span class=n>axis</span> <span class=o>=</span> <span class=mi>1</span><span class=p>)</span>

<span class=c1># Joining the feedback (comments) given by the employees</span>
<span class=n>complete_df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>complete_df</span><span class=p>,</span> <span class=n>feedback</span><span class=p>,</span> <span class=n>how</span> <span class=o>=</span> <span class=s1>&#39;left&#39;</span><span class=p>,</span> <span class=n>on</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=s1>&#39;employee&#39;</span><span class=p>])</span>
<span class=n>complete_df</span> <span class=o>=</span> <span class=n>complete_df</span><span class=p>[[</span><span class=s1>&#39;employee&#39;</span><span class=p>,</span> <span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=s1>&#39;likes&#39;</span><span class=p>,</span> <span class=s1>&#39;dislikes&#39;</span><span class=p>,</span> <span class=s1>&#39;feedbackType&#39;</span><span class=p>,</span> <span class=s1>&#39;likes_till_date&#39;</span><span class=p>,</span> <span class=s1>&#39;dislikes_till_date&#39;</span><span class=p>,</span> <span class=s1>&#39;last_2_likes&#39;</span><span class=p>,</span> <span class=s1>&#39;last_2_dislikes&#39;</span><span class=p>,</span> <span class=s1>&#39;commentDate&#39;</span><span class=p>]]</span>

<span class=c1># Filling the last available feedback data the days when there was no feedback data for an employee.</span>
<span class=n>complete_df</span><span class=p>[[</span><span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=s1>&#39;likes&#39;</span><span class=p>,</span> <span class=s1>&#39;dislikes&#39;</span><span class=p>,</span> <span class=s1>&#39;feedbackType&#39;</span><span class=p>,</span> <span class=s1>&#39;likes_till_date&#39;</span><span class=p>,</span> <span class=s1>&#39;dislikes_till_date&#39;</span><span class=p>,</span> <span class=s1>&#39;last_2_likes&#39;</span><span class=p>,</span> <span class=s1>&#39;last_2_dislikes&#39;</span><span class=p>,</span> <span class=s1>&#39;commentDate&#39;</span><span class=p>]]</span> <span class=o>=</span> \
    <span class=n>complete_df</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;employee&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=n>method</span><span class=o>=</span><span class=s1>&#39;ffill&#39;</span><span class=p>)</span>

<span class=c1># Creating new features</span>
<span class=n>complete_df</span><span class=p>[</span><span class=s1>&#39;days_since_last_comment&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=n>complete_df</span><span class=o>.</span><span class=n>date</span><span class=o>-</span><span class=n>complete_df</span><span class=o>.</span><span class=n>commentDate</span><span class=p>)</span>
<span class=n>complete_df</span><span class=p>[</span><span class=s1>&#39;days_since_last_comment&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=n>complete_df</span><span class=p>[</span><span class=s1>&#39;days_since_last_comment&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=n>pd</span><span class=o>.</span><span class=n>Timedelta</span><span class=p>(</span><span class=n>seconds</span><span class=o>=</span><span class=mi>0</span><span class=p>))</span><span class=o>/</span><span class=n>np</span><span class=o>.</span><span class=n>timedelta64</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;D&#39;</span><span class=p>))</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span>

<span class=c1># Assuming that for the employees that hae not commented (yet) the feedback is 0.</span>
<span class=n>complete_df</span> <span class=o>=</span> \
    <span class=n>complete_df</span><span class=p>[[</span><span class=s1>&#39;employee&#39;</span><span class=p>,</span> <span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=s1>&#39;likes&#39;</span><span class=p>,</span> <span class=s1>&#39;dislikes&#39;</span><span class=p>,</span> <span class=s1>&#39;feedbackType&#39;</span><span class=p>,</span> <span class=s1>&#39;likes_till_date&#39;</span><span class=p>,</span> <span class=s1>&#39;dislikes_till_date&#39;</span><span class=p>,</span> <span class=s1>&#39;last_2_likes&#39;</span><span class=p>,</span> <span class=s1>&#39;last_2_dislikes&#39;</span><span class=p>,</span> <span class=s1>&#39;days_since_last_comment&#39;</span><span class=p>]]</span><span class=o>.</span>\
    <span class=n>fillna</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>

<span class=c1># Joining the votes dataset fr every eployee-date</span>
<span class=n>complete_df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>complete_df</span><span class=p>,</span> <span class=n>votes</span><span class=p>,</span> <span class=n>how</span> <span class=o>=</span> <span class=s1>&#39;left&#39;</span><span class=p>,</span> <span class=n>on</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=s1>&#39;employee&#39;</span><span class=p>])</span>

<span class=c1># Filling the last available votes data the days when there was no vote for an employee.</span>
<span class=n>complete_df</span><span class=p>[[</span> <span class=s1>&#39;no_of_votes_till_date&#39;</span><span class=p>,</span><span class=s1>&#39;perc_days_voted&#39;</span><span class=p>,</span> <span class=s1>&#39;deletedOn&#39;</span><span class=p>,</span> <span class=s1>&#39;new_employee&#39;</span><span class=p>,</span> <span class=s1>&#39;min_date&#39;</span><span class=p>,</span> <span class=s1>&#39;stillExists&#39;</span><span class=p>,</span> <span class=s1>&#39;vote&#39;</span><span class=p>,</span>
             <span class=s1>&#39;avg_vote_till_date&#39;</span><span class=p>,</span> <span class=s1>&#39;avg_vote&#39;</span><span class=p>,</span><span class=s1>&#39;last_2_votes_avg&#39;</span><span class=p>,</span> <span class=s1>&#39;voteDate&#39;</span><span class=p>,</span> <span class=s1>&#39;timezone&#39;</span><span class=p>]]</span> <span class=o>=</span> \
    <span class=n>complete_df</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;employee&#39;</span><span class=p>)[[</span><span class=s1>&#39;no_of_votes_till_date&#39;</span><span class=p>,</span><span class=s1>&#39;perc_days_voted&#39;</span><span class=p>,</span> <span class=s1>&#39;deletedOn&#39;</span><span class=p>,</span> <span class=s1>&#39;new_employee&#39;</span><span class=p>,</span> <span class=s1>&#39;min_date&#39;</span><span class=p>,</span> <span class=s1>&#39;stillExists&#39;</span><span class=p>,</span> <span class=s1>&#39;vote&#39;</span><span class=p>,</span>
                                     <span class=s1>&#39;avg_vote_till_date&#39;</span><span class=p>,</span> <span class=s1>&#39;avg_vote&#39;</span><span class=p>,</span><span class=s1>&#39;last_2_votes_avg&#39;</span><span class=p>,</span> <span class=s1>&#39;voteDate&#39;</span><span class=p>,</span> <span class=s1>&#39;timezone&#39;</span><span class=p>]]</span><span class=o>.</span>\
    <span class=n>fillna</span><span class=p>(</span><span class=n>method</span><span class=o>=</span><span class=s1>&#39;ffill&#39;</span><span class=p>)</span>

<span class=c1># Remove the data before the employee joined</span>
<span class=n>complete_df</span> <span class=o>=</span> <span class=n>complete_df</span><span class=p>[</span><span class=n>complete_df</span><span class=o>.</span><span class=n>avg_vote</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>]</span>

<span class=c1># Remove data after employee left</span>
<span class=n>complete_df</span> <span class=o>=</span> <span class=n>complete_df</span><span class=p>[(</span><span class=n>complete_df</span><span class=o>.</span><span class=n>stillExists</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span> <span class=o>|</span> <span class=p>((</span><span class=n>complete_df</span><span class=o>.</span><span class=n>stillExists</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=o>&amp;</span> <span class=p>(</span><span class=n>complete_df</span><span class=o>.</span><span class=n>date</span> <span class=o>&lt;=</span> <span class=n>complete_df</span><span class=o>.</span><span class=n>deletedOn</span><span class=p>))]</span>

<span class=c1># Recomputing no_of_days_since_first_vote</span>
<span class=n>complete_df</span><span class=o>.</span><span class=n>no_of_days_since_first_vote</span> <span class=o>=</span> <span class=p>((</span><span class=n>complete_df</span><span class=o>.</span><span class=n>date</span> <span class=o>-</span> <span class=n>complete_df</span><span class=o>.</span><span class=n>min_date</span><span class=p>)</span><span class=o>/</span><span class=n>np</span><span class=o>.</span><span class=n>timedelta64</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;D&#39;</span><span class=p>))</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span><span class=o>+</span><span class=mi>1</span>

<span class=c1># Adding new features</span>
<span class=c1># assuming a 60 day notice period</span>
<span class=c1># 60 days before the employee leaves are recorded</span>
<span class=n>complete_df</span><span class=o>.</span><span class=n>deletedOn</span> <span class=o>=</span> <span class=n>complete_df</span><span class=o>.</span><span class=n>deletedOn</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=n>pd</span><span class=o>.</span><span class=n>to_datetime</span><span class=p>(</span><span class=n>date</span><span class=o>.</span><span class=n>today</span><span class=p>()))</span>
<span class=n>complete_df</span><span class=p>[</span><span class=s1>&#39;countdown_to_last_day&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>((</span><span class=n>complete_df</span><span class=o>.</span><span class=n>date</span> <span class=o>-</span> <span class=n>complete_df</span><span class=o>.</span><span class=n>deletedOn</span><span class=p>)</span><span class=o>/</span><span class=n>np</span><span class=o>.</span><span class=n>timedelta64</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;D&#39;</span><span class=p>))</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span><span class=o>+</span><span class=mi>1</span>
<span class=n>complete_df</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>complete_df</span><span class=o>.</span><span class=n>countdown_to_last_day</span> <span class=o>&lt;</span> <span class=o>-</span><span class=mi>15</span><span class=p>,</span> <span class=s1>&#39;countdown_to_last_day&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=mi>999</span>

<span class=c1># computing days since last vote</span>
<span class=n>complete_df</span><span class=p>[</span><span class=s1>&#39;days_since_last_vote&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=n>complete_df</span><span class=o>.</span><span class=n>date</span><span class=o>-</span><span class=n>complete_df</span><span class=o>.</span><span class=n>voteDate</span><span class=p>)</span>
<span class=n>complete_df</span><span class=p>[</span><span class=s1>&#39;days_since_last_vote&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=n>complete_df</span><span class=p>[</span><span class=s1>&#39;days_since_last_vote&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=n>pd</span><span class=o>.</span><span class=n>Timedelta</span><span class=p>(</span><span class=n>seconds</span><span class=o>=</span><span class=mi>0</span><span class=p>))</span><span class=o>/</span><span class=n>np</span><span class=o>.</span><span class=n>timedelta64</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;D&#39;</span><span class=p>))</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span>

<span class=c1># Imputing still exists column</span>
<span class=n>complete_df</span><span class=p>[[</span><span class=s1>&#39;timezone&#39;</span><span class=p>,</span> <span class=s1>&#39;stillExists&#39;</span><span class=p>]]</span> <span class=o>=</span> <span class=n>complete_df</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;employee&#39;</span><span class=p>)[[</span><span class=s1>&#39;timezone&#39;</span><span class=p>,</span> <span class=s1>&#39;stillExists&#39;</span><span class=p>]]</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=n>method</span> <span class=o>=</span> <span class=s1>&#39;bfill&#39;</span><span class=p>)</span>

<span class=c1># Selecting the features used in the model</span>
<span class=n>complete_df</span> <span class=o>=</span> <span class=n>complete_df</span><span class=p>[</span>
    <span class=p>[</span><span class=s1>&#39;employee&#39;</span><span class=p>,</span> <span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=s1>&#39;likes&#39;</span><span class=p>,</span> <span class=s1>&#39;dislikes&#39;</span><span class=p>,</span> <span class=s1>&#39;feedbackType&#39;</span><span class=p>,</span> 
     <span class=s1>&#39;likes_till_date&#39;</span><span class=p>,</span> <span class=s1>&#39;dislikes_till_date&#39;</span><span class=p>,</span> <span class=s1>&#39;last_2_likes&#39;</span><span class=p>,</span> <span class=s1>&#39;last_2_dislikes&#39;</span><span class=p>,</span> 
     <span class=s1>&#39;days_since_last_comment&#39;</span><span class=p>,</span> <span class=s1>&#39;vote&#39;</span><span class=p>,</span> <span class=s1>&#39;timezone&#39;</span><span class=p>,</span> <span class=s1>&#39;stillExists&#39;</span><span class=p>,</span>
       <span class=s1>&#39;no_of_days_since_first_vote&#39;</span><span class=p>,</span> <span class=s1>&#39;no_of_votes_till_date&#39;</span><span class=p>,</span>
       <span class=s1>&#39;perc_days_voted&#39;</span><span class=p>,</span> <span class=s1>&#39;avg_vote_till_date&#39;</span><span class=p>,</span> <span class=s1>&#39;avg_vote&#39;</span><span class=p>,</span> <span class=s1>&#39;last_2_votes_avg&#39;</span><span class=p>,</span>
       <span class=s1>&#39;days_since_last_vote&#39;</span><span class=p>,</span> <span class=s1>&#39;new_employee&#39;</span><span class=p>,</span> <span class=s1>&#39;countdown_to_last_day&#39;</span><span class=p>]]</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=n>pd</span><span class=o>.</span><span class=n>options</span><span class=o>.</span><span class=n>display</span><span class=o>.</span><span class=n>max_columns</span> <span class=o>=</span> <span class=kc>None</span>

<span class=c1># Combining the leaves dataset</span>
<span class=n>data</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>complete_df</span><span class=p>,</span> <span class=n>leave_df</span><span class=p>,</span> <span class=n>how</span> <span class=o>=</span> <span class=s1>&#39;left&#39;</span><span class=p>,</span> <span class=n>on</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=s1>&#39;employee&#39;</span><span class=p>])</span>
<span class=n>data</span><span class=o>.</span><span class=n>on_leave</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>on_leave</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>

<span class=c1># Creating new columns</span>
<span class=n>data</span><span class=o>.</span><span class=n>no_leaves_till_date</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>no_leaves_till_date</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=n>method</span> <span class=o>=</span> <span class=s1>&#39;bfill&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=n>method</span> <span class=o>=</span> <span class=s1>&#39;ffill&#39;</span><span class=p>)</span>

<span class=c1># Get the number of days the person was on leave in the last two days</span>
<span class=k>def</span> <span class=nf>get_rolling_sum</span><span class=p>(</span><span class=n>grp</span><span class=p>,</span> <span class=n>freq</span><span class=p>,</span> <span class=n>col</span><span class=p>):</span>
    <span class=k>return</span><span class=p>(</span><span class=n>grp</span><span class=o>.</span><span class=n>rolling</span><span class=p>(</span><span class=n>freq</span><span class=p>,</span> <span class=n>on</span><span class=o>=</span><span class=s1>&#39;date&#39;</span><span class=p>)[</span><span class=n>col</span><span class=p>]</span><span class=o>.</span><span class=n>sum</span><span class=p>())</span>
<span class=n>data</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>sort_values</span><span class=p>([</span><span class=s1>&#39;employee&#39;</span><span class=p>,</span> <span class=s1>&#39;date&#39;</span><span class=p>])</span>
<span class=n>data</span><span class=p>[</span><span class=s1>&#39;last_2_days_leaves&#39;</span><span class=p>]</span>  <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;employee&#39;</span><span class=p>,</span> <span class=n>as_index</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span> <span class=n>group_keys</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span><span class=o>.</span>\
    <span class=n>apply</span><span class=p>(</span><span class=n>get_rolling_sum</span><span class=p>,</span> <span class=s1>&#39;2D&#39;</span><span class=p>,</span> <span class=s1>&#39;on_leave&#39;</span><span class=p>)</span> <span class=c1># 2d for 2 days</span>

<span class=c1># Get the leave status of the previous day</span>
<span class=n>data</span><span class=p>[</span><span class=s1>&#39;previous_day_leave&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;employee&#39;</span><span class=p>)[</span><span class=s1>&#39;on_leave&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>shift</span><span class=p>()</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>

<span class=c1># Renaming columns to more suitable ones</span>
<span class=n>data</span><span class=o>.</span><span class=n>rename</span><span class=p>(</span><span class=n>columns</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;likes&quot;</span><span class=p>:</span> <span class=s2>&quot;last_likes&quot;</span><span class=p>,</span> <span class=s2>&quot;dislikes&quot;</span><span class=p>:</span> <span class=s2>&quot;last_dislikes&quot;</span><span class=p>,</span> <span class=s2>&quot;feedback_type&quot;</span><span class=p>:</span><span class=s2>&quot;last_feedback_type&quot;</span><span class=p>,</span>
                    <span class=s2>&quot;vote&quot;</span><span class=p>:</span><span class=s2>&quot;last_vote&quot;</span><span class=p>,</span> <span class=s2>&quot;new_employee&quot;</span><span class=p>:</span><span class=s2>&quot;employee_joined_after_jun17&quot;</span><span class=p>},</span> <span class=n>inplace</span> <span class=o>=</span> <span class=kc>True</span><span class=p>)</span>
</code></pre></div> <p>The correlation matrix for all the columns is</p> <div class=highlight><pre><span></span><code><span class=n>red_green_cmap</span> <span class=o>=</span> <span class=n>sns</span><span class=o>.</span><span class=n>diverging_palette</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>133</span><span class=p>,</span><span class=n>as_cmap</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>

<span class=n>f</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>figure</span><span class=p>(</span><span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>20</span><span class=p>,</span> <span class=mi>20</span><span class=p>))</span>
<span class=n>plt</span><span class=o>.</span><span class=n>matshow</span><span class=p>(</span><span class=n>data</span><span class=o>.</span><span class=n>corr</span><span class=p>(),</span> <span class=n>fignum</span> <span class=o>=</span> <span class=n>f</span><span class=p>,</span> <span class=n>cmap</span> <span class=o>=</span> <span class=n>red_green_cmap</span><span class=p>,</span> <span class=n>vmin</span><span class=o>=-</span><span class=mi>1</span><span class=p>,</span> <span class=n>vmax</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>xticks</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=n>data</span><span class=o>.</span><span class=n>select_dtypes</span><span class=p>([</span><span class=s1>&#39;number&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>1</span><span class=p>]),</span> 
           <span class=n>data</span><span class=o>.</span><span class=n>select_dtypes</span><span class=p>([</span><span class=s1>&#39;number&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>columns</span><span class=p>,</span> <span class=n>rotation</span><span class=o>=</span><span class=mi>90</span><span class=p>,</span> <span class=n>fontsize</span> <span class=o>=</span> <span class=mi>15</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>yticks</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=n>data</span><span class=o>.</span><span class=n>select_dtypes</span><span class=p>([</span><span class=s1>&#39;number&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>1</span><span class=p>]),</span> 
           <span class=n>data</span><span class=o>.</span><span class=n>select_dtypes</span><span class=p>([</span><span class=s1>&#39;number&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>columns</span><span class=p>,</span> <span class=n>rotation</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>fontsize</span> <span class=o>=</span> <span class=mi>15</span><span class=p>)</span>
<span class=n>cb</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>colorbar</span><span class=p>()</span>
<span class=n>cb</span><span class=o>.</span><span class=n>ax</span><span class=o>.</span><span class=n>tick_params</span><span class=p>(</span><span class=n>labelsize</span><span class=o>=</span><span class=mi>14</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s2>&quot;Correlation between different parameters&quot;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span><span class=n>loc</span><span class=o>=</span><span class=s1>&#39;left&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_53_0.png></p> <p>The distributions across all the columns are</p> <div class=highlight><pre><span></span><code><span class=n>_</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>hist</span><span class=p>(</span><span class=n>figsize</span> <span class=o>=</span> <span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>20</span><span class=p>))</span>
</code></pre></div> <p><img alt=png src=output_55_0.png></p> <h2 id=date-as-a-predictor-variable>Date as a predictor variable<a class=headerlink href=#date-as-a-predictor-variable title="Permanent link">&para;</a></h2> <p>We have previously seen that most leaves are applied either on the first of the month or on the last of the month. This indicates that the day of the week, month and other date characteristics are also significant.</p> <div class=highlight><pre><span></span><code><span class=n>day_name</span><span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Monday&#39;</span><span class=p>,</span> <span class=s1>&#39;Tuesday&#39;</span><span class=p>,</span> <span class=s1>&#39;Wednesday&#39;</span><span class=p>,</span> <span class=s1>&#39;Thursday&#39;</span><span class=p>,</span> <span class=s1>&#39;Friday&#39;</span><span class=p>,</span> <span class=s1>&#39;Saturday&#39;</span><span class=p>,</span><span class=s1>&#39;Sunday&#39;</span><span class=p>]</span>
<span class=n>month_name</span> <span class=o>=</span> <span class=p>[</span><span class=kc>None</span><span class=p>,</span> <span class=s1>&#39;Jan&#39;</span><span class=p>,</span> <span class=s1>&#39;Feb&#39;</span><span class=p>,</span> <span class=s1>&#39;Mar&#39;</span><span class=p>,</span> <span class=s1>&#39;Apr&#39;</span><span class=p>,</span> <span class=s1>&#39;May&#39;</span><span class=p>,</span> <span class=s1>&#39;Jun&#39;</span><span class=p>,</span> <span class=s1>&#39;Jul&#39;</span><span class=p>,</span> <span class=s1>&#39;Aug&#39;</span><span class=p>,</span> <span class=s1>&#39;Sep&#39;</span><span class=p>,</span> <span class=s1>&#39;Oct&#39;</span><span class=p>,</span> <span class=s1>&#39;Nov&#39;</span><span class=p>,</span> <span class=s1>&#39;Dec&#39;</span><span class=p>]</span>
<span class=n>data</span><span class=p>[</span><span class=s1>&#39;weekday&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>date</span><span class=o>.</span><span class=n>dt</span><span class=o>.</span><span class=n>weekday</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span><span class=n>day_name</span><span class=p>[</span><span class=n>x</span><span class=p>])</span>
<span class=n>data</span><span class=p>[</span><span class=s1>&#39;month&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>date</span><span class=o>.</span><span class=n>dt</span><span class=o>.</span><span class=n>month</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span><span class=n>month_name</span><span class=p>[</span><span class=n>x</span><span class=p>])</span>
<span class=n>data</span><span class=p>[</span><span class=s1>&#39;week&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>date</span><span class=o>.</span><span class=n>dt</span><span class=o>.</span><span class=n>day</span> <span class=o>%</span> <span class=mi>7</span> <span class=c1># Which week in the month</span>
<span class=n>data</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>employee</th> <th>date</th> <th>last_likes</th> <th>last_dislikes</th> <th>feedbackType</th> <th>likes_till_date</th> <th>dislikes_till_date</th> <th>last_2_likes</th> <th>last_2_dislikes</th> <th>days_since_last_comment</th> <th>last_vote</th> <th>timezone</th> <th>stillExists</th> <th>no_of_days_since_first_vote</th> <th>no_of_votes_till_date</th> <th>perc_days_voted</th> <th>avg_vote_till_date</th> <th>avg_vote</th> <th>last_2_votes_avg</th> <th>days_since_last_vote</th> <th>employee_joined_after_jun17</th> <th>countdown_to_last_day</th> <th>reason</th> <th>on_leave</th> <th>no_leaves_till_date</th> <th>last_2_days_leaves</th> <th>previous_day_leave</th> <th>weekday</th> <th>month</th> <th>day</th> <th>week</th> </tr> </thead> <tbody> <tr> <th>23729</th> <td>17r</td> <td>2018-05-29</td> <td>0.0</td> <td>0.0</td> <td>0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0</td> <td>3.0</td> <td>Europe/Madrid</td> <td>1.0</td> <td>1</td> <td>1.0</td> <td>1.000000</td> <td>3.000000</td> <td>2.121212</td> <td>3.0</td> <td>0</td> <td>1.0</td> <td>999</td> <td>NaN</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>Tuesday</td> <td>May</td> <td>29</td> <td>1</td> </tr> <tr> <th>23730</th> <td>17r</td> <td>2018-05-30</td> <td>0.0</td> <td>0.0</td> <td>0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0</td> <td>3.0</td> <td>Europe/Madrid</td> <td>1.0</td> <td>1</td> <td>1.0</td> <td>1.000000</td> <td>3.000000</td> <td>2.121212</td> <td>3.0</td> <td>0</td> <td>1.0</td> <td>999</td> <td>NaN</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>Wednesday</td> <td>May</td> <td>30</td> <td>2</td> </tr> <tr> <th>23731</th> <td>17r</td> <td>2018-05-31</td> <td>0.0</td> <td>0.0</td> <td>0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0</td> <td>3.0</td> <td>Europe/Madrid</td> <td>1.0</td> <td>2</td> <td>1.0</td> <td>1.000000</td> <td>3.000000</td> <td>2.121212</td> <td>3.0</td> <td>1</td> <td>1.0</td> <td>999</td> <td>NaN</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>Thursday</td> <td>May</td> <td>31</td> <td>3</td> </tr> <tr> <th>23732</th> <td>17r</td> <td>2018-06-01</td> <td>0.0</td> <td>0.0</td> <td>0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0</td> <td>3.0</td> <td>Europe/Madrid</td> <td>1.0</td> <td>3</td> <td>2.0</td> <td>0.500000</td> <td>3.000000</td> <td>2.121212</td> <td>3.0</td> <td>0</td> <td>1.0</td> <td>999</td> <td>NaN</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>Friday</td> <td>Jun</td> <td>1</td> <td>1</td> </tr> <tr> <th>23733</th> <td>17r</td> <td>2018-06-02</td> <td>0.0</td> <td>0.0</td> <td>0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0</td> <td>3.0</td> <td>Europe/Madrid</td> <td>1.0</td> <td>4</td> <td>2.0</td> <td>0.500000</td> <td>3.000000</td> <td>2.121212</td> <td>3.0</td> <td>0</td> <td>1.0</td> <td>999</td> <td>NaN</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>Saturday</td> <td>Jun</td> <td>2</td> <td>2</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>32232</th> <td>zGB</td> <td>2019-03-07</td> <td>24.0</td> <td>8.0</td> <td>OTHER</td> <td>24.0</td> <td>8.0</td> <td>24.0</td> <td>8.0</td> <td>299</td> <td>3.0</td> <td>Europe/Madrid</td> <td>1.0</td> <td>639</td> <td>66.0</td> <td>0.109272</td> <td>3.015152</td> <td>3.015152</td> <td>3.0</td> <td>34</td> <td>0.0</td> <td>999</td> <td>NaN</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>Thursday</td> <td>Mar</td> <td>7</td> <td>0</td> </tr> <tr> <th>32233</th> <td>zGB</td> <td>2019-03-08</td> <td>24.0</td> <td>8.0</td> <td>OTHER</td> <td>24.0</td> <td>8.0</td> <td>24.0</td> <td>8.0</td> <td>300</td> <td>3.0</td> <td>Europe/Madrid</td> <td>1.0</td> <td>640</td> <td>66.0</td> <td>0.109272</td> <td>3.015152</td> <td>3.015152</td> <td>3.0</td> <td>35</td> <td>0.0</td> <td>999</td> <td>NaN</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>Friday</td> <td>Mar</td> <td>8</td> <td>1</td> </tr> <tr> <th>32234</th> <td>zGB</td> <td>2019-03-09</td> <td>24.0</td> <td>8.0</td> <td>OTHER</td> <td>24.0</td> <td>8.0</td> <td>24.0</td> <td>8.0</td> <td>301</td> <td>3.0</td> <td>Europe/Madrid</td> <td>1.0</td> <td>641</td> <td>66.0</td> <td>0.109272</td> <td>3.015152</td> <td>3.015152</td> <td>3.0</td> <td>36</td> <td>0.0</td> <td>999</td> <td>NaN</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>Saturday</td> <td>Mar</td> <td>9</td> <td>2</td> </tr> <tr> <th>32235</th> <td>zGB</td> <td>2019-03-10</td> <td>24.0</td> <td>8.0</td> <td>OTHER</td> <td>24.0</td> <td>8.0</td> <td>24.0</td> <td>8.0</td> <td>302</td> <td>3.0</td> <td>Europe/Madrid</td> <td>1.0</td> <td>642</td> <td>66.0</td> <td>0.109272</td> <td>3.015152</td> <td>3.015152</td> <td>3.0</td> <td>37</td> <td>0.0</td> <td>999</td> <td>NaN</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>Sunday</td> <td>Mar</td> <td>10</td> <td>3</td> </tr> <tr> <th>32236</th> <td>zGB</td> <td>2019-03-11</td> <td>24.0</td> <td>8.0</td> <td>OTHER</td> <td>24.0</td> <td>8.0</td> <td>24.0</td> <td>8.0</td> <td>303</td> <td>3.0</td> <td>Europe/Madrid</td> <td>1.0</td> <td>643</td> <td>66.0</td> <td>0.109272</td> <td>3.015152</td> <td>3.015152</td> <td>3.0</td> <td>38</td> <td>0.0</td> <td>999</td> <td>NaN</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>0.0</td> <td>Monday</td> <td>Mar</td> <td>11</td> <td>4</td> </tr> </tbody> </table> <p>33451 rows Ã— 31 columns</p> </div> <p>The second part of the blog is <a href=../ML%20using%20scikit-learn/ >here</a>. </p> <h2 id=references>References<a class=headerlink href=#references title="Permanent link">&para;</a></h2> <ol> <li>Notes and lectures, Workforce Analytics module, MSc Business analytics, Imperial College London, Class 2020-22 </li> <li>Kyburz J, Morelli D, Schaaf A, Villani F, Wheatley D: <em>Predicting absenteeism</em> </li> <li>Harsha A, Shaked A, Artem G, Tebogo M, Gokhan M: <em>Predicting absenteeism</em> Workforce Analytics module </li> <li>Bebenroth, R., &amp; Berengueres, J. O. (2020). New hires' job satisfaction time trajectory. International Journal of Human Resources Development and Management, 20(1), 61-74. </li> </ol> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../R/KNN_Imputation/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Null Value Imputation (R)" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Null Value Imputation (R) </div> </div> </a> <a href=../../R/Handling-Imbalanced-classes/ class="md-footer__link md-footer__link--next" aria-label="Next: Handling Imbalanced Classes" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Handling Imbalanced Classes </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> <img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by/4.0/88x31.png> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/HarshaAsh target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://www.linkedin.com/in/sri-harsha-achyuthuni/ target=_blank rel=noopener title=www.linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://www.instagram.com/harshaash_com/ target=_blank rel=noopener title=www.instagram.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg> </a> <a href=https://www.facebook.com/sri.harsha.achyuthuni/ target=_blank rel=noopener title=www.facebook.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.tabs.link", "header.autohide", "navigation.sections", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../../assets/javascripts/workers/search.709b4209.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.56838a2c.min.js></script> </body> </html>