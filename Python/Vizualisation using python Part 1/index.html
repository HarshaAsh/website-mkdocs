<!doctype html><html lang=en class=no-js> <head><!-- Code from google optimiser --><script src="https://www.googleoptimize.com/optimize.js?id=OPT-M98W6LW"></script><!-- Code from Mouseflow --><script type=text/javascript>
      window._mfq = window._mfq || [];
      (function() {
        var mf = document.createElement("script");
        mf.type = "text/javascript"; mf.defer = true;
        mf.src = "//cdn.mouseflow.com/projects/7b4494c9-7974-49f0-9777-d14450db37e6.js";
        document.getElementsByTagName("head")[0].appendChild(mf);
      })();
    </script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Harsha's notes on data science"><meta name=author content="Harsha Achyuthuni"><link href=https://www.harshaash.com/Python/Vizualisation%20using%20python%20Part%201/ rel=canonical><link rel=icon href=../../assets/images/logo.jpg><meta name=generator content="mkdocs-1.5.0, mkdocs-material-7.2.4"><title>Vizualizing tabular data (Python) - Data Science with Harsha</title><link rel=stylesheet href=../../assets/stylesheets/main.f7f47774.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.3f5d1f46.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=../../overrides/assets/stylesheets/user_defined.css><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-65034507-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-scheme data-md-color-primary data-md-color-accent> <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#visualizalising-tabular-data class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Data Science with Harsha" class="md-header__button md-logo" aria-label="Data Science with Harsha" data-md-component=logo> <img src=../../assets/images/logo.jpg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Data Science with Harsha </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Vizualizing tabular data (Python) </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme data-md-color-primary data-md-color-accent aria-hidden=true type=radio name=__palette id=__palette_1> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme data-md-color-primary data-md-color-accent aria-hidden=true type=radio name=__palette id=__palette_3> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_4> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_3 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Data Science with Harsha" class="md-nav__button md-logo" aria-label="Data Science with Harsha" data-md-component=logo> <img src=../../assets/images/logo.jpg alt=logo> </a> Data Science with Harsha </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../../resume/ class=md-nav__link> Resume </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> Blog <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Blog data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_1 type=checkbox id=__nav_3_1 checked> <label class=md-nav__link for=__nav_3_1> Visualization <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Visualization data-md-level=2> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Visualization </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Vizualizing tabular data (Python) <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Vizualizing tabular data (Python) </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#scatter-plot class=md-nav__link> Scatter plot </a> </li> <li class=md-nav__item> <a href=#sunburst-and-pie-charts class=md-nav__link> Sunburst and pie charts </a> </li> <li class=md-nav__item> <a href=#parallel-coordinates class=md-nav__link> Parallel Coordinates </a> </li> <li class=md-nav__item> <a href=#bar-chart-and-steam-graphs class=md-nav__link> Bar chart and Steam graphs </a> </li> <li class=md-nav__item> <a href=#heatmap class=md-nav__link> Heatmap </a> </li> <li class=md-nav__item> <a href=#treemap class=md-nav__link> Treemap </a> </li> <li class=md-nav__item> <a href=#word-cloud class=md-nav__link> Word cloud </a> </li> <li class=md-nav__item> <a href=#correlation-matrix class=md-nav__link> Correlation matrix </a> </li> <li class=md-nav__item> <a href=#scatterplot-matrix class=md-nav__link> Scatterplot matrix </a> </li> <li class=md-nav__item> <a href=#boxplot-and-violin-chart class=md-nav__link> Boxplot and Violin chart </a> </li> <li class=md-nav__item> <a href=#cluster-map class=md-nav__link> Cluster map </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> References </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Visualization%20for%20predictive%20analytics/ class=md-nav__link> Vizualising for predictive analytics (Python) </a> </li> <li class=md-nav__item> <a href=../../R/Univariate-analysis/ class=md-nav__link> Univariate Analysis (R) </a> </li> <li class=md-nav__item> <a href=../../R/multivariateAnalysis/ class=md-nav__link> Multivariate Analysis (R) </a> </li> <li class=md-nav__item> <a href=../../R/multicollinearity/ class=md-nav__link> Multicollinearity (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2> Statistics basics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Statistics basics" data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Statistics basics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/Probability/ class=md-nav__link> Probability (R) </a> </li> <li class=md-nav__item> <a href=../../R/vectors/ class=md-nav__link> Vectors (R) </a> </li> <li class=md-nav__item> <a href=../../R/matrices/ class=md-nav__link> Matrices (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3> Hypothesis Testing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Hypothesis Testing" data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Hypothesis Testing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/attendance_t_test/ class=md-nav__link> z-test and t-test (R) </a> </li> <li class=md-nav__item> <a href=../../R/anova/ class=md-nav__link> ANOVA Test (R) </a> </li> <li class=md-nav__item> <a href=../../R/chi-sq-goodness-of-fit/ class=md-nav__link> Chi-Square Goodness of fit (R) </a> </li> <li class=md-nav__item> <a href=../../R/chi-sq-test-of-independence/ class=md-nav__link> Chi-Square test of independence (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4> Factor Analysis <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Factor Analysis" data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Factor Analysis </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/Curse-of-Dimensionality/ class=md-nav__link> Curse of dimensionality </a> </li> <li class=md-nav__item> <a href=../../R/EFA/ class=md-nav__link> Exploratory factor analysis (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_5 type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5> Prediction algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Prediction algorithms" data-md-level=2> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Prediction algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_5_1 type=checkbox id=__nav_3_5_1> <label class=md-nav__link for=__nav_3_5_1> Classification Algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Classification Algorithms" data-md-level=3> <label class=md-nav__title for=__nav_3_5_1> <span class="md-nav__icon md-icon"></span> Classification Algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/logistic-regression/ class=md-nav__link> Logistic Regression (R) </a> </li> <li class=md-nav__item> <a href=../../R/CHAID/ class=md-nav__link> CHAID Decision Trees (R) </a> </li> <li class=md-nav__item> <a href=../../R/CART-Classification/ class=md-nav__link> CART Classification (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_5_2 type=checkbox id=__nav_3_5_2> <label class=md-nav__link for=__nav_3_5_2> Regression Algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Regression Algorithms" data-md-level=3> <label class=md-nav__title for=__nav_3_5_2> <span class="md-nav__icon md-icon"></span> Regression Algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/part-and-partial-corr/ class=md-nav__link> Part and partial correlation </a> </li> <li class=md-nav__item> <a href=../../R/Linear-regression/ class=md-nav__link> Linear Regression (R) </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_6 type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6> Preprocessing data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Preprocessing data" data-md-level=2> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Preprocessing data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/KNN_Imputation/ class=md-nav__link> Null Value Imputation (R) </a> </li> <li class=md-nav__item> <a href=../Machine%20Learning%20Part%201/ class=md-nav__link> Feature engineering (Python) </a> </li> <li class=md-nav__item> <a href=../../R/Handling-Imbalanced-classes/ class=md-nav__link> Handling Imbalanced Classes </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_7 type=checkbox id=__nav_3_7> <label class=md-nav__link for=__nav_3_7> Machine Learning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Machine Learning" data-md-level=2> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Machine Learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://harshaachyuthuni.shinyapps.io/Machine_Learning/ class=md-nav__link> Interactive Machine Learning (RShiny) </a> </li> <li class=md-nav__item> <a href=../ML%20using%20scikit-learn/ class=md-nav__link> ML using scikit-learn (Python) </a> </li> <li class=md-nav__item> <a href=../Demonstrating%20online%20learning/ class=md-nav__link> Streaming Machine Learning (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_8 type=checkbox id=__nav_3_8> <label class=md-nav__link for=__nav_3_8> Time Series forecasting <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Time Series forecasting" data-md-level=2> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Time Series forecasting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/time-series/ class=md-nav__link> Introduction to stationarity (R) </a> </li> <li class=md-nav__item> <a href=../../R/Stationarity-tests/ class=md-nav__link> Stationary Tests (R) </a> </li> <li class=md-nav__item> <a href=../../R/ARIMA/ class=md-nav__link> ARIMA in R </a> </li> <li class=md-nav__item> <a href=../ARIMA%20Forecasting/ class=md-nav__link> ARIMA in Python </a> </li> <li class=md-nav__item> <a href=../../R/Seasonal-Time-Series/ class=md-nav__link> Seasonal time series (R) </a> </li> <li class=md-nav__item> <a href=../../R/VAR-models/ class=md-nav__link> VAR Models (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_9 type=checkbox id=__nav_3_9> <label class=md-nav__link for=__nav_3_9> Deep learning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Deep learning" data-md-level=2> <label class=md-nav__title for=__nav_3_9> <span class="md-nav__icon md-icon"></span> Deep learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/ANN-1/ class=md-nav__link> Artificial Neural Network (Theory) </a> </li> <li class=md-nav__item> <a href=../../R/ANN2/ class=md-nav__link> The math behind ANN </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_10 type=checkbox id=__nav_3_10> <label class=md-nav__link for=__nav_3_10> Prescriptive Analytics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Prescriptive Analytics" data-md-level=2> <label class=md-nav__title for=__nav_3_10> <span class="md-nav__icon md-icon"></span> Prescriptive Analytics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/Linear-programming/ class=md-nav__link> Linear Programming (R) </a> </li> <li class=md-nav__item> <a href=../../R/adoption_of_new_product/ class=md-nav__link> Adoption of new product (R) </a> </li> <li class=md-nav__item> <a href=../Diffusion%20on%20networks/ class=md-nav__link> Bass Forecasting model (Python) </a> </li> <li class=md-nav__item> <a href=../../Others/AHP/ class=md-nav__link> Analytic Hierarchy Process </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_11 type=checkbox id=__nav_3_11> <label class=md-nav__link for=__nav_3_11> Clustering <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Clustering data-md-level=2> <label class=md-nav__title for=__nav_3_11> <span class="md-nav__icon md-icon"></span> Clustering </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/hierarchical_clustering/ class=md-nav__link> Hierarchical Clustering </a> </li> <li class=md-nav__item> <a href=../../R/kMeansClustering/ class=md-nav__link> K-Means Clustering </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_12 type=checkbox id=__nav_3_12> <label class=md-nav__link for=__nav_3_12> Reinforcement Learning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Reinforcement Learning" data-md-level=2> <label class=md-nav__title for=__nav_3_12> <span class="md-nav__icon md-icon"></span> Reinforcement Learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/CustomerLifetimeValue/ class=md-nav__link> Customer Lifetime Value </a> </li> <li class=md-nav__item> <a href=../../R/recommendation-systems/ class=md-nav__link> Recommendation Systems (R) </a> </li> <li class=md-nav__item> <a href=../Neural_collaborative_filtering/ class=md-nav__link> Collaborative Filtering (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_13 type=checkbox id=__nav_3_13> <label class=md-nav__link for=__nav_3_13> Networks <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Networks data-md-level=2> <label class=md-nav__title for=__nav_3_13> <span class="md-nav__icon md-icon"></span> Networks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Introduction%20to%20Networkx/ class=md-nav__link> Introduction to NetworkX (Python) </a> </li> <li class=md-nav__item> <a href=../Network%20Science/ class=md-nav__link> Network Science (Python) </a> </li> <li class=md-nav__item> <a href=../Network%20centrality/ class=md-nav__link> Network Centrality (Python) </a> </li> <li class=md-nav__item> <a href=../Shortest%20path%20problems/ class=md-nav__link> Shortest path using integer programming (Python) </a> </li> <li class=md-nav__item> <a href=../Network%20Flow%20problems/ class=md-nav__link> Network flow problems (Python) </a> </li> <li class=md-nav__item> <a href=../Community%20detection/ class=md-nav__link> Community detection (Python) </a> </li> <li class=md-nav__item> <a href=../Bipartite%20matching/ class=md-nav__link> Bipartite matching (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_14 type=checkbox id=__nav_3_14> <label class=md-nav__link for=__nav_3_14> Deployment <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Deployment data-md-level=2> <label class=md-nav__title for=__nav_3_14> <span class="md-nav__icon md-icon"></span> Deployment </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Machine%20learning%20as%20HTTP%20Request/ class=md-nav__link> ML deployment in Flask (Python) </a> </li> <li class=md-nav__item> <a href=../Saving%20predictions%20in%20database/ class=md-nav__link> Handling databases using python </a> </li> <li class=md-nav__item> <a href=../ORM/ class=md-nav__link> ORM (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_15 type=checkbox id=__nav_3_15> <label class=md-nav__link for=__nav_3_15> Higher education review <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Higher education review" data-md-level=2> <label class=md-nav__title for=__nav_3_15> <span class="md-nav__icon md-icon"></span> Higher education review </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/IIMB%20BAI/ class=md-nav__link> IIMB BAI </a> </li> <li class=md-nav__item> <a href=../../Others/part%20time%20data%20science%20masters/ class=md-nav__link> Part-time DS masters </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_16 type=checkbox id=__nav_3_16> <label class=md-nav__link for=__nav_3_16> External blogs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="External blogs" data-md-level=2> <label class=md-nav__title for=__nav_3_16> <span class="md-nav__icon md-icon"></span> External blogs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/Imperial%20College%20London/ class=md-nav__link> Imperial college London </a> </li> <li class=md-nav__item> <a href=../../Others/Rolls%20Royce/ class=md-nav__link> Rolls Royce </a> </li> <li class=md-nav__item> <a href=../../Others/Publications/ class=md-nav__link> Publications/conferences </a> </li> <li class=md-nav__item> <a href=../../Others/Deployed%20apps/ class=md-nav__link> Deployed apps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_17 type=checkbox id=__nav_3_17> <label class=md-nav__link for=__nav_3_17> Projects <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Projects data-md-level=2> <label class=md-nav__title for=__nav_3_17> <span class="md-nav__icon md-icon"></span> Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/Scarecrow/ class=md-nav__link> Scarecrow </a> </li> <li class=md-nav__item> <a href=../../Others/bid%20allocation%20model/ class=md-nav__link> Bid Allocation </a> </li> <li class=md-nav__item> <a href=../../Others/IIMB%20project/ class=md-nav__link> Reward and Recognition contests </a> </li> <li class=md-nav__item> <a href=../../Others/supply%20chain%20analytics/ class=md-nav__link> Supply chain analytics </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#scatter-plot class=md-nav__link> Scatter plot </a> </li> <li class=md-nav__item> <a href=#sunburst-and-pie-charts class=md-nav__link> Sunburst and pie charts </a> </li> <li class=md-nav__item> <a href=#parallel-coordinates class=md-nav__link> Parallel Coordinates </a> </li> <li class=md-nav__item> <a href=#bar-chart-and-steam-graphs class=md-nav__link> Bar chart and Steam graphs </a> </li> <li class=md-nav__item> <a href=#heatmap class=md-nav__link> Heatmap </a> </li> <li class=md-nav__item> <a href=#treemap class=md-nav__link> Treemap </a> </li> <li class=md-nav__item> <a href=#word-cloud class=md-nav__link> Word cloud </a> </li> <li class=md-nav__item> <a href=#correlation-matrix class=md-nav__link> Correlation matrix </a> </li> <li class=md-nav__item> <a href=#scatterplot-matrix class=md-nav__link> Scatterplot matrix </a> </li> <li class=md-nav__item> <a href=#boxplot-and-violin-chart class=md-nav__link> Boxplot and Violin chart </a> </li> <li class=md-nav__item> <a href=#cluster-map class=md-nav__link> Cluster map </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> References </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=visualizalising-tabular-data>Visualizalising tabular data<a class=headerlink href=#visualizalising-tabular-data title="Permanent link">&para;</a></h1> <p><strong>Author: Achyuthuni Sri Harsha</strong> <br> In this visualistion, we look at various visualisation types on data type tables. </p> <p><a href=http://matplotlib.org>Matplotlib</a> is the most popular library for viz in Python. <a href=http://stanford.edu/~mwaskom/software/seaborn>Seaborn</a> is built on top of it with integrated analysis, specialized plots, and pretty good integration with Pandas. <a href=https://plotly.com/python/plotly-express/ >Plotly express</a> is another library for viz. </p> <p>Also see <a href=http://stanford.edu/~mwaskom/software/seaborn/examples/index.html>the full gallery of Seaborn</a> or <a href=http://matplotlib.org/gallery.html>Matplotlib</a>. </p> <div class=highlight><pre><span></span><code><span class=c1>#disable some annoying warnings</span>
<span class=kn>import</span> <span class=nn>warnings</span>
<span class=n>warnings</span><span class=o>.</span><span class=n>filterwarnings</span><span class=p>(</span><span class=s1>&#39;ignore&#39;</span><span class=p>,</span> <span class=n>category</span><span class=o>=</span><span class=ne>FutureWarning</span><span class=p>)</span>

<span class=c1>#plots the figures in place instead of a new window</span>
<span class=o>%</span><span class=n>matplotlib</span> <span class=n>inline</span>

<span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
<span class=kn>import</span> <span class=nn>seaborn</span> <span class=k>as</span> <span class=nn>sns</span>
<span class=kn>import</span> <span class=nn>plotly.express</span> <span class=k>as</span> <span class=nn>px</span>

<span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
<span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</code></pre></div> <p>In this blog, we are going to look into the <a href=http://insideairbnb.com/get-the-data.html>Airbnb data</a> for London. We will look at some trends, patterns and effect of seasonality on the data. <br> First, let us ponder over the popularity of Airbnb over time. The popularity is proportional to the number of reviews. Importing the <em>reviews</em> dataset: </p> <div class=highlight><pre><span></span><code><span class=n>reviews</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s1>&#39;reviews.csv.gz&#39;</span><span class=p>,</span> <span class=n>parse_dates</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;date&#39;</span><span class=p>])</span>
<span class=n>reviews</span><span class=o>.</span><span class=n>head</span><span class=p>()</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>listing_id</th> <th>id</th> <th>date</th> <th>reviewer_id</th> <th>reviewer_name</th> <th>comments</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>11551</td> <td>30672</td> <td>2010-03-21</td> <td>93896</td> <td>Shar-Lyn</td> <td>The flat was bright, comfortable and clean and...</td> </tr> <tr> <th>1</th> <td>11551</td> <td>32236</td> <td>2010-03-29</td> <td>97890</td> <td>Zane</td> <td>We stayed with Adriano and Valerio for a week ...</td> </tr> <tr> <th>2</th> <td>11551</td> <td>41044</td> <td>2010-05-09</td> <td>104133</td> <td>Chase</td> <td>Adriano was a fantastic host. We felt very at ...</td> </tr> <tr> <th>3</th> <td>11551</td> <td>48926</td> <td>2010-06-01</td> <td>122714</td> <td>John &amp; Sylvia</td> <td>We had a most wonderful stay with Adriano and ...</td> </tr> <tr> <th>4</th> <td>11551</td> <td>58352</td> <td>2010-06-28</td> <td>111543</td> <td>Monique</td> <td>I'm not sure which of us misunderstood the s...</td> </tr> </tbody> </table> </div> <h2 id=scatter-plot>Scatter plot<a class=headerlink href=#scatter-plot title="Permanent link">&para;</a></h2> <p>To find the number of reviews, we add the total reviews every day, and we then plot it across time as a scatter plot. </p> <div class=highlight><pre><span></span><code><span class=n>fs</span><span class=p>,</span> <span class=n>axs</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>15</span><span class=p>,</span><span class=mi>10</span><span class=p>))</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s2>&quot;Airbnb London: Number of reviews across time&quot;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>30</span><span class=p>)</span>

<span class=n>reviews</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;date&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>aggregate</span><span class=p>({</span><span class=s1>&#39;listing_id&#39;</span><span class=p>:</span><span class=s1>&#39;count&#39;</span><span class=p>})</span><span class=o>.</span><span class=n>reset_index</span><span class=p>()</span><span class=o>.</span><span class=n>plot</span><span class=o>.</span><span class=n>scatter</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=s1>&#39;listing_id&#39;</span><span class=p>,</span> <span class=n>alpha</span> <span class=o>=</span> <span class=mf>0.25</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>axs</span><span class=p>)</span>
<span class=n>axs</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s1>&#39;Number of reviews&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
<span class=n>axs</span><span class=o>.</span><span class=n>set_xlabel</span><span class=p>(</span><span class=s1>&#39;Time&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_5_0.png></p> <p>From this plot, we can observe the following:<br> 1. There is an exponential growth in the business pre-pandemic and this has a sudden drop after Covid related restrictions started. <br> 2. Seasonality within every year is visible <br> To expand n these trends, we should zoom in two sections of the plot. First we should find the seasonality and trend of the data, and then zoom into one of the pre-pandemic year to elaborate on the seasonality. Second, we can zoom into 2020-21 to identify the patterns from covid related lockdowns. </p> <div class=highlight><pre><span></span><code><span class=c1># getting the total number of reviews per day</span>
<span class=n>reviews_time</span> <span class=o>=</span> <span class=n>reviews</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;date&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>aggregate</span><span class=p>({</span><span class=s1>&#39;listing_id&#39;</span><span class=p>:</span><span class=s1>&#39;count&#39;</span><span class=p>})</span><span class=o>.</span><span class=n>reset_index</span><span class=p>()</span>
<span class=n>reviews_time</span><span class=p>[</span><span class=s1>&#39;year&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>reviews_time</span><span class=o>.</span><span class=n>date</span><span class=o>.</span><span class=n>dt</span><span class=o>.</span><span class=n>year</span>

<span class=c1># Pre covid data</span>
<span class=n>reviews_time_proper</span> <span class=o>=</span> <span class=n>reviews_time</span><span class=p>[(</span><span class=n>reviews_time</span><span class=o>.</span><span class=n>year</span> <span class=o>&lt;</span> <span class=mi>2020</span><span class=p>)]</span>
</code></pre></div> <p>We can find seasonality and trend within the pre-pandemic data by using decomposition (not explained in this blog). Splitting the data into trend, seasonal and random component, gives me the following:</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>statsmodels.tsa.seasonal</span> <span class=kn>import</span> <span class=n>seasonal_decompose</span>
<span class=n>result</span> <span class=o>=</span> <span class=n>seasonal_decompose</span><span class=p>(</span><span class=n>reviews_time_proper</span><span class=o>.</span><span class=n>listing_id</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s1>&#39;additive&#39;</span><span class=p>,</span> <span class=n>period</span> <span class=o>=</span> <span class=mi>365</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>plot</span><span class=p>())</span>
</code></pre></div> <p><img alt=png src=output_9_1.png></p> <p>We can see an exponential trend and a repeating constant seasonality within the data. Identifying and predicting pre-pandemic trend and predicting for 2020-21. </p> <div class=highlight><pre><span></span><code><span class=n>y_values</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>trend</span><span class=p>[</span><span class=mi>182</span><span class=p>:</span><span class=mi>3136</span><span class=p>]</span>
<span class=n>x_values</span> <span class=o>=</span> <span class=nb>range</span><span class=p>(</span><span class=mi>182</span><span class=p>,</span> <span class=mi>3136</span><span class=p>)</span>
<span class=n>coeffs</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>polyfit</span><span class=p>(</span><span class=n>x_values</span><span class=p>,</span> <span class=n>y_values</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
<span class=n>poly_eqn</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>poly1d</span><span class=p>(</span><span class=n>coeffs</span><span class=p>)</span>
<span class=n>y_hat</span> <span class=o>=</span> <span class=n>poly_eqn</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=mi>365</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>reviews_time</span><span class=p>[</span><span class=n>reviews_time</span><span class=o>.</span><span class=n>year</span> <span class=o>&lt;</span> <span class=mi>2020</span><span class=p>])))</span>
<span class=n>y_hat1</span> <span class=o>=</span> <span class=n>poly_eqn</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>reviews_time</span><span class=p>[</span><span class=n>reviews_time</span><span class=o>.</span><span class=n>year</span> <span class=o>&lt;</span> <span class=mi>2020</span><span class=p>]),</span> <span class=nb>len</span><span class=p>(</span><span class=n>reviews_time</span><span class=p>)))</span>
</code></pre></div> <p>Approximating the seasonality by using a polynomial equation. </p> <div class=highlight><pre><span></span><code><span class=n>y_values</span> <span class=o>=</span> <span class=n>reviews_time</span><span class=p>[</span><span class=n>reviews_time</span><span class=o>.</span><span class=n>year</span> <span class=o>==</span> <span class=mi>2019</span><span class=p>]</span><span class=o>.</span><span class=n>listing_id</span>
<span class=n>x_values</span> <span class=o>=</span> <span class=nb>range</span><span class=p>(</span><span class=mi>365</span><span class=p>)</span>
<span class=n>coeffs</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>polyfit</span><span class=p>(</span><span class=n>x_values</span><span class=p>,</span> <span class=n>y_values</span><span class=p>,</span> <span class=mi>15</span><span class=p>)</span>
<span class=n>poly_eqn</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>poly1d</span><span class=p>(</span><span class=n>coeffs</span><span class=p>)</span>
<span class=n>y_hat_seasonal</span> <span class=o>=</span> <span class=n>poly_eqn</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=mi>365</span><span class=p>))</span>
</code></pre></div> <p>Approximating the pattern in 2020-21 with a polynomial equation. </p> <div class=highlight><pre><span></span><code><span class=n>reviews_covid</span> <span class=o>=</span> <span class=n>reviews_time</span><span class=p>[</span><span class=n>reviews_time</span><span class=o>.</span><span class=n>year</span> <span class=o>&gt;=</span> <span class=mi>2020</span><span class=p>]</span>
<span class=n>y_values</span> <span class=o>=</span> <span class=n>reviews_covid</span><span class=o>.</span><span class=n>listing_id</span>
<span class=n>x_values</span> <span class=o>=</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>reviews_covid</span><span class=o>.</span><span class=n>listing_id</span><span class=p>))</span>
<span class=n>coeffs</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>polyfit</span><span class=p>(</span><span class=n>x_values</span><span class=p>,</span> <span class=n>y_values</span><span class=p>,</span> <span class=mi>17</span><span class=p>)</span>
<span class=n>poly_eqn</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>poly1d</span><span class=p>(</span><span class=n>coeffs</span><span class=p>)</span>
<span class=n>y_hat_covid</span> <span class=o>=</span> <span class=n>poly_eqn</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=mi>25</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>reviews_covid</span><span class=o>.</span><span class=n>listing_id</span><span class=p>)</span><span class=o>-</span><span class=mi>15</span><span class=p>))</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>mpl_toolkits.axes_grid1.inset_locator</span> <span class=kn>import</span> <span class=n>mark_inset</span><span class=p>,</span> <span class=n>inset_axes</span>
<span class=kn>from</span> <span class=nn>matplotlib.patches</span> <span class=kn>import</span> <span class=n>ConnectionPatch</span> <span class=c1># making lines from top lot to below plot</span>

<span class=c1># Two plots, the main on the top with height 20 inches and the bottom one is 10 inches.</span>
<span class=n>fs</span><span class=p>,</span> <span class=n>axs</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>30</span><span class=p>),</span> <span class=n>gridspec_kw</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;height_ratios&#39;</span><span class=p>:</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>]},</span> <span class=n>constrained_layout</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>

<span class=c1># Title</span>
<span class=n>plt</span><span class=o>.</span><span class=n>suptitle</span><span class=p>(</span><span class=s2>&quot;Airbnb London: Number of reviews across time&quot;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>30</span><span class=p>)</span>

<span class=c1># First plot, main scatterplot</span>
<span class=n>reviews</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;date&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>aggregate</span><span class=p>({</span><span class=s1>&#39;listing_id&#39;</span><span class=p>:</span><span class=s1>&#39;count&#39;</span><span class=p>})</span><span class=o>.</span>\
    <span class=n>reset_index</span><span class=p>()</span><span class=o>.</span><span class=n>plot</span><span class=o>.</span><span class=n>scatter</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=s1>&#39;listing_id&#39;</span><span class=p>,</span> <span class=n>alpha</span> <span class=o>=</span> <span class=mf>0.25</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>axs</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>

<span class=c1># adding the trend lines</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>reviews_time</span><span class=p>[</span><span class=mi>365</span><span class=p>:</span><span class=nb>len</span><span class=p>(</span><span class=n>reviews_time</span><span class=p>[</span><span class=n>reviews_time</span><span class=o>.</span><span class=n>year</span> <span class=o>&lt;</span> <span class=mi>2020</span><span class=p>])]</span><span class=o>.</span><span class=n>date</span><span class=p>,</span><span class=n>y_hat</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;red&#39;</span><span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>reviews_time</span><span class=p>[</span><span class=nb>len</span><span class=p>(</span><span class=n>reviews_time</span><span class=p>[</span><span class=n>reviews_time</span><span class=o>.</span><span class=n>year</span> <span class=o>&lt;</span> <span class=mi>2020</span><span class=p>]):]</span><span class=o>.</span><span class=n>date</span><span class=p>,</span><span class=n>y_hat1</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;red&#39;</span><span class=p>,</span> <span class=n>linestyle</span><span class=o>=</span><span class=s1>&#39;dashed&#39;</span><span class=p>)</span>

<span class=c1># Modifying the labels and title</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s1>&#39;Number of reviews&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span><span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>set_xlabel</span><span class=p>(</span><span class=s1>&#39;Time&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span><span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s1>&#39;Total reviews of all types of rooms across London. A trend line is plotted taking the exponential growth of the business before Covid 19 and projecting the same trend during Covid. </span><span class=se>\n</span><span class=s1>&#39;</span><span class=o>+</span>
<span class=s1>&#39;Seasonality before Covid is shown by zooming for 2019 (sample year). The affect of covid related lockdowns is also shown by zooming from 2020 onwards.&#39;</span><span class=p>,</span>
                      <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span><span class=p>,</span> <span class=n>loc</span><span class=o>=</span><span class=s1>&#39;left&#39;</span><span class=p>)</span>

<span class=c1># Plotting the data within 2019 as a semantic zooming</span>
<span class=n>axins</span> <span class=o>=</span> <span class=n>inset_axes</span><span class=p>(</span><span class=n>axs</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=n>loc</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>bbox_to_anchor</span><span class=o>=</span><span class=p>(</span><span class=mf>0.15</span><span class=p>,</span> <span class=mf>0.925</span><span class=p>),</span>
                  <span class=n>bbox_transform</span><span class=o>=</span><span class=n>axs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>figure</span><span class=o>.</span><span class=n>transFigure</span><span class=p>)</span>

<span class=c1># Semantic zooming plot, scatterplot</span>
<span class=n>reviews</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;date&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>aggregate</span><span class=p>({</span><span class=s1>&#39;listing_id&#39;</span><span class=p>:</span><span class=s1>&#39;count&#39;</span><span class=p>})</span><span class=o>.</span><span class=n>reset_index</span><span class=p>()</span><span class=o>.</span>\
    <span class=n>plot</span><span class=o>.</span><span class=n>scatter</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=s1>&#39;listing_id&#39;</span><span class=p>,</span> <span class=n>alpha</span> <span class=o>=</span> <span class=mf>0.5</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>axins</span><span class=p>)</span>
<span class=c1>#adding the trend lines, labels and title</span>
<span class=n>plt</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>reviews_time</span><span class=p>[</span><span class=n>reviews_time</span><span class=o>.</span><span class=n>year</span> <span class=o>==</span> <span class=mi>2019</span><span class=p>]</span><span class=o>.</span><span class=n>date</span><span class=p>,</span><span class=n>y_hat_seasonal</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;red&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>ylabel</span><span class=p>(</span><span class=s1>&#39;Number of reviews&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>xlabel</span><span class=p>(</span><span class=s1>&#39;Date&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Sesonality in a year (before COVID 19)&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>

<span class=c1># Seasonality plot x and y limits</span>
<span class=n>x1</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=n>reviews_time</span><span class=p>[</span><span class=n>reviews_time</span><span class=o>.</span><span class=n>year</span> <span class=o>==</span> <span class=mi>2019</span><span class=p>]</span><span class=o>.</span><span class=n>date</span><span class=p>)</span>
<span class=n>x2</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=n>reviews_time</span><span class=p>[</span><span class=n>reviews_time</span><span class=o>.</span><span class=n>year</span> <span class=o>==</span> <span class=mi>2019</span><span class=p>]</span><span class=o>.</span><span class=n>date</span><span class=p>)</span>
<span class=n>axins</span><span class=o>.</span><span class=n>set_xlim</span><span class=p>(</span><span class=n>x1</span><span class=p>,</span> <span class=n>x2</span><span class=p>)</span>
<span class=n>axins</span><span class=o>.</span><span class=n>set_ylim</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>2000</span><span class=p>)</span>
<span class=n>mark_inset</span><span class=p>(</span><span class=n>axs</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>axins</span><span class=p>,</span> <span class=n>loc1</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>loc2</span><span class=o>=</span><span class=mi>3</span><span class=p>,</span> <span class=n>fc</span><span class=o>=</span><span class=s2>&quot;none&quot;</span><span class=p>,</span> <span class=n>ec</span><span class=o>=</span><span class=s2>&quot;0.5&quot;</span><span class=p>)</span>


<span class=c1># Second plot</span>
<span class=n>x1</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=n>reviews_time</span><span class=p>[</span><span class=n>reviews_time</span><span class=o>.</span><span class=n>year</span> <span class=o>==</span> <span class=mi>2020</span><span class=p>]</span><span class=o>.</span><span class=n>date</span><span class=p>)</span>
<span class=n>x2</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=n>reviews_time</span><span class=p>[</span><span class=n>reviews_time</span><span class=o>.</span><span class=n>year</span> <span class=o>&gt;=</span> <span class=mi>2020</span><span class=p>]</span><span class=o>.</span><span class=n>date</span><span class=p>)</span>

<span class=n>reviews_time</span><span class=p>[</span><span class=n>reviews_time</span><span class=o>.</span><span class=n>year</span> <span class=o>&gt;=</span> <span class=mi>2020</span><span class=p>]</span><span class=o>.</span><span class=n>plot</span><span class=o>.</span><span class=n>scatter</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=s1>&#39;listing_id&#39;</span><span class=p>,</span> <span class=n>alpha</span> <span class=o>=</span> <span class=mf>0.75</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s1>&#39;Number of reviews&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span><span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>set_xlabel</span><span class=p>(</span><span class=s1>&#39;Date&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span><span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>set_ylim</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1200</span><span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>set_xlim</span><span class=p>(</span><span class=n>x1</span><span class=p>,</span> <span class=n>x2</span><span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s1>&#39;Effect of Covid19 on number of reviews&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>

<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>reviews_covid</span><span class=o>.</span><span class=n>date</span><span class=p>[</span><span class=mi>25</span><span class=p>:</span><span class=o>-</span><span class=mi>15</span><span class=p>],</span><span class=n>y_hat_covid</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;red&#39;</span><span class=p>)</span>

<span class=c1># Adding annotations in the plot</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>annotate</span><span class=p>(</span>
        <span class=n>text</span> <span class=o>=</span> <span class=s1>&#39;First Covid 19 advisory </span><span class=se>\n</span><span class=s1> 3-16-2020&#39;</span><span class=p>,</span> <span class=c1># the text</span>
        <span class=n>xy</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;3-16-2020&#39;</span><span class=p>,</span> <span class=mi>500</span><span class=p>),</span> <span class=c1>#what to annotate</span>
        <span class=n>xytext</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;3-16-2020&#39;</span><span class=p>,</span> <span class=mi>700</span><span class=p>),</span> <span class=c1># where the text should be</span>
        <span class=n>arrowprops</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>arrowstyle</span><span class=o>=</span><span class=s2>&quot;-&gt;&quot;</span><span class=p>,</span>
                       <span class=n>connectionstyle</span><span class=o>=</span><span class=s2>&quot;angle3,angleA=-90,angleB=0&quot;</span><span class=p>),</span>
        <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span>
    <span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>annotate</span><span class=p>(</span>
        <span class=s1>&#39;First Lockdown </span><span class=se>\n</span><span class=s1> 3-23-2020&#39;</span><span class=p>,</span> 
        <span class=n>xy</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;3-23-2020&#39;</span><span class=p>,</span> <span class=mi>350</span><span class=p>),</span>
        <span class=n>xytext</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;5-10-2020&#39;</span><span class=p>,</span> <span class=mi>600</span><span class=p>),</span> 
        <span class=n>arrowprops</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>arrowstyle</span><span class=o>=</span><span class=s2>&quot;-&gt;&quot;</span><span class=p>),</span>
        <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span>
    <span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>annotate</span><span class=p>(</span>
        <span class=s1>&#39;Easing restrictions </span><span class=se>\n</span><span class=s1> 7-4-2020&#39;</span><span class=p>,</span> 
        <span class=n>xy</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;7-4-2020&#39;</span><span class=p>,</span> <span class=mi>50</span><span class=p>),</span> 
        <span class=n>xytext</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;6-15-2020&#39;</span><span class=p>,</span> <span class=mi>700</span><span class=p>),</span>
        <span class=n>arrowprops</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>arrowstyle</span><span class=o>=</span><span class=s2>&quot;-&gt;&quot;</span><span class=p>),</span>
        <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span>
    <span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>annotate</span><span class=p>(</span>
        <span class=s1>&#39;Restrictions eased further </span><span class=se>\n</span><span class=s1> 8-14-2020&#39;</span><span class=p>,</span>
        <span class=n>xy</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;8-14-2020&#39;</span><span class=p>,</span> <span class=mi>250</span><span class=p>),</span> 
        <span class=n>xytext</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;8-1-2020&#39;</span><span class=p>,</span> <span class=mi>600</span><span class=p>),</span>
        <span class=n>arrowprops</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>arrowstyle</span><span class=o>=</span><span class=s2>&quot;-&gt;&quot;</span><span class=p>),</span>
        <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span>
    <span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>annotate</span><span class=p>(</span>
        <span class=s1>&#39;Second Lockdown </span><span class=se>\n</span><span class=s1> 10-31-2020&#39;</span><span class=p>,</span> 
        <span class=n>xy</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;10-31-2020&#39;</span><span class=p>,</span> <span class=mi>165</span><span class=p>),</span>
        <span class=n>xytext</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;10-1-2020&#39;</span><span class=p>,</span> <span class=mi>700</span><span class=p>),</span> 
        <span class=n>arrowprops</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>arrowstyle</span><span class=o>=</span><span class=s2>&quot;-&gt;&quot;</span><span class=p>),</span>
        <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span>
    <span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>annotate</span><span class=p>(</span>
        <span class=s1>&#39;Easing restrictions </span><span class=se>\n</span><span class=s1> 12-2-2020&#39;</span><span class=p>,</span> 
        <span class=n>xy</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;12-2-2020&#39;</span><span class=p>,</span> <span class=mi>120</span><span class=p>),</span> 
        <span class=n>xytext</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;11-10-2020&#39;</span><span class=p>,</span> <span class=mi>600</span><span class=p>),</span> 
        <span class=n>arrowprops</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>arrowstyle</span><span class=o>=</span><span class=s2>&quot;-&gt;&quot;</span><span class=p>),</span>
        <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span>
    <span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>annotate</span><span class=p>(</span>
        <span class=s1>&#39;Christmas </span><span class=se>\n</span><span class=s1> 12-25-2020&#39;</span><span class=p>,</span>
        <span class=n>xy</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;12-25-2020&#39;</span><span class=p>,</span> <span class=mi>160</span><span class=p>),</span> 
        <span class=n>xytext</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;12-25-2020&#39;</span><span class=p>,</span> <span class=mi>700</span><span class=p>),</span> 
        <span class=n>arrowprops</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>arrowstyle</span><span class=o>=</span><span class=s2>&quot;-&gt;&quot;</span><span class=p>),</span>
        <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span>
    <span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>annotate</span><span class=p>(</span>
        <span class=s1>&#39;Third Lockdown </span><span class=se>\n</span><span class=s1> 1-6-2021&#39;</span><span class=p>,</span>
        <span class=n>xy</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;1-6-2021&#39;</span><span class=p>,</span> <span class=mi>140</span><span class=p>),</span>
        <span class=n>xytext</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;1-20-2021&#39;</span><span class=p>,</span> <span class=mi>600</span><span class=p>),</span> 
        <span class=n>arrowprops</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>arrowstyle</span><span class=o>=</span><span class=s2>&quot;-&gt;&quot;</span><span class=p>),</span>
        <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span>
    <span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>annotate</span><span class=p>(</span>
        <span class=s1>&#39;Schools reopen </span><span class=se>\n</span><span class=s1> 3-8-2021&#39;</span><span class=p>,</span> 
        <span class=n>xy</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;3-8-2021&#39;</span><span class=p>,</span> <span class=mi>125</span><span class=p>),</span> 
        <span class=n>xytext</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;2-25-2021&#39;</span><span class=p>,</span> <span class=mi>700</span><span class=p>),</span> 
        <span class=n>arrowprops</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>arrowstyle</span><span class=o>=</span><span class=s2>&quot;-&gt;&quot;</span><span class=p>),</span>
        <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span>
    <span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>annotate</span><span class=p>(</span>
        <span class=s1>&#39;All restrictions removed </span><span class=se>\n</span><span class=s1> 6-21-2021&#39;</span><span class=p>,</span> 
        <span class=n>xy</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;6-21-2021&#39;</span><span class=p>,</span> <span class=mi>400</span><span class=p>),</span>
        <span class=n>xytext</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;5-21-2021&#39;</span><span class=p>,</span> <span class=mi>700</span><span class=p>),</span> 
        <span class=n>arrowprops</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>arrowstyle</span><span class=o>=</span><span class=s2>&quot;-&gt;&quot;</span><span class=p>),</span>
        <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span>
    <span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>annotate</span><span class=p>(</span>
        <span class=s1>&#39;Non essentials reopen </span><span class=se>\n</span><span class=s1> 4-12-2021&#39;</span><span class=p>,</span> 
        <span class=n>xy</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;4-12-2021&#39;</span><span class=p>,</span> <span class=mi>270</span><span class=p>),</span> 
        <span class=n>xytext</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;4-1-2021&#39;</span><span class=p>,</span> <span class=mi>600</span><span class=p>),</span>
        <span class=n>arrowprops</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>arrowstyle</span><span class=o>=</span><span class=s2>&quot;-&gt;&quot;</span><span class=p>),</span>
        <span class=n>fontsize</span><span class=o>=</span><span class=mi>15</span>
    <span class=p>)</span>

<span class=c1># plotting the connections between the two plots</span>
<span class=n>con</span> <span class=o>=</span> <span class=n>ConnectionPatch</span><span class=p>(</span><span class=n>xyA</span><span class=o>=</span><span class=p>(</span><span class=n>x1</span><span class=p>,</span><span class=o>-</span><span class=mi>105</span><span class=p>),</span> <span class=n>xyB</span><span class=o>=</span><span class=p>(</span><span class=n>x1</span><span class=p>,</span><span class=mi>1200</span><span class=p>),</span> <span class=n>coordsA</span><span class=o>=</span><span class=s2>&quot;data&quot;</span><span class=p>,</span> <span class=n>coordsB</span><span class=o>=</span><span class=s2>&quot;data&quot;</span><span class=p>,</span>
                      <span class=n>axesA</span><span class=o>=</span><span class=n>axs</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>axesB</span><span class=o>=</span><span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>add_artist</span><span class=p>(</span><span class=n>con</span><span class=p>)</span>
<span class=c1># con = ConnectionPatch(axesA=axs[0], axesB=axs[1])</span>
<span class=n>con</span> <span class=o>=</span> <span class=n>ConnectionPatch</span><span class=p>(</span><span class=n>xyA</span><span class=o>=</span><span class=p>(</span><span class=n>x2</span><span class=p>,</span><span class=o>-</span><span class=mi>105</span><span class=p>),</span> <span class=n>xyB</span><span class=o>=</span><span class=p>(</span><span class=n>x2</span><span class=p>,</span><span class=mi>1200</span><span class=p>),</span> <span class=n>coordsA</span><span class=o>=</span><span class=s2>&quot;data&quot;</span><span class=p>,</span> <span class=n>coordsB</span><span class=o>=</span><span class=s2>&quot;data&quot;</span><span class=p>,</span>
                      <span class=n>axesA</span><span class=o>=</span><span class=n>axs</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>axesB</span><span class=o>=</span><span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>add_artist</span><span class=p>(</span><span class=n>con</span><span class=p>)</span>

<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_16_0.png></p> <p>From this plot, we can see the following:<br> 1. The variation of the reviews across time and the trend before the pandemic are captured. The trend is extrapolated to 2020-21 to show the growth that could have happened if not for the pandemic.<br> 2. Seasonality within the data is shown by semantic zooming into one sample year. We can see how Airbnb is more popular in July, September and January. <br> 3. We can also see the effect of the pandemic on the number of reviews. We can observe a sharp decline in the first few months of 2020, and then how lockdowns and openings have affected the total number of reviews. </p> <h2 id=sunburst-and-pie-charts>Sunburst and pie charts<a class=headerlink href=#sunburst-and-pie-charts title="Permanent link">&para;</a></h2> <p>Let us now deep dive into the data and look at the type of listings and locations that have contributed to this growth. Importing the complete <em>listings</em> dataset.</p> <div class=highlight><pre><span></span><code><span class=n>listing_detailed</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s1>&#39;listings.csv.gz&#39;</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=n>pd</span><span class=o>.</span><span class=n>options</span><span class=o>.</span><span class=n>display</span><span class=o>.</span><span class=n>max_columns</span> <span class=o>=</span> <span class=kc>None</span> <span class=c1># to show all the columns</span>
<span class=n>listing_detailed</span><span class=o>.</span><span class=n>head</span><span class=p>()</span>
</code></pre></div> <div style="overflow-x: scroll;"> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>id</th> <th>listing_url</th> <th>scrape_id</th> <th>last_scraped</th> <th>name</th> <th>description</th> <th>neighborhood_overview</th> <th>picture_url</th> <th>host_id</th> <th>host_url</th> <th>host_name</th> <th>host_since</th> <th>host_location</th> <th>host_about</th> <th>host_response_time</th> <th>host_response_rate</th> <th>host_acceptance_rate</th> <th>host_is_superhost</th> <th>host_thumbnail_url</th> <th>host_picture_url</th> <th>host_neighbourhood</th> <th>host_listings_count</th> <th>host_total_listings_count</th> <th>host_verifications</th> <th>host_has_profile_pic</th> <th>host_identity_verified</th> <th>neighbourhood</th> <th>neighbourhood_cleansed</th> <th>neighbourhood_group_cleansed</th> <th>latitude</th> <th>longitude</th> <th>property_type</th> <th>room_type</th> <th>accommodates</th> <th>bathrooms</th> <th>bathrooms_text</th> <th>bedrooms</th> <th>beds</th> <th>amenities</th> <th>price</th> <th>minimum_nights</th> <th>maximum_nights</th> <th>minimum_minimum_nights</th> <th>maximum_minimum_nights</th> <th>minimum_maximum_nights</th> <th>maximum_maximum_nights</th> <th>minimum_nights_avg_ntm</th> <th>maximum_nights_avg_ntm</th> <th>calendar_updated</th> <th>has_availability</th> <th>availability_30</th> <th>availability_60</th> <th>availability_90</th> <th>availability_365</th> <th>calendar_last_scraped</th> <th>number_of_reviews</th> <th>number_of_reviews_ltm</th> <th>number_of_reviews_l30d</th> <th>first_review</th> <th>last_review</th> <th>review_scores_rating</th> <th>review_scores_accuracy</th> <th>review_scores_cleanliness</th> <th>review_scores_checkin</th> <th>review_scores_communication</th> <th>review_scores_location</th> <th>review_scores_value</th> <th>license</th> <th>instant_bookable</th> <th>calculated_host_listings_count</th> <th>calculated_host_listings_count_entire_homes</th> <th>calculated_host_listings_count_private_rooms</th> <th>calculated_host_listings_count_shared_rooms</th> <th>reviews_per_month</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>11551</td> <td>https://www.airbnb.com/rooms/11551</td> <td>20210706215658</td> <td>2021-07-08</td> <td>Arty and Bright London Apartment in Zone 2</td> <td>Unlike most rental apartments my flat gives yo...</td> <td>Not even 10 minutes by metro from Victoria Sta...</td> <td>https://a0.muscache.com/pictures/b7afccf4-18e5...</td> <td>43039</td> <td>https://www.airbnb.com/users/show/43039</td> <td>Adriano</td> <td>2009-10-03</td> <td>London, England, United Kingdom</td> <td>Hello, I'm a friendly Italian man with a posit...</td> <td>within an hour</td> <td>100%</td> <td>85%</td> <td>f</td> <td>https://a0.muscache.com/im/pictures/user/5f182...</td> <td>https://a0.muscache.com/im/pictures/user/5f182...</td> <td>Brixton</td> <td>0.0</td> <td>0.0</td> <td>['email', 'phone', 'reviews', 'jumio', 'offlin...</td> <td>t</td> <td>t</td> <td>London, United Kingdom</td> <td>Lambeth</td> <td>NaN</td> <td>51.46095</td> <td>-0.11758</td> <td>Entire apartment</td> <td>Entire home/apt</td> <td>4</td> <td>NaN</td> <td>1 bath</td> <td>1.0</td> <td>3.0</td> <td>["Hot water", "Hair dryer", "Smoke alarm", "Fi...</td> <td>$99.00</td> <td>2</td> <td>1125</td> <td>2.0</td> <td>2.0</td> <td>1125.0</td> <td>1125.0</td> <td>2.0</td> <td>1125.0</td> <td>NaN</td> <td>t</td> <td>0</td> <td>30</td> <td>58</td> <td>290</td> <td>2021-07-08</td> <td>193</td> <td>1</td> <td>0</td> <td>2011-10-11</td> <td>2018-04-29</td> <td>4.57</td> <td>4.62</td> <td>4.58</td> <td>4.78</td> <td>4.85</td> <td>4.53</td> <td>4.52</td> <td>NaN</td> <td>f</td> <td>3</td> <td>3</td> <td>0</td> <td>0</td> <td>1.63</td> </tr> <tr> <th>1</th> <td>13913</td> <td>https://www.airbnb.com/rooms/13913</td> <td>20210706215658</td> <td>2021-07-08</td> <td>Holiday London DB Room Let-on going</td> <td>My bright double bedroom with a large window h...</td> <td>Finsbury Park is a friendly melting pot commun...</td> <td>https://a0.muscache.com/pictures/miso/Hosting-...</td> <td>54730</td> <td>https://www.airbnb.com/users/show/54730</td> <td>Alina</td> <td>2009-11-16</td> <td>London, England, United Kingdom</td> <td>I am a Multi-Media Visual Artist and Creative ...</td> <td>within a few hours</td> <td>100%</td> <td>100%</td> <td>f</td> <td>https://a0.muscache.com/im/users/54730/profile...</td> <td>https://a0.muscache.com/im/users/54730/profile...</td> <td>LB of Islington</td> <td>3.0</td> <td>3.0</td> <td>['email', 'phone', 'facebook', 'reviews', 'off...</td> <td>t</td> <td>t</td> <td>Islington, Greater London, United Kingdom</td> <td>Islington</td> <td>NaN</td> <td>51.56861</td> <td>-0.11270</td> <td>Private room in apartment</td> <td>Private room</td> <td>2</td> <td>NaN</td> <td>1 shared bath</td> <td>1.0</td> <td>0.0</td> <td>["Host greets you", "Dryer", "Hot water", "Sha...</td> <td>$65.00</td> <td>1</td> <td>29</td> <td>1.0</td> <td>1.0</td> <td>29.0</td> <td>29.0</td> <td>1.0</td> <td>29.0</td> <td>NaN</td> <td>t</td> <td>30</td> <td>60</td> <td>90</td> <td>365</td> <td>2021-07-08</td> <td>21</td> <td>0</td> <td>0</td> <td>2011-07-11</td> <td>2011-09-13</td> <td>4.85</td> <td>4.79</td> <td>4.84</td> <td>4.79</td> <td>4.89</td> <td>4.63</td> <td>4.74</td> <td>NaN</td> <td>f</td> <td>2</td> <td>1</td> <td>1</td> <td>0</td> <td>0.17</td> </tr> <tr> <th>2</th> <td>15400</td> <td>https://www.airbnb.com/rooms/15400</td> <td>20210706215658</td> <td>2021-07-08</td> <td>Bright Chelsea Apartment. Chelsea!</td> <td>Lots of windows and light. St Luke's Gardens ...</td> <td>It is Chelsea.</td> <td>https://a0.muscache.com/pictures/428392/462d26...</td> <td>60302</td> <td>https://www.airbnb.com/users/show/60302</td> <td>Philippa</td> <td>2009-12-05</td> <td>Kensington, England, United Kingdom</td> <td>English, grandmother, I have travelled quite ...</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>f</td> <td>https://a0.muscache.com/im/users/60302/profile...</td> <td>https://a0.muscache.com/im/users/60302/profile...</td> <td>Chelsea</td> <td>1.0</td> <td>1.0</td> <td>['email', 'phone', 'reviews', 'jumio', 'govern...</td> <td>t</td> <td>t</td> <td>London, United Kingdom</td> <td>Kensington and Chelsea</td> <td>NaN</td> <td>51.48780</td> <td>-0.16813</td> <td>Entire apartment</td> <td>Entire home/apt</td> <td>2</td> <td>NaN</td> <td>1 bath</td> <td>1.0</td> <td>1.0</td> <td>["Dryer", "Hot water", "Shampoo", "Hair dryer"...</td> <td>$75.00</td> <td>10</td> <td>50</td> <td>10.0</td> <td>10.0</td> <td>50.0</td> <td>50.0</td> <td>10.0</td> <td>50.0</td> <td>NaN</td> <td>t</td> <td>0</td> <td>14</td> <td>44</td> <td>319</td> <td>2021-07-08</td> <td>89</td> <td>0</td> <td>0</td> <td>2012-07-16</td> <td>2019-08-10</td> <td>4.79</td> <td>4.84</td> <td>4.88</td> <td>4.87</td> <td>4.82</td> <td>4.93</td> <td>4.73</td> <td>NaN</td> <td>t</td> <td>1</td> <td>1</td> <td>0</td> <td>0</td> <td>0.81</td> </tr> <tr> <th>3</th> <td>17402</td> <td>https://www.airbnb.com/rooms/17402</td> <td>20210706215658</td> <td>2021-07-08</td> <td>Superb 3-Bed/2 Bath &amp; Wifi: Trendy W1</td> <td>You'll have a wonderful stay in this superb mo...</td> <td>Location, location, location! You won't find b...</td> <td>https://a0.muscache.com/pictures/39d5309d-fba7...</td> <td>67564</td> <td>https://www.airbnb.com/users/show/67564</td> <td>Liz</td> <td>2010-01-04</td> <td>Brighton and Hove, England, United Kingdom</td> <td>We are Liz and Jack. We manage a number of ho...</td> <td>within a day</td> <td>70%</td> <td>90%</td> <td>f</td> <td>https://a0.muscache.com/im/users/67564/profile...</td> <td>https://a0.muscache.com/im/users/67564/profile...</td> <td>Fitzrovia</td> <td>18.0</td> <td>18.0</td> <td>['email', 'phone', 'reviews', 'jumio', 'offlin...</td> <td>t</td> <td>t</td> <td>London, Fitzrovia, United Kingdom</td> <td>Westminster</td> <td>NaN</td> <td>51.52195</td> <td>-0.14094</td> <td>Entire apartment</td> <td>Entire home/apt</td> <td>6</td> <td>NaN</td> <td>2 baths</td> <td>3.0</td> <td>3.0</td> <td>["Dryer", "Hot water", "Shampoo", "Hair dryer"...</td> <td>$307.00</td> <td>4</td> <td>365</td> <td>4.0</td> <td>4.0</td> <td>365.0</td> <td>365.0</td> <td>4.0</td> <td>365.0</td> <td>NaN</td> <td>t</td> <td>6</td> <td>6</td> <td>17</td> <td>218</td> <td>2021-07-08</td> <td>43</td> <td>1</td> <td>1</td> <td>2011-09-18</td> <td>2019-11-02</td> <td>4.69</td> <td>4.80</td> <td>4.68</td> <td>4.66</td> <td>4.66</td> <td>4.85</td> <td>4.59</td> <td>NaN</td> <td>f</td> <td>15</td> <td>15</td> <td>0</td> <td>0</td> <td>0.36</td> </tr> <tr> <th>4</th> <td>17506</td> <td>https://www.airbnb.com/rooms/17506</td> <td>20210706215658</td> <td>2021-07-08</td> <td>Boutique Chelsea/Fulham Double bed 5-star ensuite</td> <td>Enjoy a chic stay in this elegant but fully mo...</td> <td>Fulham is 'villagey' and residential – a real ...</td> <td>https://a0.muscache.com/pictures/11901327/e63d...</td> <td>67915</td> <td>https://www.airbnb.com/users/show/67915</td> <td>Charlotte</td> <td>2010-01-05</td> <td>London, England, United Kingdom</td> <td>Named best B&amp;B by The Times. Easy going hosts,...</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>f</td> <td>https://a0.muscache.com/im/users/67915/profile...</td> <td>https://a0.muscache.com/im/users/67915/profile...</td> <td>Fulham</td> <td>3.0</td> <td>3.0</td> <td>['email', 'phone', 'jumio', 'selfie', 'governm...</td> <td>t</td> <td>t</td> <td>London, United Kingdom</td> <td>Hammersmith and Fulham</td> <td>NaN</td> <td>51.47935</td> <td>-0.19743</td> <td>Private room in townhouse</td> <td>Private room</td> <td>2</td> <td>NaN</td> <td>1 private bath</td> <td>1.0</td> <td>1.0</td> <td>["Air conditioning", "Carbon monoxide alarm", ...</td> <td>$150.00</td> <td>3</td> <td>21</td> <td>3.0</td> <td>3.0</td> <td>21.0</td> <td>21.0</td> <td>3.0</td> <td>21.0</td> <td>NaN</td> <td>t</td> <td>29</td> <td>59</td> <td>89</td> <td>364</td> <td>2021-07-08</td> <td>0</td> <td>0</td> <td>0</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>NaN</td> <td>f</td> <td>2</td> <td>0</td> <td>2</td> <td>0</td> <td>NaN</td> </tr> </tbody> </table> </div> <p>Looking at the number of reviews by room type and by location, we have: </p> <div class=highlight><pre><span></span><code><span class=n>listing_detailed</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;room_type&#39;</span><span class=p>)</span><span class=o>.</span>\
    <span class=n>aggregate</span><span class=p>({</span><span class=s1>&#39;number_of_reviews&#39;</span><span class=p>:</span><span class=s1>&#39;sum&#39;</span><span class=p>})</span><span class=o>.</span>\
    <span class=n>plot</span><span class=o>.</span><span class=n>pie</span><span class=p>(</span><span class=n>y</span><span class=o>=</span><span class=s1>&#39;number_of_reviews&#39;</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>),</span> 
             <span class=n>autopct</span><span class=o>=</span><span class=s1>&#39;</span><span class=si>%1.1f%%</span><span class=s1>&#39;</span> <span class=c1># to add the percentages text</span>
            <span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>ylabel</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s2>&quot;Airbnb London: Number of reviews by room type&quot;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_21_0.png></p> <div class=highlight><pre><span></span><code><span class=c1># Function to combine last few classes ito one class</span>
<span class=n>total_other_reviews</span> <span class=o>=</span> <span class=mi>0</span>
<span class=k>def</span> <span class=nf>combine_last_n</span><span class=p>(</span><span class=n>df</span><span class=p>):</span>
    <span class=n>df1</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
    <span class=k>global</span> <span class=n>total_other_reviews</span> 
    <span class=n>total_other_reviews</span> <span class=o>=</span> <span class=p>(</span><span class=nb>sum</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>df</span><span class=o>.</span><span class=n>number_of_reviews</span> <span class=o>&lt;=</span> <span class=mi>5000</span><span class=p>]</span><span class=o>.</span><span class=n>number_of_reviews</span><span class=p>))</span>
    <span class=n>df1</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>df</span><span class=o>.</span><span class=n>number_of_reviews</span> <span class=o>&lt;=</span> <span class=mi>10000</span><span class=p>,</span> <span class=s1>&#39;number_of_reviews&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span>
    <span class=k>return</span> <span class=n>df1</span><span class=o>.</span><span class=n>number_of_reviews</span>


<span class=n>listing_detailed</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;neighbourhood_cleansed&#39;</span><span class=p>)</span><span class=o>.</span>\
    <span class=n>aggregate</span><span class=p>({</span><span class=s1>&#39;number_of_reviews&#39;</span><span class=p>:</span><span class=s1>&#39;sum&#39;</span><span class=p>})</span><span class=o>.</span>\
    <span class=n>sort_values</span><span class=p>(</span><span class=s1>&#39;number_of_reviews&#39;</span><span class=p>,</span> <span class=n>ascending</span> <span class=o>=</span> <span class=kc>False</span><span class=p>)</span><span class=o>.</span>\
    <span class=n>assign</span><span class=p>(</span><span class=n>no_reviews_alt</span> <span class=o>=</span> <span class=n>combine_last_n</span><span class=p>)</span><span class=o>.</span>\
    <span class=n>append</span><span class=p>(</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>({</span><span class=s1>&#39;number_of_reviews&#39;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>&#39;no_reviews_alt&#39;</span><span class=p>:</span><span class=n>total_other_reviews</span><span class=p>},</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;Others&#39;</span><span class=p>))</span><span class=o>.</span>\
    <span class=n>plot</span><span class=o>.</span><span class=n>pie</span><span class=p>(</span><span class=n>y</span><span class=o>=</span><span class=s1>&#39;no_reviews_alt&#39;</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>),</span> <span class=n>legend</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>rotatelabels</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> 
             <span class=n>wedgeprops</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>width</span><span class=o>=</span><span class=mf>.5</span><span class=p>)</span> <span class=c1># for donut shape</span>
            <span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>ylabel</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>)</span>
</code></pre></div> <p><img alt=png src=output_22_1.png></p> <p>We can see that private room is the most popular with the most number of reviews followed by entire home/apt. The others are insignificant. Similarly, Westminster and Camden are the top two locations in London. Using a sunburst chart, we can look at these two combined. </p> <div class=highlight><pre><span></span><code><span class=n>listings_sunburst</span> <span class=o>=</span> <span class=n>listing_detailed</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;room_type&#39;</span><span class=p>,</span> <span class=s1>&#39;neighbourhood_cleansed&#39;</span><span class=p>])</span><span class=o>.</span>\
    <span class=n>aggregate</span><span class=p>({</span><span class=s1>&#39;number_of_reviews&#39;</span><span class=p>:</span><span class=s1>&#39;sum&#39;</span><span class=p>})</span><span class=o>.</span>\
    <span class=n>sort_values</span><span class=p>(</span><span class=s1>&#39;number_of_reviews&#39;</span><span class=p>,</span> <span class=n>ascending</span> <span class=o>=</span> <span class=kc>False</span><span class=p>)</span><span class=o>.</span><span class=n>reset_index</span><span class=p>()</span>

<span class=n>fig</span> <span class=o>=</span> <span class=n>px</span><span class=o>.</span><span class=n>sunburst</span><span class=p>(</span><span class=n>listings_sunburst</span><span class=p>,</span> <span class=n>path</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;room_type&#39;</span><span class=p>,</span> <span class=s1>&#39;neighbourhood_cleansed&#39;</span><span class=p>],</span> <span class=n>values</span><span class=o>=</span><span class=s1>&#39;number_of_reviews&#39;</span><span class=p>,</span>
                  <span class=n>hover_data</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;room_type&#39;</span><span class=p>,</span> <span class=s1>&#39;number_of_reviews&#39;</span><span class=p>],</span> <span class=n>hover_name</span> <span class=o>=</span> <span class=s1>&#39;neighbourhood_cleansed&#39;</span><span class=p>,</span>
                 <span class=n>title</span> <span class=o>=</span> <span class=s1>&#39;Airbnb London: Popularity sunburst chart&#39;</span><span class=p>,</span> <span class=n>width</span> <span class=o>=</span> <span class=mi>900</span><span class=p>,</span> <span class=n>height</span> <span class=o>=</span> <span class=mi>900</span><span class=p>)</span>
<span class=n>fig</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=newplot.png></p> <h2 id=parallel-coordinates>Parallel Coordinates<a class=headerlink href=#parallel-coordinates title="Permanent link">&para;</a></h2> <p>From this chart, we can see that Westminster is the most popular location for all the room types, the second and the third popular are different for different room types. Let us take Kensington and Chelsea for example, we can see the ranking of this area in every room type using a parallel coordinates plot. </p> <div class=highlight><pre><span></span><code><span class=n>top_20_names</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>listings_sunburst</span><span class=o>.</span><span class=n>sort_values</span><span class=p>(</span><span class=s1>&#39;number_of_reviews&#39;</span><span class=p>,</span> <span class=n>ascending</span> <span class=o>=</span> <span class=kc>False</span><span class=p>)</span><span class=o>.</span><span class=n>head</span><span class=p>(</span><span class=mi>30</span><span class=p>)[</span><span class=s1>&#39;neighbourhood_cleansed&#39;</span><span class=p>])</span>

<span class=n>listings_sunburst_wide</span> <span class=o>=</span> <span class=n>listings_sunburst</span><span class=o>.</span>\
    <span class=n>pivot</span><span class=p>(</span><span class=n>index</span><span class=o>=</span><span class=s1>&#39;neighbourhood_cleansed&#39;</span><span class=p>,</span> <span class=n>columns</span><span class=o>=</span><span class=s1>&#39;room_type&#39;</span><span class=p>,</span> <span class=n>values</span><span class=o>=</span><span class=s1>&#39;number_of_reviews&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>reset_index</span><span class=p>()</span>
<span class=n>listings_sunburst_wide</span> <span class=o>=</span> <span class=n>listings_sunburst_wide</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>nan</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>

<span class=n>fig</span> <span class=o>=</span> <span class=n>px</span><span class=o>.</span><span class=n>parallel_coordinates</span><span class=p>(</span>
    <span class=n>listings_sunburst_wide</span>
<span class=p>)</span>

<span class=c1># add the pink line to highlight Kensington</span>
<span class=n>fig</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=s1>&#39;dimensions&#39;</span><span class=p>][</span><span class=mi>0</span><span class=p>][</span><span class=s1>&#39;constraintrange&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=mi>50000</span><span class=p>,</span> <span class=mi>60000</span><span class=p>]</span>

<span class=n>fig</span><span class=o>.</span><span class=n>update_layout</span><span class=p>(</span><span class=n>title_text</span><span class=o>=</span><span class=s1>&#39;Kensington and Chelsea (in blue) popularity ranking across room types&#39;</span><span class=p>,</span> <span class=n>title_x</span><span class=o>=</span><span class=mf>0.7</span><span class=p>,</span> <span class=n>title_y</span> <span class=o>=</span> <span class=mf>0.05</span><span class=p>)</span>

<span class=n>fig</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=newplot%20%283%29.png></p> <p>From this chart we can see how Kensington (highlighted in Blue) is in top 2 for 'Entire Home Apartment' while it's not in the top 5 for shared room. This chart, along with the sunburst above shows what type of locations are popular for different room types. </p> <h2 id=bar-chart-and-steam-graphs>Bar chart and Steam graphs<a class=headerlink href=#bar-chart-and-steam-graphs title="Permanent link">&para;</a></h2> <p>How does this ratio between the popularities change with time? One way to see this is using a stacked bar chart. </p> <div class=highlight><pre><span></span><code><span class=n>reviews_detailed</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>listing_detailed</span><span class=p>[[</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;neighbourhood_cleansed&#39;</span><span class=p>,</span> <span class=s1>&#39;room_type&#39;</span><span class=p>]],</span> <span class=n>reviews</span><span class=p>,</span> <span class=n>left_on</span> <span class=o>=</span> <span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=n>right_on</span> <span class=o>=</span> <span class=s1>&#39;listing_id&#39;</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=n>fs</span><span class=p>,</span> <span class=n>axs</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>15</span><span class=p>,</span><span class=mi>10</span><span class=p>))</span>
<span class=n>reviews_detailed</span><span class=p>[</span><span class=s1>&#39;year&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>reviews_detailed</span><span class=o>.</span><span class=n>date</span><span class=o>.</span><span class=n>dt</span><span class=o>.</span><span class=n>year</span>
<span class=n>reviews_detailed</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;year&#39;</span><span class=p>,</span> <span class=s1>&#39;room_type&#39;</span><span class=p>])</span><span class=o>.</span>\
    <span class=n>aggregate</span><span class=p>({</span><span class=s1>&#39;listing_id&#39;</span><span class=p>:</span><span class=s1>&#39;count&#39;</span><span class=p>})</span><span class=o>.</span>\
    <span class=n>unstack</span><span class=p>()</span><span class=o>.</span><span class=n>reset_index</span><span class=p>()</span><span class=o>.</span>\
    <span class=n>plot</span><span class=o>.</span><span class=n>bar</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=s1>&#39;year&#39;</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=s1>&#39;listing_id&#39;</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>axs</span><span class=p>,</span> <span class=n>stacked</span> <span class=o>=</span> <span class=kc>True</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Popularity of different rooms across the years&#39;</span><span class=p>,</span> <span class=n>fontsize</span> <span class=o>=</span> <span class=mi>25</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>legend</span><span class=p>(</span><span class=n>loc</span><span class=o>=</span><span class=s1>&#39;upper right&#39;</span><span class=p>,</span> <span class=n>title</span><span class=o>=</span><span class=s2>&quot;Type of room&quot;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=s1>&#39;medium&#39;</span><span class=p>,</span><span class=n>fancybox</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=n>axs</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s1>&#39;Number of reviews&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
<span class=n>axs</span><span class=o>.</span><span class=n>set_xlabel</span><span class=p>(</span><span class=s1>&#39;Years&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>

<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_30_0.png></p> <p>From this bar chart we can see the same increase that we have seen in the scatter plot, that is an exponential increase till 2019, and a subsequent decrease due to the pandemic. Another cool way to look at this is by looking at streamgraphs. In streamgraph, we can see the effect of seasonality within the classes. </p> <div class=highlight><pre><span></span><code><span class=n>fs</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>15</span><span class=p>,</span><span class=mi>10</span><span class=p>))</span>
<span class=n>reviews_room</span> <span class=o>=</span> <span class=n>reviews_detailed</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=s1>&#39;room_type&#39;</span><span class=p>])</span><span class=o>.</span>\
    <span class=n>aggregate</span><span class=p>({</span><span class=s1>&#39;listing_id&#39;</span><span class=p>:</span><span class=s1>&#39;count&#39;</span><span class=p>})</span><span class=o>.</span>\
    <span class=n>unstack</span><span class=p>()</span><span class=o>.</span><span class=n>reset_index</span><span class=p>()</span>
<span class=n>reviews_room</span><span class=o>.</span><span class=n>columns</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;date&#39;</span><span class=p>,</span> <span class=s1>&#39;Entire home/apt&#39;</span><span class=p>,</span> <span class=s1>&#39;Hotel room&#39;</span><span class=p>,</span> <span class=s1>&#39;Private room&#39;</span><span class=p>,</span> <span class=s1>&#39;Shared room&#39;</span><span class=p>]</span>
<span class=n>ax</span><span class=o>.</span><span class=n>stackplot</span><span class=p>(</span><span class=n>reviews_room</span><span class=o>.</span><span class=n>date</span><span class=p>,</span> 
            <span class=nb>list</span><span class=p>(</span><span class=n>reviews_room</span><span class=p>[[</span><span class=s1>&#39;Entire home/apt&#39;</span><span class=p>,</span> <span class=s1>&#39;Hotel room&#39;</span><span class=p>,</span> <span class=s1>&#39;Private room&#39;</span><span class=p>,</span> <span class=s1>&#39;Shared room&#39;</span><span class=p>]]</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span><span class=o>.</span>\
                 <span class=n>to_numpy</span><span class=p>()</span><span class=o>.</span><span class=n>transpose</span><span class=p>()),</span>
            <span class=n>baseline</span><span class=o>=</span><span class=s1>&#39;wiggle&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Popularity of different rooms across the years&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mf>1.05</span><span class=p>,</span><span class=n>loc</span><span class=o>=</span><span class=s1>&#39;left&#39;</span><span class=p>)</span>
<span class=n>ax</span><span class=o>.</span><span class=n>text</span><span class=p>(</span><span class=s2>&quot;2010&quot;</span><span class=p>,</span><span class=mi>1050</span><span class=p>,</span><span class=s1>&#39;Streamgraph of the number of reviews across time&#39;</span><span class=p>,</span><span class=n>ha</span><span class=o>=</span><span class=s1>&#39;left&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>12</span><span class=p>)</span>

<span class=n>plt</span><span class=o>.</span><span class=n>legend</span><span class=p>([</span><span class=s1>&#39;Entire home/apt&#39;</span><span class=p>,</span> <span class=s1>&#39;Hotel room&#39;</span><span class=p>,</span> <span class=s1>&#39;Private room&#39;</span><span class=p>,</span> <span class=s1>&#39;Shared room&#39;</span><span class=p>],</span> <span class=n>loc</span><span class=o>=</span><span class=s1>&#39;upper left&#39;</span><span class=p>,</span> <span class=n>title</span><span class=o>=</span><span class=s2>&quot;Type of room&quot;</span><span class=p>)</span>
<span class=n>ax</span><span class=o>.</span><span class=n>set_xlabel</span><span class=p>(</span><span class=s1>&#39;Years&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>

<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_32_0.png></p> <h2 id=heatmap>Heatmap<a class=headerlink href=#heatmap title="Permanent link">&para;</a></h2> <p>Which locations are better, and which locations should improve on their rating? We can find the average rating across the location by averaging out the rating for each host within the location. </p> <div class=highlight><pre><span></span><code><span class=n>location_rating</span> <span class=o>=</span> <span class=n>listing_detailed</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;neighbourhood_cleansed&#39;</span><span class=p>,</span> <span class=s1>&#39;room_type&#39;</span><span class=p>])</span><span class=o>.</span>\
    <span class=n>aggregate</span><span class=p>({</span><span class=s1>&#39;review_scores_rating&#39;</span><span class=p>:</span><span class=s1>&#39;mean&#39;</span><span class=p>})</span><span class=o>.</span><span class=n>unstack</span><span class=p>()</span><span class=o>.</span><span class=n>reset_index</span><span class=p>()</span>
<span class=n>location_rating</span><span class=o>.</span><span class=n>columns</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;neighbourhood&#39;</span><span class=p>,</span> <span class=s1>&#39;Entire home/apt&#39;</span><span class=p>,</span> <span class=s1>&#39;Hotel room&#39;</span><span class=p>,</span> <span class=s1>&#39;Private room&#39;</span><span class=p>,</span> <span class=s1>&#39;Shared room&#39;</span><span class=p>]</span>
<span class=n>location_rating</span><span class=o>.</span><span class=n>index</span> <span class=o>=</span> <span class=n>location_rating</span><span class=o>.</span><span class=n>neighbourhood</span>
</code></pre></div> <p>One of the ways to visualise the average rating is using a heatmap. </p> <div class=highlight><pre><span></span><code><span class=n>fig</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=n>figsize</span><span class=o>=</span><span class=p>[</span><span class=mi>20</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>location_rating</span><span class=p>)</span><span class=o>/</span><span class=mf>3.3</span><span class=p>])</span>
<span class=n>sns</span><span class=o>.</span><span class=n>heatmap</span><span class=p>(</span><span class=n>data</span><span class=o>=</span><span class=n>location_rating</span><span class=p>[[</span><span class=s1>&#39;Entire home/apt&#39;</span><span class=p>,</span> <span class=s1>&#39;Hotel room&#39;</span><span class=p>,</span> <span class=s1>&#39;Private room&#39;</span><span class=p>,</span> <span class=s1>&#39;Shared room&#39;</span><span class=p>]],</span>
            <span class=n>annot</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>cbar_kws</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;shrink&quot;</span><span class=p>:</span><span class=mf>0.5</span><span class=p>,</span><span class=s2>&quot;orientation&quot;</span><span class=p>:</span><span class=s1>&#39;vertical&#39;</span><span class=p>},</span><span class=n>linewidths</span><span class=o>=</span><span class=mf>0.004</span><span class=p>,</span><span class=n>linecolor</span><span class=o>=</span><span class=s1>&#39;grey&#39;</span><span class=p>,</span><span class=n>vmin</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span><span class=n>vmax</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span> <span class=n>center</span> <span class=o>=</span> <span class=mf>0.25</span><span class=p>)</span>

<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_36_0.png></p> <p>Although this heatmap presents us the with the average ratings per borough, we can further add the following details for clarity: <br> 1. Location of the borough in London (e.g.: Central London) <br> 2. Arranged from the best rated to the worst rated boroughs within each location <br> 3. Proper colour selection based on scale and human rating psychology : Average human ratings below 2.5 means bad rating and above 4.5 means very good rating (out of 5). It is more natural to use a diverging red-green scale for displaying negative-positive relationship. </p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>add_regions</span><span class=p>(</span><span class=n>df</span><span class=p>,</span> <span class=n>borough_col_name</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    This function takes as input a dataframe with a column which includes London&#39;s borough name</span>
<span class=sd>    Then returns the same dataframw with sub regions names added for each borough</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>central</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Camden&#39;</span><span class=p>,</span> <span class=s1>&#39;City of London&#39;</span><span class=p>,</span> <span class=s1>&#39;Kensington and Chelsea&#39;</span><span class=p>,</span> <span class=s1>&#39;Islington&#39;</span><span class=p>,</span> <span class=s1>&#39;Lambeth&#39;</span><span class=p>,</span> <span class=s1>&#39;Southwark&#39;</span><span class=p>,</span> <span class=s1>&#39;Westminster&#39;</span><span class=p>]</span>
    <span class=n>east</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Barking and Dagenham&#39;</span><span class=p>,</span> <span class=s1>&#39;Bexley&#39;</span><span class=p>,</span> <span class=s1>&#39;Greenwich&#39;</span><span class=p>,</span> <span class=s1>&#39;Hackney&#39;</span><span class=p>,</span> <span class=s1>&#39;Havering&#39;</span><span class=p>,</span> <span class=s1>&#39;Lewisham&#39;</span><span class=p>,</span> <span class=s1>&#39;Newham&#39;</span><span class=p>,</span> <span class=s1>&#39;Redbridge&#39;</span><span class=p>,</span> <span class=s1>&#39;Tower Hamlets&#39;</span><span class=p>,</span> <span class=s1>&#39;Waltham Forest&#39;</span><span class=p>]</span>
    <span class=n>north</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Barnet&#39;</span><span class=p>,</span> <span class=s1>&#39;Enfield&#39;</span><span class=p>,</span> <span class=s1>&#39;Haringey&#39;</span><span class=p>]</span>
    <span class=n>south</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Bromley&#39;</span><span class=p>,</span> <span class=s1>&#39;Croydon&#39;</span><span class=p>,</span> <span class=s1>&#39;Kingston upon Thames&#39;</span><span class=p>,</span> <span class=s1>&#39;Merton&#39;</span><span class=p>,</span> <span class=s1>&#39;Sutton&#39;</span><span class=p>,</span> <span class=s1>&#39;Wandsworth&#39;</span><span class=p>]</span>
    <span class=n>west</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Brent&#39;</span><span class=p>,</span> <span class=s1>&#39;Ealing&#39;</span><span class=p>,</span> <span class=s1>&#39;Hammersmith and Fulham&#39;</span><span class=p>,</span> <span class=s1>&#39;Harrow&#39;</span><span class=p>,</span> <span class=s1>&#39;Richmond upon Thames&#39;</span><span class=p>,</span> <span class=s1>&#39;Hillingdon&#39;</span><span class=p>,</span> <span class=s1>&#39;Hounslow&#39;</span><span class=p>]</span>


    <span class=n>df</span><span class=p>[</span><span class=s1>&#39;sub_regions&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>where</span><span class=p>((</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>central</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span> <span class=o>|</span> 
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>central</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span> <span class=o>|</span>
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>central</span><span class=p>[</span><span class=mi>2</span><span class=p>])</span> <span class=o>|</span>
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>central</span><span class=p>[</span><span class=mi>3</span><span class=p>])</span> <span class=o>|</span>
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>central</span><span class=p>[</span><span class=mi>4</span><span class=p>])</span> <span class=o>|</span>
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>central</span><span class=p>[</span><span class=mi>5</span><span class=p>])</span> <span class=o>|</span>
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>central</span><span class=p>[</span><span class=mi>6</span><span class=p>])</span> 
                                       <span class=p>,</span> <span class=s1>&#39;Central&#39;</span><span class=p>,</span> <span class=s1>&#39;no&#39;</span><span class=p>)</span>

    <span class=n>df</span><span class=p>[</span><span class=s1>&#39;sub_regions&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>where</span><span class=p>((</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>east</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span> <span class=o>|</span> 
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>east</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span> <span class=o>|</span>
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>east</span><span class=p>[</span><span class=mi>2</span><span class=p>])</span> <span class=o>|</span>
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>east</span><span class=p>[</span><span class=mi>3</span><span class=p>])</span> <span class=o>|</span>
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>east</span><span class=p>[</span><span class=mi>4</span><span class=p>])</span> <span class=o>|</span>
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>east</span><span class=p>[</span><span class=mi>5</span><span class=p>])</span> <span class=o>|</span>
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>east</span><span class=p>[</span><span class=mi>6</span><span class=p>])</span> <span class=o>|</span>
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>east</span><span class=p>[</span><span class=mi>7</span><span class=p>])</span> <span class=o>|</span>
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>east</span><span class=p>[</span><span class=mi>8</span><span class=p>])</span> <span class=o>|</span>
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>east</span><span class=p>[</span><span class=mi>9</span><span class=p>])</span> 
                                       <span class=p>,</span> <span class=s1>&#39;East&#39;</span><span class=p>,</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;sub_regions&#39;</span><span class=p>])</span>

    <span class=n>df</span><span class=p>[</span><span class=s1>&#39;sub_regions&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>where</span><span class=p>((</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>north</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span> <span class=o>|</span> 
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>north</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span> <span class=o>|</span>
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>north</span><span class=p>[</span><span class=mi>2</span><span class=p>])</span> 
                                       <span class=p>,</span> <span class=s1>&#39;North&#39;</span><span class=p>,</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;sub_regions&#39;</span><span class=p>])</span>

    <span class=n>df</span><span class=p>[</span><span class=s1>&#39;sub_regions&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>where</span><span class=p>((</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>south</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span> <span class=o>|</span> 
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>south</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span> <span class=o>|</span> 
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>south</span><span class=p>[</span><span class=mi>2</span><span class=p>])</span> <span class=o>|</span> 
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>south</span><span class=p>[</span><span class=mi>3</span><span class=p>])</span> <span class=o>|</span> 
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>south</span><span class=p>[</span><span class=mi>4</span><span class=p>])</span> <span class=o>|</span> 
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>south</span><span class=p>[</span><span class=mi>5</span><span class=p>])</span>  
                                       <span class=p>,</span> <span class=s1>&#39;South&#39;</span><span class=p>,</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;sub_regions&#39;</span><span class=p>])</span>

    <span class=n>df</span><span class=p>[</span><span class=s1>&#39;sub_regions&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>where</span><span class=p>((</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>west</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span> <span class=o>|</span> 
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>west</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span> <span class=o>|</span> 
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>west</span><span class=p>[</span><span class=mi>2</span><span class=p>])</span> <span class=o>|</span> 
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>west</span><span class=p>[</span><span class=mi>3</span><span class=p>])</span> <span class=o>|</span> 
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>west</span><span class=p>[</span><span class=mi>4</span><span class=p>])</span> <span class=o>|</span> 
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>west</span><span class=p>[</span><span class=mi>5</span><span class=p>])</span> <span class=o>|</span> 
                                       <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>borough_col_name</span><span class=p>]</span> <span class=o>==</span> <span class=n>west</span><span class=p>[</span><span class=mi>6</span><span class=p>])</span> 
                                       <span class=p>,</span> <span class=s1>&#39;West&#39;</span><span class=p>,</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;sub_regions&#39;</span><span class=p>])</span>

    <span class=k>return</span> <span class=n>df</span>
<span class=k>def</span> <span class=nf>sort_data</span><span class=p>(</span><span class=n>df</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Groups the data by location and sorts the data based on average rating within the location. </span>
<span class=sd>    Different locations are sorted by average rating.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>df1</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
    <span class=n>df1</span><span class=p>[</span><span class=s1>&#39;average_rating&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=n>df1</span><span class=p>[</span><span class=s1>&#39;Entire home/apt&#39;</span><span class=p>]</span><span class=o>+</span> <span class=n>df1</span><span class=p>[</span><span class=s1>&#39;Hotel room&#39;</span><span class=p>]</span> <span class=o>+</span> <span class=n>df1</span><span class=p>[</span><span class=s1>&#39;Private room&#39;</span><span class=p>]</span><span class=o>+</span><span class=n>df1</span><span class=p>[</span><span class=s1>&#39;Shared room&#39;</span><span class=p>])</span><span class=o>/</span><span class=mi>4</span>
    <span class=n>df1</span><span class=p>[</span><span class=s1>&#39;location_average&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>df1</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;sub_regions&#39;</span><span class=p>)[</span><span class=s1>&#39;average_rating&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>transform</span><span class=p>(</span><span class=s1>&#39;mean&#39;</span><span class=p>)</span>
    <span class=n>df1</span> <span class=o>=</span> <span class=n>df1</span><span class=o>.</span><span class=n>sort_values</span><span class=p>([</span><span class=s1>&#39;location_average&#39;</span><span class=p>,</span> <span class=s1>&#39;average_rating&#39;</span><span class=p>],</span> <span class=n>ascending</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>df1</span><span class=p>[[</span><span class=s1>&#39;Private room&#39;</span><span class=p>,</span> <span class=s1>&#39;Entire home/apt&#39;</span><span class=p>,</span> <span class=s1>&#39;Hotel room&#39;</span><span class=p>,</span> <span class=s1>&#39;Shared room&#39;</span><span class=p>,</span> <span class=s1>&#39;sub_regions&#39;</span><span class=p>]]</span>

<span class=k>def</span> <span class=nf>prepare_reg_annotation_lists</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Creates the annotation in the form of groups within the data. Displays this on the right hand side of the heatmap.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>reg_sorted_list</span> <span class=o>=</span> <span class=n>location_rating</span><span class=o>.</span><span class=n>sub_regions</span><span class=o>.</span><span class=n>unique</span><span class=p>()</span>
    <span class=n>reg_len</span> <span class=o>=</span> <span class=n>location_rating</span><span class=o>.</span><span class=n>sub_regions</span><span class=o>.</span><span class=n>value_counts</span><span class=p>()</span><span class=o>.</span><span class=n>to_dict</span><span class=p>()</span>

    <span class=n>sorted_len</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>cum_len</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>arrow_style_str_list</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=c1># here we define the width of the bracket used, which is proportional to the number of boroughs within a sub region</span>
    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>i</span><span class=o>==</span><span class=mi>0</span><span class=p>:</span>
            <span class=n>value</span> <span class=o>=</span> <span class=n>reg_len</span><span class=p>[</span><span class=n>reg_sorted_list</span><span class=p>[</span><span class=n>i</span><span class=p>]]</span>
            <span class=n>cum_value</span> <span class=o>=</span> <span class=n>value</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>value</span> <span class=o>=</span> <span class=n>reg_len</span><span class=p>[</span><span class=n>reg_sorted_list</span><span class=p>[</span><span class=n>i</span><span class=p>]]</span>
            <span class=n>cum_value</span> <span class=o>+=</span> <span class=n>value</span>

        <span class=n>sorted_len</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
        <span class=n>cum_len</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>cum_value</span><span class=p>)</span>
        <span class=n>arrow_style_str_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s1>&#39;-[,widthB=&#39;</span><span class=o>+</span><span class=nb>str</span><span class=p>((</span><span class=n>value</span><span class=o>/</span><span class=mf>1.2</span><span class=p>)</span><span class=o>-</span><span class=mf>0.5</span><span class=p>)</span><span class=o>+</span><span class=s1>&#39;,lengthB=0.7&#39;</span><span class=p>)</span>

    <span class=c1># here we define ticks which represent the center location of each sub region relative to the heatmap</span>
    <span class=n>Ticks</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>i</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
            <span class=n>Ticks</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=p>((</span><span class=n>cum_len</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>/</span><span class=mi>2</span><span class=p>)</span><span class=o>/</span><span class=mi>33</span><span class=p>))</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>Ticks</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=p>((((</span><span class=n>cum_len</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>-</span><span class=n>cum_len</span><span class=p>[</span><span class=n>i</span><span class=o>-</span><span class=mi>1</span><span class=p>])</span><span class=o>/</span><span class=mi>2</span><span class=p>)</span><span class=o>+</span><span class=n>cum_len</span><span class=p>[</span><span class=n>i</span><span class=o>-</span><span class=mi>1</span><span class=p>])</span><span class=o>/</span><span class=mi>33</span><span class=p>))</span>

    <span class=k>return</span> <span class=n>Ticks</span><span class=p>,</span><span class=n>arrow_style_str_list</span><span class=p>,</span><span class=n>reg_sorted_list</span>


<span class=n>location_rating</span> <span class=o>=</span> <span class=n>location_rating</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>nan</span><span class=p>,</span> <span class=mf>2.5</span><span class=p>)</span>
<span class=n>location_rating</span> <span class=o>=</span> <span class=n>add_regions</span><span class=p>(</span><span class=n>location_rating</span><span class=p>,</span> <span class=s1>&#39;neighbourhood&#39;</span><span class=p>)</span>
<span class=n>location_rating</span> <span class=o>=</span> <span class=n>sort_data</span><span class=p>(</span><span class=n>location_rating</span><span class=p>)</span>
<span class=n>Ticks_h</span><span class=p>,</span><span class=n>arrow</span><span class=p>,</span><span class=n>region</span> <span class=o>=</span> <span class=n>prepare_reg_annotation_lists</span><span class=p>()</span>
</code></pre></div> <p>A diverging red-green palate is chosen to represent good reviews and bad reviews. </p> <p><div class=highlight><pre><span></span><code><span class=n>red_green_cmap</span> <span class=o>=</span> <span class=n>sns</span><span class=o>.</span><span class=n>diverging_palette</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>133</span><span class=p>,</span><span class=n>as_cmap</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=n>red_green_cmap</span>
</code></pre></div> <img alt=png src=red_green_cmap.png></p> <div class=highlight><pre><span></span><code><span class=n>fig</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=n>figsize</span><span class=o>=</span><span class=p>[</span><span class=mi>20</span><span class=p>,</span><span class=nb>len</span><span class=p>(</span><span class=n>location_rating</span><span class=p>)</span><span class=o>/</span><span class=mf>3.3</span><span class=p>])</span>
<span class=n>sns</span><span class=o>.</span><span class=n>heatmap</span><span class=p>(</span><span class=n>data</span><span class=o>=</span><span class=n>location_rating</span><span class=p>[[</span><span class=s1>&#39;Private room&#39;</span><span class=p>,</span> <span class=s1>&#39;Entire home/apt&#39;</span><span class=p>,</span> <span class=s1>&#39;Hotel room&#39;</span><span class=p>,</span> <span class=s1>&#39;Shared room&#39;</span><span class=p>]],</span>
            <span class=n>annot</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>cbar_kws</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;shrink&quot;</span><span class=p>:</span><span class=mf>0.5</span><span class=p>,</span><span class=s2>&quot;orientation&quot;</span><span class=p>:</span><span class=s1>&#39;vertical&#39;</span><span class=p>},</span><span class=n>linewidths</span><span class=o>=</span><span class=mf>0.004</span><span class=p>,</span><span class=n>linecolor</span><span class=o>=</span><span class=s1>&#39;grey&#39;</span><span class=p>,</span><span class=n>vmin</span><span class=o>=</span><span class=mf>2.25</span><span class=p>,</span><span class=n>vmax</span><span class=o>=</span><span class=mf>4.75</span><span class=p>,</span>
           <span class=n>cmap</span> <span class=o>=</span> <span class=n>red_green_cmap</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s2>&quot;Average ratings for different locations in London&quot;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mf>1.1</span><span class=p>,</span><span class=n>loc</span><span class=o>=</span><span class=s1>&#39;left&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>text</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=s1>&#39;Heatmap depicting the ratings among different locations in London. If no rating is available, minimum rating of 2.5 is assumed. </span><span class=se>\n</span><span class=s1> Good ratings are ratings above 3.5 while bad ratings are below. The data is grouped by location (right) and sorted by average rating.&#39;</span><span class=p>,</span><span class=n>ha</span><span class=o>=</span><span class=s1>&#39;left&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>12</span><span class=p>)</span>
<span class=n>ax</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>)</span>

<span class=c1>#annotation for the borough</span>
<span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
    <span class=n>ax</span><span class=o>.</span><span class=n>annotate</span><span class=p>(</span><span class=n>region</span><span class=p>[</span><span class=n>i</span><span class=p>],</span><span class=n>xy</span><span class=o>=</span><span class=p>(</span><span class=mf>1.01</span><span class=p>,</span><span class=n>Ticks_h</span><span class=p>[</span><span class=n>i</span><span class=p>]),</span> <span class=n>xytext</span><span class=o>=</span><span class=p>(</span><span class=mf>1.02</span><span class=p>,</span><span class=n>Ticks_h</span><span class=p>[</span><span class=n>i</span><span class=p>]),</span> <span class=n>xycoords</span><span class=o>=</span><span class=s1>&#39;axes fraction&#39;</span><span class=p>,</span>
                <span class=n>ha</span><span class=o>=</span><span class=s1>&#39;left&#39;</span><span class=p>,</span><span class=n>va</span><span class=o>=</span><span class=s1>&#39;center&#39;</span><span class=p>,</span> <span class=n>arrowprops</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>arrowstyle</span><span class=o>=</span><span class=n>arrow</span><span class=p>[</span><span class=n>i</span><span class=p>],</span><span class=n>lw</span><span class=o>=</span><span class=mi>1</span><span class=p>))</span>       
</code></pre></div> <p><img alt=png src=output_41_0.png></p> <p>We can see the ratings are good across the private rooms and entire home. The best location in each zone is: <br> - West: Richmond upon Thames <br> - Central: Camden <br> - North: Enfield <br> - East: Hackney <br> - South: Croydon </p> <h2 id=treemap>Treemap<a class=headerlink href=#treemap title="Permanent link">&para;</a></h2> <p>In this context, it's not fair to compare ratings of different locations as we have seen that their popularities are different. So there could be 10 reviews in one location while 100 reviews in another. To combine them, we can use a treemap. </p> <div class=highlight><pre><span></span><code><span class=n>reviews_treemap</span> <span class=o>=</span> <span class=n>listing_detailed</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;neighbourhood_cleansed&#39;</span><span class=p>])</span><span class=o>.</span>\
    <span class=n>aggregate</span><span class=p>({</span><span class=s1>&#39;review_scores_rating&#39;</span><span class=p>:</span><span class=s1>&#39;mean&#39;</span><span class=p>,</span> <span class=s1>&#39;number_of_reviews&#39;</span><span class=p>:</span><span class=s1>&#39;sum&#39;</span><span class=p>})</span><span class=o>.</span><span class=n>reset_index</span><span class=p>()</span>
<span class=n>reviews_treemap</span> <span class=o>=</span> <span class=n>add_regions</span><span class=p>(</span><span class=n>reviews_treemap</span><span class=p>,</span> <span class=s1>&#39;neighbourhood_cleansed&#39;</span><span class=p>)</span>

<span class=c1>#change col names for nice viz on hover</span>
<span class=n>reviews_treemap</span><span class=o>.</span><span class=n>columns</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;neighbourhood&#39;</span><span class=p>,</span> <span class=s1>&#39;Average Reviews&#39;</span><span class=p>,</span> <span class=s1>&#39;Number of reviews&#39;</span><span class=p>,</span> <span class=s1>&#39;regions&#39;</span><span class=p>]</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><span class=n>fig</span> <span class=o>=</span> <span class=n>px</span><span class=o>.</span><span class=n>treemap</span><span class=p>(</span><span class=n>reviews_treemap</span><span class=p>,</span> <span class=n>path</span><span class=o>=</span><span class=p>[</span><span class=n>px</span><span class=o>.</span><span class=n>Constant</span><span class=p>(</span><span class=s2>&quot;London&quot;</span><span class=p>),</span> <span class=s1>&#39;regions&#39;</span><span class=p>,</span> <span class=s1>&#39;neighbourhood&#39;</span><span class=p>],</span> <span class=n>values</span><span class=o>=</span><span class=s1>&#39;Number of reviews&#39;</span><span class=p>,</span> 
           <span class=n>color</span> <span class=o>=</span> <span class=s1>&#39;Average Reviews&#39;</span><span class=p>,</span> <span class=n>color_continuous_scale</span><span class=o>=</span><span class=s1>&#39;RdBu&#39;</span><span class=p>)</span>
<span class=n>fig</span><span class=o>.</span><span class=n>update_layout</span><span class=p>(</span><span class=n>margin</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=n>t</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span> <span class=n>l</span><span class=o>=</span><span class=mi>25</span><span class=p>,</span> <span class=n>r</span><span class=o>=</span><span class=mi>25</span><span class=p>,</span> <span class=n>b</span><span class=o>=</span><span class=mi>25</span><span class=p>))</span>
<span class=n>fig</span><span class=o>.</span><span class=n>update_layout</span><span class=p>(</span><span class=n>title_text</span><span class=o>=</span><span class=s1>&#39;Airbnb London: Ratings overview&#39;</span><span class=p>)</span>
</code></pre></div> <img alt=png src=newplot%20%282%29.png></p> <h2 id=word-cloud>Word cloud<a class=headerlink href=#word-cloud title="Permanent link">&para;</a></h2> <p>Now that we have classified the ratings into good ratings and bad ratings, let us look at the text in these ratings and identify if there are any patterns. </p> <div class=highlight><pre><span></span><code><span class=n>reviews_detailed_text</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>listing_detailed</span><span class=p>[[</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;description&#39;</span><span class=p>,</span><span class=s1>&#39;neighborhood_overview&#39;</span><span class=p>,</span> <span class=s1>&#39;host_about&#39;</span><span class=p>,</span> <span class=s1>&#39;review_scores_rating&#39;</span><span class=p>]],</span> <span class=n>reviews</span><span class=p>,</span> <span class=n>left_on</span> <span class=o>=</span> <span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=n>right_on</span> <span class=o>=</span> <span class=s1>&#39;listing_id&#39;</span><span class=p>)</span>
<span class=n>reviews_detailed_positive_text</span> <span class=o>=</span> <span class=n>reviews_detailed_text</span><span class=p>[</span><span class=n>reviews_detailed_text</span><span class=o>.</span><span class=n>review_scores_rating</span> <span class=o>&gt;</span> <span class=mf>3.75</span><span class=p>]</span>
<span class=n>reviews_detailed_negative_text</span> <span class=o>=</span> <span class=n>reviews_detailed_text</span><span class=p>[</span><span class=n>reviews_detailed_text</span><span class=o>.</span><span class=n>review_scores_rating</span> <span class=o>&lt;=</span> <span class=mf>3.75</span><span class=p>]</span>
</code></pre></div> <p>Selecting 100 random reviews each for positive and negative sets. </p> <div class=highlight><pre><span></span><code><span class=n>pos_reviews_text</span> <span class=o>=</span> <span class=n>reviews_detailed_positive_text</span><span class=o>.</span><span class=n>sample</span><span class=p>(</span><span class=n>n</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span> <span class=n>random_state</span> <span class=o>=</span> <span class=mi>2</span><span class=p>)</span><span class=o>.</span><span class=n>comments</span><span class=o>.</span><span class=n>str</span><span class=o>.</span><span class=n>cat</span><span class=p>()</span>
<span class=n>neg_reviews_text</span> <span class=o>=</span> <span class=n>reviews_detailed_negative_text</span><span class=o>.</span><span class=n>sample</span><span class=p>(</span><span class=n>n</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span> <span class=n>random_state</span> <span class=o>=</span> <span class=mi>3</span><span class=p>)</span><span class=o>.</span><span class=n>comments</span><span class=o>.</span><span class=n>str</span><span class=o>.</span><span class=n>cat</span><span class=p>()</span>
</code></pre></div> <p>Word cloud for positive reviews </p> <div class=highlight><pre><span></span><code><span class=c1># !pip install wordcloud</span>
<span class=kn>from</span> <span class=nn>wordcloud</span> <span class=kn>import</span> <span class=n>WordCloud</span><span class=p>,</span> <span class=n>STOPWORDS</span><span class=p>,</span> <span class=n>ImageColorGenerator</span>
<span class=kn>from</span> <span class=nn>PIL</span> <span class=kn>import</span> <span class=n>Image</span>
<span class=n>mask_pos</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=n>Image</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=s1>&#39;thumbs-up-xxl.png&#39;</span><span class=p>))</span>

<span class=c1># word cloud, good vs bad ratings</span>
<span class=n>stop_words</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;https&quot;</span><span class=p>,</span> <span class=s2>&quot;co&quot;</span><span class=p>,</span> <span class=s2>&quot;RT&quot;</span><span class=p>,</span> <span class=s1>&#39;br&#39;</span><span class=p>,</span> <span class=s1>&#39;&lt;br&gt;&#39;</span><span class=p>,</span> <span class=s1>&#39;&lt;br/&gt;&#39;</span><span class=p>,</span> <span class=s1>&#39;</span><span class=se>\r</span><span class=s1>&#39;</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>]</span> <span class=o>+</span> <span class=nb>list</span><span class=p>(</span><span class=n>STOPWORDS</span><span class=p>)</span>
<span class=n>wordcloud_pattern</span> <span class=o>=</span> <span class=n>WordCloud</span><span class=p>(</span><span class=n>stopwords</span> <span class=o>=</span> <span class=n>stop_words</span><span class=p>,</span> <span class=n>background_color</span><span class=o>=</span><span class=s2>&quot;white&quot;</span><span class=p>,</span> <span class=n>max_words</span><span class=o>=</span><span class=mi>2000</span><span class=p>,</span> <span class=n>max_font_size</span><span class=o>=</span><span class=mi>256</span><span class=p>,</span>
               <span class=n>random_state</span><span class=o>=</span><span class=mi>42</span><span class=p>,</span> <span class=n>mask</span> <span class=o>=</span> <span class=n>mask_pos</span><span class=p>,</span> <span class=n>width</span><span class=o>=</span><span class=n>mask_pos</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>height</span><span class=o>=</span><span class=n>mask_pos</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
<span class=n>wordcloud_positive</span> <span class=o>=</span> <span class=n>wordcloud_pattern</span><span class=o>.</span><span class=n>generate</span><span class=p>(</span><span class=n>pos_reviews_text</span><span class=p>)</span>

<span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>wordcloud_positive</span><span class=p>,</span> <span class=n>interpolation</span><span class=o>=</span><span class=s1>&#39;bilinear&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>axis</span><span class=p>(</span><span class=s2>&quot;off&quot;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_51_0.png></p> <p>Word cloud for negative reviews </p> <div class=highlight><pre><span></span><code><span class=n>mask_neg</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=n>Image</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=s1>&#39;thumbs-down-xxl.png&#39;</span><span class=p>))</span>

<span class=c1># word cloud, good vs bad ratings</span>
<span class=n>wordcloud_pattern</span> <span class=o>=</span> <span class=n>WordCloud</span><span class=p>(</span><span class=n>stopwords</span> <span class=o>=</span> <span class=n>stop_words</span><span class=p>,</span> <span class=n>background_color</span><span class=o>=</span><span class=s2>&quot;white&quot;</span><span class=p>,</span> <span class=n>max_words</span><span class=o>=</span><span class=mi>2000</span><span class=p>,</span> <span class=n>max_font_size</span><span class=o>=</span><span class=mi>256</span><span class=p>,</span>
               <span class=n>random_state</span><span class=o>=</span><span class=mi>42</span><span class=p>,</span> <span class=n>mask</span> <span class=o>=</span> <span class=n>mask_neg</span><span class=p>,</span> <span class=n>width</span><span class=o>=</span><span class=n>mask_neg</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>height</span><span class=o>=</span><span class=n>mask_neg</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
<span class=n>wordcloud_neg</span> <span class=o>=</span> <span class=n>wordcloud_pattern</span><span class=o>.</span><span class=n>generate</span><span class=p>(</span><span class=n>neg_reviews_text</span><span class=p>)</span>

<span class=n>plt</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>wordcloud_neg</span><span class=p>,</span> <span class=n>interpolation</span><span class=o>=</span><span class=s1>&#39;bilinear&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>axis</span><span class=p>(</span><span class=s2>&quot;off&quot;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_53_0.png></p> <p>Combining the positive and negative reviews in one plot to compare the differences: </p> <div class=highlight><pre><span></span><code><span class=n>fs</span><span class=p>,</span> <span class=n>axs</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>10</span><span class=p>))</span>
<span class=n>plt</span><span class=o>.</span><span class=n>suptitle</span><span class=p>(</span><span class=s2>&quot;Airbnb London: Wordcloud of positive and negative reviews&quot;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>figtext</span><span class=p>(</span><span class=mf>0.5</span><span class=p>,</span> <span class=mf>0.925</span><span class=p>,</span> <span class=s1>&#39;Wordcloud derived from a random sample of 100 positive and 100 negative reviews.&#39;</span><span class=p>,</span>
            <span class=n>wrap</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>horizontalalignment</span><span class=o>=</span><span class=s1>&#39;center&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>12</span><span class=p>)</span>

<span class=n>axs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>wordcloud_positive</span><span class=p>,</span> <span class=n>interpolation</span><span class=o>=</span><span class=s1>&#39;bilinear&#39;</span><span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>axis</span><span class=p>(</span><span class=s2>&quot;off&quot;</span><span class=p>)</span>

<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=n>wordcloud_neg</span><span class=p>,</span> <span class=n>interpolation</span><span class=o>=</span><span class=s1>&#39;bilinear&#39;</span><span class=p>)</span>
<span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>axis</span><span class=p>(</span><span class=s2>&quot;off&quot;</span><span class=p>)</span>

<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_55_0.png></p> <p>From these plots, we can see that automated postings, cancellations by hosts, and issues during arrival are the main issues that Airbnb should look into. </p> <h2 id=correlation-matrix>Correlation matrix<a class=headerlink href=#correlation-matrix title="Permanent link">&para;</a></h2> <p>How are different parameters within the data related. How is ratings correlated with availability or maximum nights? This can be explained using a correlation plot. </p> <div class=highlight><pre><span></span><code><span class=n>listing_detailed</span><span class=p>[</span><span class=s1>&#39;host_response_rate&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>listing_detailed</span><span class=p>[</span><span class=s1>&#39;host_response_rate&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>str</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s1>&#39;%&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=nb>float</span><span class=p>)</span>
<span class=n>listing_detailed</span><span class=p>[</span><span class=s1>&#39;host_acceptance_rate&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>listing_detailed</span><span class=p>[</span><span class=s1>&#39;host_acceptance_rate&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>str</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s1>&#39;%&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=nb>float</span><span class=p>)</span>
<span class=n>listing_detailed</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>listing_detailed</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>str</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s1>&#39;$&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>str</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s1>&#39;,&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=nb>float</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=n>col_for_corr</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;review_scores_rating&#39;</span><span class=p>,</span> <span class=s1>&#39;review_scores_accuracy&#39;</span><span class=p>,</span> <span class=s1>&#39;review_scores_cleanliness&#39;</span><span class=p>,</span> <span class=s1>&#39;review_scores_checkin&#39;</span><span class=p>,</span> <span class=s1>&#39;review_scores_communication&#39;</span><span class=p>,</span> <span class=s1>&#39;review_scores_location&#39;</span><span class=p>,</span> <span class=s1>&#39;review_scores_value&#39;</span><span class=p>,</span>
                <span class=s1>&#39;number_of_reviews&#39;</span><span class=p>,</span> <span class=s1>&#39;number_of_reviews_ltm&#39;</span><span class=p>,</span> <span class=s1>&#39;number_of_reviews_l30d&#39;</span><span class=p>,</span> <span class=s1>&#39;reviews_per_month&#39;</span><span class=p>,</span>
                <span class=s1>&#39;availability_30&#39;</span><span class=p>,</span> <span class=s1>&#39;availability_60&#39;</span><span class=p>,</span> <span class=s1>&#39;availability_90&#39;</span><span class=p>,</span> <span class=s1>&#39;availability_365&#39;</span><span class=p>,</span>
                <span class=s1>&#39;minimum_nights&#39;</span><span class=p>,</span> <span class=s1>&#39;maximum_nights&#39;</span><span class=p>,</span> <span class=s1>&#39;minimum_minimum_nights&#39;</span><span class=p>,</span> <span class=s1>&#39;maximum_minimum_nights&#39;</span><span class=p>,</span> <span class=s1>&#39;minimum_maximum_nights&#39;</span><span class=p>,</span> <span class=s1>&#39;maximum_maximum_nights&#39;</span><span class=p>,</span> <span class=s1>&#39;minimum_nights_avg_ntm&#39;</span><span class=p>,</span> <span class=s1>&#39;maximum_nights_avg_ntm&#39;</span><span class=p>,</span>
                <span class=s1>&#39;bedrooms&#39;</span><span class=p>,</span> <span class=s1>&#39;beds&#39;</span><span class=p>,</span><span class=s1>&#39;accommodates&#39;</span><span class=p>,</span> <span class=s1>&#39;price&#39;</span><span class=p>,</span> 
                <span class=s1>&#39;host_response_rate&#39;</span><span class=p>,</span> <span class=s1>&#39;host_acceptance_rate&#39;</span><span class=p>,</span> <span class=s1>&#39;host_total_listings_count&#39;</span><span class=p>]</span>


<span class=n>f</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>figure</span><span class=p>(</span><span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>20</span><span class=p>,</span> <span class=mi>20</span><span class=p>))</span>
<span class=n>plt</span><span class=o>.</span><span class=n>matshow</span><span class=p>(</span><span class=n>listing_detailed</span><span class=p>[</span><span class=n>col_for_corr</span><span class=p>]</span><span class=o>.</span><span class=n>corr</span><span class=p>(),</span> <span class=n>fignum</span> <span class=o>=</span> <span class=n>f</span><span class=p>,</span> <span class=n>cmap</span> <span class=o>=</span> <span class=n>red_green_cmap</span><span class=p>,</span> <span class=n>vmin</span><span class=o>=-</span><span class=mi>1</span><span class=p>,</span> <span class=n>vmax</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>xticks</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=n>listing_detailed</span><span class=p>[</span><span class=n>col_for_corr</span><span class=p>]</span><span class=o>.</span><span class=n>select_dtypes</span><span class=p>([</span><span class=s1>&#39;number&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>1</span><span class=p>]),</span> 
           <span class=n>listing_detailed</span><span class=p>[</span><span class=n>col_for_corr</span><span class=p>]</span><span class=o>.</span><span class=n>select_dtypes</span><span class=p>([</span><span class=s1>&#39;number&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>columns</span><span class=p>,</span> <span class=n>rotation</span><span class=o>=</span><span class=mi>90</span><span class=p>,</span> <span class=n>fontsize</span> <span class=o>=</span> <span class=mi>15</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>yticks</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=n>listing_detailed</span><span class=p>[</span><span class=n>col_for_corr</span><span class=p>]</span><span class=o>.</span><span class=n>select_dtypes</span><span class=p>([</span><span class=s1>&#39;number&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>1</span><span class=p>]),</span> 
           <span class=n>listing_detailed</span><span class=p>[</span><span class=n>col_for_corr</span><span class=p>]</span><span class=o>.</span><span class=n>select_dtypes</span><span class=p>([</span><span class=s1>&#39;number&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>columns</span><span class=p>,</span> <span class=n>rotation</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>fontsize</span> <span class=o>=</span> <span class=mi>15</span><span class=p>)</span>
<span class=n>cb</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>colorbar</span><span class=p>()</span>
<span class=n>cb</span><span class=o>.</span><span class=n>ax</span><span class=o>.</span><span class=n>tick_params</span><span class=p>(</span><span class=n>labelsize</span><span class=o>=</span><span class=mi>14</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s2>&quot;Airbnb London: Correlation between different parameters&quot;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span><span class=n>loc</span><span class=o>=</span><span class=s1>&#39;left&#39;</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>text</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=mi>32</span><span class=p>,</span><span class=s1>&#39;Correlation matrix displaying the different parameters within the data. DIverging green (+ve) red (-ve) scale is used to display the correlations.</span><span class=se>\n</span><span class=s1> </span><span class=se>\</span>
<span class=s1>    Features considered: Review scores, Number of reviews, availability, maximum and minimum days of stay, host and room parameters.&#39;</span><span class=p>,</span>
         <span class=n>ha</span><span class=o>=</span><span class=s1>&#39;left&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>12</span><span class=p>)</span>

<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_59_0.png></p> <h2 id=scatterplot-matrix>Scatterplot matrix<a class=headerlink href=#scatterplot-matrix title="Permanent link">&para;</a></h2> <p>While the above plot shows the correlation across various variables, I want to deep dive into change in ratings with price. I can use a scatterplot matrix to visualise this. Additionally, I want the costliest properties, and the most popular yet cheap properties annotated. </p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>annotate_plot</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>

    <span class=k>if</span><span class=p>(</span><span class=n>x</span><span class=o>.</span><span class=n>name</span> <span class=o>==</span> <span class=s1>&#39;price&#39;</span> <span class=ow>and</span> <span class=n>y</span><span class=o>.</span><span class=n>name</span> <span class=o>==</span> <span class=s1>&#39;review_scores_rating&#39;</span><span class=p>):</span>
        <span class=n>ax</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>gca</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>index</span><span class=p>,</span> <span class=n>obj</span> <span class=ow>in</span> <span class=n>listing_detailed</span><span class=o>.</span><span class=n>nlargest</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=s1>&#39;price&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>iterrows</span><span class=p>():</span>
            <span class=n>plt</span><span class=o>.</span><span class=n>annotate</span><span class=p>(</span>
                <span class=n>obj</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>],</span> <span class=c1># the text</span>
                <span class=n>xy</span><span class=o>=</span><span class=p>(</span><span class=n>obj</span><span class=o>.</span><span class=n>price</span><span class=p>,</span> <span class=n>obj</span><span class=o>.</span><span class=n>review_scores_rating</span><span class=p>),</span> 
                <span class=n>xytext</span><span class=o>=</span><span class=p>(</span><span class=mi>7500</span><span class=p>,</span> <span class=n>obj</span><span class=o>.</span><span class=n>review_scores_rating</span><span class=o>-</span><span class=mf>0.5</span><span class=p>),</span>
                <span class=n>arrowprops</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>arrowstyle</span><span class=o>=</span><span class=s2>&quot;-&gt;&quot;</span><span class=p>)</span> 
            <span class=p>)</span>
    <span class=k>elif</span><span class=p>(</span><span class=n>x</span><span class=o>.</span><span class=n>name</span> <span class=o>==</span> <span class=s1>&#39;price&#39;</span> <span class=ow>and</span> <span class=n>y</span><span class=o>.</span><span class=n>name</span> <span class=o>==</span> <span class=s1>&#39;number_of_reviews&#39;</span><span class=p>):</span>
        <span class=n>ax</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>gca</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>index</span><span class=p>,</span> <span class=n>obj</span> <span class=ow>in</span> <span class=n>listing_detailed</span><span class=o>.</span><span class=n>nlargest</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=s1>&#39;number_of_reviews&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>iterrows</span><span class=p>():</span>
            <span class=n>ax</span><span class=o>.</span><span class=n>text</span><span class=p>(</span><span class=n>obj</span><span class=o>.</span><span class=n>price</span><span class=p>,</span> <span class=n>obj</span><span class=o>.</span><span class=n>number_of_reviews</span><span class=p>,</span> <span class=n>obj</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>])</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=n>col_for_pairplot</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;review_scores_rating&#39;</span><span class=p>,</span> <span class=s1>&#39;number_of_reviews&#39;</span><span class=p>,</span>  <span class=s1>&#39;price&#39;</span><span class=p>]</span>

<span class=n>sns_plot</span> <span class=o>=</span> <span class=n>sns</span><span class=o>.</span><span class=n>pairplot</span><span class=p>(</span><span class=n>listing_detailed</span><span class=p>,</span> <span class=nb>vars</span> <span class=o>=</span> <span class=n>col_for_pairplot</span><span class=p>,</span>  <span class=n>kind</span><span class=o>=</span><span class=s1>&#39;scatter&#39;</span><span class=p>,</span>  <span class=n>hue</span> <span class=o>=</span> <span class=s1>&#39;room_type&#39;</span><span class=p>,</span> <span class=n>diag_kind</span><span class=o>=</span><span class=s1>&#39;kde&#39;</span><span class=p>,)</span>
<span class=n>sns_plot</span><span class=o>.</span><span class=n>fig</span><span class=o>.</span><span class=n>set_size_inches</span><span class=p>(</span><span class=mi>20</span><span class=p>,</span> <span class=mi>20</span><span class=p>)</span>
<span class=n>sns_plot</span><span class=o>.</span><span class=n>_legend</span><span class=o>.</span><span class=n>set_bbox_to_anchor</span><span class=p>((</span><span class=mf>0.15</span><span class=p>,</span> <span class=mf>0.89</span><span class=p>))</span>
<span class=n>sns_plot</span><span class=o>.</span><span class=n>map_upper</span><span class=p>(</span><span class=n>annotate_plot</span><span class=p>)</span>
<span class=n>sns_plot</span><span class=o>.</span><span class=n>fig</span><span class=o>.</span><span class=n>suptitle</span><span class=p>(</span><span class=s2>&quot;Airbnb London: Scatterplot matrix&quot;</span><span class=p>,</span> <span class=n>fontsize</span> <span class=o>=</span> <span class=mi>20</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</code></pre></div> <p><img alt=png src=output_62_1.png></p> <p>We can see that the two costliest properties are either historic apartments or a mansion. The three most popular yet cheap properties are small and quaint properties near popular destinations. </p> <h2 id=boxplot-and-violin-chart>Boxplot and Violin chart<a class=headerlink href=#boxplot-and-violin-chart title="Permanent link">&para;</a></h2> <p>To look at the variation in ratings within the different room types, we could use either a boxplot or a Violin plot as shown. </p> <div class=highlight><pre><span></span><code><span class=n>fs</span><span class=p>,</span> <span class=n>axs</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>20</span><span class=p>,</span><span class=mi>20</span><span class=p>))</span>
<span class=n>listing_detailed</span><span class=o>.</span><span class=n>boxplot</span><span class=p>(</span><span class=n>column</span> <span class=o>=</span> <span class=s1>&#39;review_scores_rating&#39;</span><span class=p>,</span> <span class=n>by</span> <span class=o>=</span> <span class=s1>&#39;room_type&#39;</span><span class=p>,</span> <span class=n>figsize</span> <span class=o>=</span> <span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=mi>20</span><span class=p>),</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>axs</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
<span class=n>sns</span><span class=o>.</span><span class=n>violinplot</span><span class=p>(</span><span class=s1>&#39;room_type&#39;</span><span class=p>,</span><span class=s1>&#39;review_scores_rating&#39;</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>listing_detailed</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>axs</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
<span class=n>plt</span><span class=o>.</span><span class=n>suptitle</span><span class=p>(</span><span class=s2>&quot;Airbnb London: Average rating across room types&quot;</span><span class=p>,</span> <span class=n>fontsize</span> <span class=o>=</span> <span class=mi>20</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mf>0.95</span><span class=p>)</span>

<span class=n>plt</span><span class=o>.</span><span class=n>figtext</span><span class=p>(</span><span class=mf>0.5</span><span class=p>,</span> <span class=mf>0.925</span><span class=p>,</span> <span class=s1>&#39;Boxplot (left) and Violin plot (right) for the average review across room types&#39;</span><span class=p>,</span>
            <span class=n>wrap</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>horizontalalignment</span><span class=o>=</span><span class=s1>&#39;center&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>12</span><span class=p>)</span>

<span class=n>axs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>)</span>

<span class=k>for</span> <span class=n>ax</span> <span class=ow>in</span> <span class=n>axs</span><span class=p>:</span>
    <span class=n>ax</span><span class=o>.</span><span class=n>set_ylim</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>6</span><span class=p>)</span>
    <span class=n>ax</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s1>&#39;Average Rating&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>12</span><span class=p>)</span>
    <span class=n>ax</span><span class=o>.</span><span class=n>set_xlabel</span><span class=p>(</span><span class=s1>&#39;Room types&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>12</span><span class=p>)</span>
</code></pre></div> <p><img alt=png src=output_65_0.png></p> <h2 id=cluster-map>Cluster map<a class=headerlink href=#cluster-map title="Permanent link">&para;</a></h2> <p>If we wanted to cluster localities based on some features, then cluster map is the ideal choice. In the below map, we cluster different locations based on one feature from each type. The features are also clustered to show the similarity between features. Finally, we use a white-blue colour palette for displaying the variation within the data. </p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>sklearn.preprocessing</span> <span class=kn>import</span> <span class=n>MinMaxScaler</span>
<span class=kn>import</span> <span class=nn>seaborn</span> <span class=k>as</span> <span class=nn>sns</span>
<span class=n>col_for_corr</span> <span class=o>=</span> <span class=p>[</span> <span class=s1>&#39;price&#39;</span><span class=p>,</span> <span class=s1>&#39;review_scores_rating&#39;</span><span class=p>,</span> <span class=s1>&#39;number_of_reviews&#39;</span><span class=p>,</span> <span class=s1>&#39;availability_90&#39;</span><span class=p>,</span> <span class=s1>&#39;minimum_nights_avg_ntm&#39;</span><span class=p>,</span> <span class=s1>&#39;bedrooms&#39;</span><span class=p>,</span> 
                <span class=s1>&#39;host_response_rate&#39;</span><span class=p>]</span>

<span class=n>df_cluster</span> <span class=o>=</span> <span class=n>listing_detailed</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;neighbourhood_cleansed&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>aggregate</span><span class=p>({</span>
    <span class=s1>&#39;review_scores_rating&#39;</span><span class=p>:</span><span class=s1>&#39;mean&#39;</span><span class=p>,</span>
    <span class=s1>&#39;number_of_reviews&#39;</span><span class=p>:</span><span class=s1>&#39;sum&#39;</span><span class=p>,</span>
    <span class=s1>&#39;availability_90&#39;</span><span class=p>:</span><span class=s1>&#39;mean&#39;</span><span class=p>,</span>
    <span class=s1>&#39;minimum_nights_avg_ntm&#39;</span><span class=p>:</span><span class=s1>&#39;mean&#39;</span><span class=p>,</span>
    <span class=s1>&#39;bedrooms&#39;</span><span class=p>:</span><span class=s1>&#39;mean&#39;</span><span class=p>,</span>
    <span class=s1>&#39;price&#39;</span><span class=p>:</span><span class=s1>&#39;mean&#39;</span><span class=p>,</span> 
    <span class=s1>&#39;host_response_rate&#39;</span><span class=p>:</span><span class=s1>&#39;mean&#39;</span>
<span class=p>})</span><span class=o>.</span><span class=n>reset_index</span><span class=p>()</span>

<span class=n>scaler</span> <span class=o>=</span> <span class=n>MinMaxScaler</span><span class=p>()</span>
<span class=n>df_cluster1</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>scaler</span><span class=o>.</span><span class=n>fit_transform</span><span class=p>(</span><span class=n>df_cluster</span><span class=p>[</span><span class=n>col_for_corr</span><span class=p>]),</span> <span class=n>columns</span><span class=o>=</span><span class=n>col_for_corr</span><span class=p>)</span>
<span class=n>df_cluster1</span><span class=o>.</span><span class=n>index</span> <span class=o>=</span> <span class=n>df_cluster</span><span class=o>.</span><span class=n>neighbourhood_cleansed</span>
</code></pre></div> <p><div class=highlight><pre><span></span><code><span class=n>crest_cmap</span> <span class=o>=</span> <span class=n>sns</span><span class=o>.</span><span class=n>color_palette</span><span class=p>(</span><span class=s2>&quot;crest&quot;</span><span class=p>,</span> <span class=n>as_cmap</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=n>crest_cmap</span>
</code></pre></div> <img alt=png src=crest_cmap.png></p> <div class=highlight><pre><span></span><code><span class=n>g</span> <span class=o>=</span> <span class=n>sns</span><span class=o>.</span><span class=n>clustermap</span><span class=p>(</span><span class=n>df_cluster1</span><span class=p>,</span> <span class=n>cmap</span> <span class=o>=</span> <span class=n>crest_cmap</span><span class=p>,</span> <span class=n>vmin</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>vmax</span> <span class=o>=</span> <span class=mi>1</span><span class=p>)</span>
<span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s2>&quot;Airbnb London: Clusters within London&quot;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span><span class=n>loc</span><span class=o>=</span><span class=s1>&#39;left&#39;</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=n>x</span> <span class=o>=</span> <span class=o>-</span><span class=mi>25</span><span class=p>)</span>
<span class=n>g</span><span class=o>.</span><span class=n>ax_cbar</span><span class=o>.</span><span class=n>set_position</span><span class=p>((</span><span class=mi>1</span><span class=p>,</span> <span class=mf>.2</span><span class=p>,</span> <span class=mf>.03</span><span class=p>,</span> <span class=mf>.4</span><span class=p>))</span>
<span class=n>g</span><span class=o>.</span><span class=n>ax_heatmap</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>)</span>

<span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><img alt=png src=output_69_0.png></p> <h2 id=references>References<a class=headerlink href=#references title="Permanent link">&para;</a></h2> <ol> <li>Visualisation Analytics and Design, <a href=https://www.cs.ubc.ca/~tmm/vadbook/ >Tamara Munzner</a> </li> <li>Class notes and assignments, Visualisation module, MSc Business Analytics, Imperial College London, Class 2020-22 </li> <li>Ahmed Khedr, Ankit Mahajan, Harsha Achyuthuni, Shaked Atia <em>Report: Visualizing demand,supply,prices and ratings for Airbnb in London</em> </li> <li><a href=https://github.com/JKU-ICG/python-visualization-tutorial/blob/master/03_StaticPlotting.ipynb>Visual Analytics lab at JKU Linz</a> </li> </ol> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../resume/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Resume" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Resume </div> </div> </a> <a href=../Visualization%20for%20predictive%20analytics/ class="md-footer__link md-footer__link--next" aria-label="Next: Vizualising for predictive analytics (Python)" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Vizualising for predictive analytics (Python) </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> <img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by/4.0/88x31.png> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/HarshaAsh target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://www.linkedin.com/in/sri-harsha-achyuthuni/ target=_blank rel=noopener title=www.linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://www.instagram.com/harshaash_com/ target=_blank rel=noopener title=www.instagram.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg> </a> <a href=https://www.facebook.com/sri.harsha.achyuthuni/ target=_blank rel=noopener title=www.facebook.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.tabs.link", "header.autohide", "navigation.sections", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../../assets/javascripts/workers/search.709b4209.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.56838a2c.min.js></script> </body> </html>