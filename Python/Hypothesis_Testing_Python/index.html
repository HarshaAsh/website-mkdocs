<!doctype html><html lang=en class=no-js> <head><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8786690539845043" crossorigin=anonymous></script><script async custom-element=amp-auto-ads src=https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js></script><script>
      (function () {
        function deferThirdParties() {
          var optimize = document.createElement("script");
          optimize.src = "https://www.googleoptimize.com/optimize.js?id=OPT-M98W6LW";
          optimize.async = true;
          document.head.appendChild(optimize);

          window._mfq = window._mfq || [];
          var mf = document.createElement("script");
          mf.type = "text/javascript";
          mf.defer = true;
          mf.src = "//cdn.mouseflow.com/projects/7b4494c9-7974-49f0-9777-d14450db37e6.js";
          document.head.appendChild(mf);
        }

        if (document.readyState === "complete") {
          deferThirdParties();
        } else {
          window.addEventListener("load", deferThirdParties, { once: true });
        }
      })();
    </script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Harsha's notes on data science"><meta name=author content="Harsha Achyuthuni"><link href=https://www.harshaash.com/Python/Hypothesis_Testing_Python/ rel=canonical><link rel=icon href=../../assets/images/logo.jpg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-7.2.4"><title>Hypothesis testing using Python - Data Science with Harsha</title><link rel=preload href=../../assets/stylesheets/main.f7f47774.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=../../assets/stylesheets/main.f7f47774.min.css></noscript><link rel=preload href=../../assets/stylesheets/palette.3f5d1f46.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=../../assets/stylesheets/palette.3f5d1f46.min.css></noscript><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"></noscript><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=preload href=../../overrides/assets/stylesheets/user_defined.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=../../overrides/assets/stylesheets/user_defined.css></noscript><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-65034507-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-scheme data-md-color-primary data-md-color-accent> <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <amp-auto-ads type=adsense data-ad-client=ca-pub-8786690539845043> </amp-auto-ads> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer style="margin-bottom: 0;"></label> <div data-md-component=skip> <a href=#hypothesis-testing-examples class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header style="background-color: navy;" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Data Science with Harsha" class="md-header__button md-logo" aria-label="Data Science with Harsha" data-md-component=logo> <img src=../../assets/images/logo.jpg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Data Science with Harsha </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Hypothesis testing using Python </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme data-md-color-primary data-md-color-accent aria-hidden=true type=radio name=__palette id=__palette_1> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme data-md-color-primary data-md-color-accent aria-hidden=true type=radio name=__palette id=__palette_3> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_4> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_3 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <a href=../../contact title="Contact Me" class=md-header__button aria-label="Contact Me" style="display: inline-flex; align-items: center; gap: 0.3rem; white-space: nowrap;"> <span class=md-icon style="display: inline-flex;"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"/></svg> </span> <span style="font-size: 0.8rem;">Contact Me</span> </a> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Data Science with Harsha" class="md-nav__button md-logo" aria-label="Data Science with Harsha" data-md-component=logo> <img src=../../assets/images/logo.jpg alt=logo> </a> Data Science with Harsha </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../../resume/ class=md-nav__link> Resume </a> </li> <li class=md-nav__item> <a href=../../learn/ class=md-nav__link> Learn </a> </li> <li class=md-nav__item> <a href=../../contact/ class=md-nav__link> Contact </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5> Blog <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Blog data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/Table_of_Contents/ class=md-nav__link> Table of Contents </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2 type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2> Visualization <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Visualization data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Visualization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Vizualisation%20using%20python%20Part%201/ class=md-nav__link> Vizualizing tabular data (Python) </a> </li> <li class=md-nav__item> <a href=../Visualization%20for%20predictive%20analytics/ class=md-nav__link> Vizualising for predictive analytics (Python) </a> </li> <li class=md-nav__item> <a href=../../R/Univariate-analysis/ class=md-nav__link> Univariate Analysis (R) </a> </li> <li class=md-nav__item> <a href=../../R/multivariateAnalysis/ class=md-nav__link> Multivariate Analysis (R) </a> </li> <li class=md-nav__item> <a href=../../R/multicollinearity/ class=md-nav__link> Multicollinearity (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_3 type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3> Statistics basics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Statistics basics" data-md-level=2> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Statistics basics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Statistics%20basics/ class=md-nav__link> Statistics Basics (Python) </a> </li> <li class=md-nav__item> <a href=../../R/Probability/ class=md-nav__link> Probability (R) </a> </li> <li class=md-nav__item> <a href=../../R/vectors/ class=md-nav__link> Vectors (R) </a> </li> <li class=md-nav__item> <a href=../../R/matrices/ class=md-nav__link> Matrices (R) </a> </li> <li class=md-nav__item> <a href=../Call%20center%20distributions/ class=md-nav__link> Call center distributions (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_4 type=checkbox id=__nav_5_4 checked> <label class=md-nav__link for=__nav_5_4> Hypothesis Testing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Hypothesis Testing" data-md-level=2> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Hypothesis Testing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/attendance_t_test/ class=md-nav__link> z-test and t-test (R) </a> </li> <li class=md-nav__item> <a href=../../R/anova/ class=md-nav__link> ANOVA Test (R) </a> </li> <li class=md-nav__item> <a href=../../R/chi-sq-goodness-of-fit/ class=md-nav__link> Chi-Square Goodness of fit (R) </a> </li> <li class=md-nav__item> <a href=../../R/chi-sq-test-of-independence/ class=md-nav__link> Chi-Square test of independence (R) </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Hypothesis testing using Python <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Hypothesis testing using Python </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#twoproportion-ztest-marketing-ab-conversion class=md-nav__link> Two‑Proportion Z‑Test : Marketing A/B Conversion </a> </li> <li class=md-nav__item> <a href=#welchs-ttest-effect-of-vitamin-c-on-tooth-growth class=md-nav__link> Welch’s t‑Test : Effect of Vitamin C on Tooth Growth </a> </li> <li class=md-nav__item> <a href=#oneway-anova-branchwise-gross-income-with-tukey-hsd class=md-nav__link> One‑Way ANOVA : Branch‑wise Gross Income (with Tukey HSD) </a> </li> <li class=md-nav__item> <a href=#chisquare-test-of-independence-gender-product-category-retail class=md-nav__link> Chi‑Square Test of Independence: Gender × Product Category (Retail) </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> References </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_5 type=checkbox id=__nav_5_5> <label class=md-nav__link for=__nav_5_5> Factor Analysis <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Factor Analysis" data-md-level=2> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> Factor Analysis </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/Curse-of-Dimensionality/ class=md-nav__link> Curse of dimensionality </a> </li> <li class=md-nav__item> <a href=../../R/EFA/ class=md-nav__link> Exploratory factor analysis (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_6 type=checkbox id=__nav_5_6> <label class=md-nav__link for=__nav_5_6> Preprocessing data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Preprocessing data" data-md-level=2> <label class=md-nav__title for=__nav_5_6> <span class="md-nav__icon md-icon"></span> Preprocessing data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/KNN_Imputation/ class=md-nav__link> Null Value Imputation (R) </a> </li> <li class=md-nav__item> <a href=../Machine%20Learning%20Part%201/ class=md-nav__link> Feature engineering (Python) </a> </li> <li class=md-nav__item> <a href=../../R/Handling-Imbalanced-classes/ class=md-nav__link> Handling Imbalanced Classes </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_7 type=checkbox id=__nav_5_7> <label class=md-nav__link for=__nav_5_7> Prediction algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Prediction algorithms" data-md-level=2> <label class=md-nav__title for=__nav_5_7> <span class="md-nav__icon md-icon"></span> Prediction algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_7_1 type=checkbox id=__nav_5_7_1> <label class=md-nav__link for=__nav_5_7_1> Classification Algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Classification Algorithms" data-md-level=3> <label class=md-nav__title for=__nav_5_7_1> <span class="md-nav__icon md-icon"></span> Classification Algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/logistic-regression/ class=md-nav__link> Logistic Regression (R) </a> </li> <li class=md-nav__item> <a href=../../R/CHAID/ class=md-nav__link> CHAID Decision Trees (R) </a> </li> <li class=md-nav__item> <a href=../../R/CART-Classification/ class=md-nav__link> CART Classification (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_7_2 type=checkbox id=__nav_5_7_2> <label class=md-nav__link for=__nav_5_7_2> Regression Algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Regression Algorithms" data-md-level=3> <label class=md-nav__title for=__nav_5_7_2> <span class="md-nav__icon md-icon"></span> Regression Algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/part-and-partial-corr/ class=md-nav__link> Part and partial correlation </a> </li> <li class=md-nav__item> <a href=../../R/Linear-regression/ class=md-nav__link> Linear Regression (R) </a> </li> <li class=md-nav__item> <a href=../Linear%20regression%20usecase%20mpg%20prediction/ class=md-nav__link> Lasso and Ridge regression (Python) </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_8 type=checkbox id=__nav_5_8> <label class=md-nav__link for=__nav_5_8> Machine Learning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Machine Learning" data-md-level=2> <label class=md-nav__title for=__nav_5_8> <span class="md-nav__icon md-icon"></span> Machine Learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://harshaachyuthuni.shinyapps.io/Machine_Learning/ class=md-nav__link> Interactive Machine Learning (RShiny) </a> </li> <li class=md-nav__item> <a href=../ML%20using%20scikit-learn/ class=md-nav__link> Multi models (Python) </a> </li> <li class=md-nav__item> <a href=../Explainable%20models%20using%20Heart%20Failure/ class=md-nav__link> Explainable ML (Python) </a> </li> <li class=md-nav__item> <a href=../Demonstrating%20online%20learning/ class=md-nav__link> Streaming Machine Learning (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_9 type=checkbox id=__nav_5_9> <label class=md-nav__link for=__nav_5_9> Time Series forecasting <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Time Series forecasting" data-md-level=2> <label class=md-nav__title for=__nav_5_9> <span class="md-nav__icon md-icon"></span> Time Series forecasting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/time-series/ class=md-nav__link> Introduction to stationarity (R) </a> </li> <li class=md-nav__item> <a href=../../R/Stationarity-tests/ class=md-nav__link> Stationary Tests (R) </a> </li> <li class=md-nav__item> <a href=../../R/ARIMA/ class=md-nav__link> ARIMA in R </a> </li> <li class=md-nav__item> <a href=../ARIMA%20Forecasting/ class=md-nav__link> ARIMA in Python </a> </li> <li class=md-nav__item> <a href=../../R/Seasonal-Time-Series/ class=md-nav__link> Seasonal time series (R) </a> </li> <li class=md-nav__item> <a href=../../R/VAR-models/ class=md-nav__link> VAR Models (R) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_10 type=checkbox id=__nav_5_10> <label class=md-nav__link for=__nav_5_10> Deep learning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Deep learning" data-md-level=2> <label class=md-nav__title for=__nav_5_10> <span class="md-nav__icon md-icon"></span> Deep learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ANN-1/ class=md-nav__link> Perceptron </a> </li> <li class=md-nav__item> <a href=../Backpropagation/ class=md-nav__link> Backpropagation </a> </li> <li class=md-nav__item> <a href=../DNN/ class=md-nav__link> Tensorflow and Keras </a> </li> <li class=md-nav__item> <a href=../Time%20series%20deep%20learning/ class=md-nav__link> Time series (python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_11 type=checkbox id=__nav_5_11> <label class=md-nav__link for=__nav_5_11> Generative AI <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Generative AI" data-md-level=2> <label class=md-nav__title for=__nav_5_11> <span class="md-nav__icon md-icon"></span> Generative AI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../LLM%20Tokenizers/ class=md-nav__link> LLM Tokenizers </a> </li> <li class=md-nav__item> <a href=../prompt_engineering_techniques/ class=md-nav__link> Prompt Engineering </a> </li> <li class=md-nav__item> <a href=../Agentic%20AI/ class=md-nav__link> Agentic AI </a> </li> <li class=md-nav__item> <a href=../RAG/ class=md-nav__link> RAG </a> </li> <li class=md-nav__item> <a href=../Blog%20validation/ class=md-nav__link> LangGraphs </a> </li> <li class=md-nav__item> <a href=../CrewAI/ class=md-nav__link> CrewAI </a> </li> <li class=md-nav__item> <a href=../../Others/yashoda_presentation/ class=md-nav__link> AI in Healthcare </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_12 type=checkbox id=__nav_5_12> <label class=md-nav__link for=__nav_5_12> Prescriptive Analytics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Prescriptive Analytics" data-md-level=2> <label class=md-nav__title for=__nav_5_12> <span class="md-nav__icon md-icon"></span> Prescriptive Analytics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/Linear-programming/ class=md-nav__link> Linear Programming (R) </a> </li> <li class=md-nav__item> <a href=../../Others/integer_programming_blog/ class=md-nav__link> Integer Programming tricks </a> </li> <li class=md-nav__item> <a href=../inventory_optimization_eoq_ortools/ class=md-nav__link> Inventory Optimisation (Python) </a> </li> <li class=md-nav__item> <a href=../../R/adoption_of_new_product/ class=md-nav__link> Adoption of new product (R) </a> </li> <li class=md-nav__item> <a href=../Diffusion%20on%20networks/ class=md-nav__link> Bass Forecasting model (Python) </a> </li> <li class=md-nav__item> <a href=../../Others/AHP/ class=md-nav__link> Analytic Hierarchy Process </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_13 type=checkbox id=__nav_5_13> <label class=md-nav__link for=__nav_5_13> Clustering <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Clustering data-md-level=2> <label class=md-nav__title for=__nav_5_13> <span class="md-nav__icon md-icon"></span> Clustering </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/hierarchical_clustering/ class=md-nav__link> Hierarchical Clustering </a> </li> <li class=md-nav__item> <a href=../../R/kMeansClustering/ class=md-nav__link> K-Means Clustering </a> </li> <li class=md-nav__item> <a href=../train_delays/ class=md-nav__link> DBSCAN Clustering (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_14 type=checkbox id=__nav_5_14> <label class=md-nav__link for=__nav_5_14> Reinforcement Learning <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Reinforcement Learning" data-md-level=2> <label class=md-nav__title for=__nav_5_14> <span class="md-nav__icon md-icon"></span> Reinforcement Learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../R/CustomerLifetimeValue/ class=md-nav__link> Customer Lifetime Value </a> </li> <li class=md-nav__item> <a href=../../R/recommendation-systems/ class=md-nav__link> Recommendation Systems (R) </a> </li> <li class=md-nav__item> <a href=../Neural_collaborative_filtering/ class=md-nav__link> Collaborative Filtering (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_15 type=checkbox id=__nav_5_15> <label class=md-nav__link for=__nav_5_15> Networks <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Networks data-md-level=2> <label class=md-nav__title for=__nav_5_15> <span class="md-nav__icon md-icon"></span> Networks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Introduction%20to%20Networkx/ class=md-nav__link> Introduction to NetworkX (Python) </a> </li> <li class=md-nav__item> <a href=../Network%20Science/ class=md-nav__link> Network Science (Python) </a> </li> <li class=md-nav__item> <a href=../Network%20centrality/ class=md-nav__link> Network Centrality (Python) </a> </li> <li class=md-nav__item> <a href=../Shortest%20path%20problems/ class=md-nav__link> Shortest path using integer programming (Python) </a> </li> <li class=md-nav__item> <a href=../Network%20Flow%20problems/ class=md-nav__link> Network flow problems (Python) </a> </li> <li class=md-nav__item> <a href=../Community%20detection/ class=md-nav__link> Community detection (Python) </a> </li> <li class=md-nav__item> <a href=../Bipartite%20matching/ class=md-nav__link> Bipartite matching (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_16 type=checkbox id=__nav_5_16> <label class=md-nav__link for=__nav_5_16> Deployment <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Deployment data-md-level=2> <label class=md-nav__title for=__nav_5_16> <span class="md-nav__icon md-icon"></span> Deployment </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Machine%20learning%20as%20HTTP%20Request/ class=md-nav__link> ML deployment in Flask (Python) </a> </li> <li class=md-nav__item> <a href=../Saving%20predictions%20in%20database/ class=md-nav__link> Handling databases using python </a> </li> <li class=md-nav__item> <a href=../ORM/ class=md-nav__link> ORM (Python) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_17 type=checkbox id=__nav_5_17> <label class=md-nav__link for=__nav_5_17> Career lessons <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Career lessons" data-md-level=2> <label class=md-nav__title for=__nav_5_17> <span class="md-nav__icon md-icon"></span> Career lessons </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/learnings/ class=md-nav__link> Learnings from failures </a> </li> <li class=md-nav__item> <a href=../../Others/podcast/ class=md-nav__link> Making ML Consumable </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_18 type=checkbox id=__nav_5_18> <label class=md-nav__link for=__nav_5_18> Higher education review <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Higher education review" data-md-level=2> <label class=md-nav__title for=__nav_5_18> <span class="md-nav__icon md-icon"></span> Higher education review </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/IIMB%20BAI/ class=md-nav__link> IIMB BAI </a> </li> <li class=md-nav__item> <a href=../../Others/part%20time%20data%20science%20masters/ class=md-nav__link> Part-time DS masters </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_19 type=checkbox id=__nav_5_19> <label class=md-nav__link for=__nav_5_19> External blogs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="External blogs" data-md-level=2> <label class=md-nav__title for=__nav_5_19> <span class="md-nav__icon md-icon"></span> External blogs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/Imperial%20College%20London/ class=md-nav__link> Imperial college London </a> </li> <li class=md-nav__item> <a href=../../Others/Publications/ class=md-nav__link> Publications/conferences </a> </li> <li class=md-nav__item> <a href=../../Others/Deployed%20apps/ class=md-nav__link> Deployed apps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_20 type=checkbox id=__nav_5_20> <label class=md-nav__link for=__nav_5_20> Projects <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Projects data-md-level=2> <label class=md-nav__title for=__nav_5_20> <span class="md-nav__icon md-icon"></span> Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Others/preventive_maintainence/ class=md-nav__link> Preventive maintainence </a> </li> <li class=md-nav__item> <a href=../../Others/Contract%20Intelligence%20tool/ class=md-nav__link> Contract Intelligence </a> </li> <li class=md-nav__item> <a href=../../Others/competitor%20intelligence/ class=md-nav__link> Competitor intelligence </a> </li> <li class=md-nav__item> <a href=../../Others/quiz%20generation/ class=md-nav__link> Quiz Generation </a> </li> <li class=md-nav__item> <a href=../../Others/Scarecrow/ class=md-nav__link> Intelligent annotation </a> </li> <li class=md-nav__item> <a href=../../Others/Demand%20Forecasting/ class=md-nav__link> Demand Forecasting </a> </li> <li class=md-nav__item> <a href=../../Others/bid%20allocation%20model/ class=md-nav__link> Bid Allocation </a> </li> <li class=md-nav__item> <a href=../../Others/IIMB%20project/ class=md-nav__link> Reward and Recognition contests </a> </li> <li class=md-nav__item> <a href=../../Others/supply%20chain%20analytics/ class=md-nav__link> Supply chain analytics </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#twoproportion-ztest-marketing-ab-conversion class=md-nav__link> Two‑Proportion Z‑Test : Marketing A/B Conversion </a> </li> <li class=md-nav__item> <a href=#welchs-ttest-effect-of-vitamin-c-on-tooth-growth class=md-nav__link> Welch’s t‑Test : Effect of Vitamin C on Tooth Growth </a> </li> <li class=md-nav__item> <a href=#oneway-anova-branchwise-gross-income-with-tukey-hsd class=md-nav__link> One‑Way ANOVA : Branch‑wise Gross Income (with Tukey HSD) </a> </li> <li class=md-nav__item> <a href=#chisquare-test-of-independence-gender-product-category-retail class=md-nav__link> Chi‑Square Test of Independence: Gender × Product Category (Retail) </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> References </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <p><meta name=description content="Comprehensive Hypothesis Testing in Python. Build a complete hypothesis testing toolkit in Python using four real-world examples."></p> <script type=text/javascript src=https://cdn.mathjax.org/mathjax/latest/MathJax.js>
MathJax.Hub.Config({
 extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js"],
 jax: ["input/TeX", "output/HTML-CSS"],
 tex2jax: {
     inlineMath: [ ['$','$'], ["\\(","\\)"] ],
     displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
 },
 "HTML-CSS": { availableFonts: ["TeX"] }
});
</script> <h1 id=hypothesis-testing-examples>Hypothesis Testing Examples<a class=headerlink href=#hypothesis-testing-examples title="Permanent link">&para;</a></h1> <p>This notebook demonstrates core hypothesis tests using publicly available datasets commonly used in data science:</p> <p><strong>Summary</strong> </p> <table> <thead> <tr> <th>Independent variable</th> <th>Dependent variable</th> <th>Type of plots</th> <th>Type of Hypothesis test</th> </tr> </thead> <tbody> <tr> <td>Continuous</td> <td>Continuous</td> <td>Scatter plots</td> <td>Correlation test</td> </tr> <tr> <td>Continuous</td> <td>Categorical</td> <td>Bar charts</td> <td>(two categories) t-test/z-test, (more than 2 categories) F test</td> </tr> <tr> <td>Categorical</td> <td>Continuous</td> <td>Joint Histograms</td> <td>(two categories) t-test/z-test, (more than 2 categories) F test</td> </tr> <tr> <td>Categorical</td> <td>Categorical</td> <td>Mosaic charts</td> <td>Chi-Square independence test</td> </tr> </tbody> </table> <p><strong>Examples</strong> We are using the below four usecases to demonstrate these:</p> <ul> <li><strong>Two‑proportion Z‑test</strong>: Marketing A/B conversion (Udacity e‑commerce A/B test)<br> Data source: <code>ab_data.csv</code> (<a href=https://github.com/beery4010/Analyze-AB-Test-Results/blob/master/ab_data.csv>GitHub mirror</a>) </li> <li><strong>Welch's t‑test</strong>: Supplement efficacy (ToothGrowth: Orange Juice vs Vitamin C)<br> Data source: Rdatasets (<a href=https://raw.githubusercontent.com/vincentarelbundock/Rdatasets/master/csv/datasets/ToothGrowth.csv>CSV</a>) </li> <li><strong>One‑way ANOVA + Tukey HSD</strong>: Branch‑wise gross income (Supermarket Sales)<br> Data source: selva86/datasets (<a href=https://raw.githubusercontent.com/selva86/datasets/master/supermarket_sales.csv>CSV</a>) </li> <li><strong>Chi‑square independence + Cramér's V</strong>: Gender vs Product category <br> Data source: Retail data (<a href=https://github.com/gokcengiz/Shopping-data-analysis>CSV</a>) </li> </ul> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span><span class=o>,</span><span class=w> </span><span class=nn>pandas</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pd</span>
<span class=kn>from</span><span class=w> </span><span class=nn>scipy</span><span class=w> </span><span class=kn>import</span> <span class=n>stats</span>
<span class=kn>import</span><span class=w> </span><span class=nn>statsmodels.api</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>sm</span>
<span class=kn>from</span><span class=w> </span><span class=nn>statsmodels.formula.api</span><span class=w> </span><span class=kn>import</span> <span class=n>ols</span>
<span class=kn>from</span><span class=w> </span><span class=nn>statsmodels.stats.proportion</span><span class=w> </span><span class=kn>import</span> <span class=n>proportions_ztest</span>
<span class=kn>from</span><span class=w> </span><span class=nn>statsmodels.stats.multicomp</span><span class=w> </span><span class=kn>import</span> <span class=n>pairwise_tukeyhsd</span>
<span class=kn>import</span><span class=w> </span><span class=nn>matplotlib.pyplot</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>plt</span>
<span class=kn>import</span><span class=w> </span><span class=nn>seaborn</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>sns</span>
<span class=n>pd</span><span class=o>.</span><span class=n>set_option</span><span class=p>(</span><span class=s1>&#39;display.float_format&#39;</span><span class=p>,</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>x</span><span class=si>:</span><span class=s2>,.6f</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div> <h2 id=twoproportion-ztest-marketing-ab-conversion>Two‑Proportion Z‑Test : Marketing A/B Conversion<a class=headerlink href=#twoproportion-ztest-marketing-ab-conversion title="Permanent link">&para;</a></h2> <p>In digital marketing, companies frequently run A/B tests to compare two versions of a webpage or campaign. The objective is to determine which version leads to higher conversions (e.g., purchases, sign-ups). In this dataset, the control group saw the old landing page, while the treatment group saw the new page. The hypothesis test checks if the new page significantly improves conversion rates. </p> <p><strong>Result Interpretation</strong>: After running the two-proportion Z-test, we obtained a p-value. </p> <p>If this p-value is greater than 0.05, we fail to reject the null hypothesis, meaning there is no statistically significant difference between the old and new pages. This suggests that the redesign did not lead to a measurable improvement in conversions.<br> If the p-value were below 0.05, we would conclude that the new page performs differently (better or worse) than the old one. </p> <p>This insight helps marketing teams decide whether to adopt the new design or stick with the old one, ensuring data-driven decisions rather than relying on intuition. </p> <p><strong>Dataset:</strong> Udacity e‑commerce A/B test (<code>ab_data.csv</code>).<br> <strong>Link:</strong> <a href=https://github.com/beery4010/Analyze-AB-Test-Results/blob/master/ab_data.csv>https://github.com/beery4010/Analyze-AB-Test-Results/blob/master/ab_data.csv</a> </p> <p><strong>Variables:</strong> <code>group</code> ∈ {control, treatment}, <code>converted</code> ∈ {0,1}. </p> <p><strong>Goal:</strong> Test whether conversion rates differ between <strong>old (control)</strong> and <strong>new (treatment)</strong> pages. </p> <p><strong>Hypotheses (two‑sided):</strong><br> - $ H_0: p_{\text{treatment}} = p_{ ext{control}} $<br> - $ H_1: p_{\text{treatment}} \neq p_{ ext{control}} $ </p> <p><strong>Assumptions:</strong> Independent Bernoulli trials; large sample sizes so normal approximation holds. </p> <div class=highlight><pre><span></span><code><span class=kn>from</span><span class=w> </span><span class=nn>statsmodels.stats.proportion</span><span class=w> </span><span class=kn>import</span> <span class=n>proportion_confint</span>

<span class=c1># Load dataset (raw CSV via GitHub)</span>
<span class=n>url_ab</span> <span class=o>=</span> <span class=s2>&quot;https://raw.githubusercontent.com/beery4010/Analyze-AB-Test-Results/master/ab_data.csv&quot;</span>
<span class=n>ab</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=n>url_ab</span><span class=p>)</span>
<span class=n>ab</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>user_id</th> <th>timestamp</th> <th>group</th> <th>landing_page</th> <th>converted</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>851104</td> <td>2017-01-21 22:11:48.556739</td> <td>control</td> <td>old_page</td> <td>0</td> </tr> <tr> <th>1</th> <td>804228</td> <td>2017-01-12 08:01:45.159739</td> <td>control</td> <td>old_page</td> <td>0</td> </tr> <tr> <th>2</th> <td>661590</td> <td>2017-01-11 16:55:06.154213</td> <td>treatment</td> <td>new_page</td> <td>0</td> </tr> <tr> <th>3</th> <td>853541</td> <td>2017-01-08 18:28:03.143765</td> <td>treatment</td> <td>new_page</td> <td>0</td> </tr> <tr> <th>4</th> <td>864975</td> <td>2017-01-21 01:52:26.210827</td> <td>control</td> <td>old_page</td> <td>1</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>294473</th> <td>751197</td> <td>2017-01-03 22:28:38.630509</td> <td>control</td> <td>old_page</td> <td>0</td> </tr> <tr> <th>294474</th> <td>945152</td> <td>2017-01-12 00:51:57.078372</td> <td>control</td> <td>old_page</td> <td>0</td> </tr> <tr> <th>294475</th> <td>734608</td> <td>2017-01-22 11:45:03.439544</td> <td>control</td> <td>old_page</td> <td>0</td> </tr> <tr> <th>294476</th> <td>697314</td> <td>2017-01-15 01:20:28.957438</td> <td>control</td> <td>old_page</td> <td>0</td> </tr> <tr> <th>294477</th> <td>715931</td> <td>2017-01-16 12:40:24.467417</td> <td>treatment</td> <td>new_page</td> <td>0</td> </tr> </tbody> </table> <p>294478 rows × 5 columns</p> </div> <div class=highlight><pre><span></span><code><span class=c1># Align groups and landing pages as done in the Udacity project</span>
<span class=n>ab</span> <span class=o>=</span> <span class=n>ab</span><span class=p>[((</span><span class=n>ab</span><span class=p>[</span><span class=s1>&#39;group&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;control&#39;</span><span class=p>)</span> <span class=o>&amp;</span> <span class=p>(</span><span class=n>ab</span><span class=p>[</span><span class=s1>&#39;landing_page&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;old_page&#39;</span><span class=p>))</span> <span class=o>|</span>
        <span class=p>((</span><span class=n>ab</span><span class=p>[</span><span class=s1>&#39;group&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;treatment&#39;</span><span class=p>)</span> <span class=o>&amp;</span> <span class=p>(</span><span class=n>ab</span><span class=p>[</span><span class=s1>&#39;landing_page&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;new_page&#39;</span><span class=p>))]</span>

<span class=c1># Compute conversions and sample sizes</span>
<span class=n>conv_control</span> <span class=o>=</span> <span class=n>ab</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>ab</span><span class=p>[</span><span class=s1>&#39;group&#39;</span><span class=p>]</span><span class=o>==</span><span class=s1>&#39;control&#39;</span><span class=p>,</span><span class=s1>&#39;converted&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
<span class=n>n_control</span>    <span class=o>=</span> <span class=n>ab</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>ab</span><span class=p>[</span><span class=s1>&#39;group&#39;</span><span class=p>]</span><span class=o>==</span><span class=s1>&#39;control&#39;</span><span class=p>,</span><span class=s1>&#39;converted&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>count</span><span class=p>()</span>
<span class=n>conv_treat</span>   <span class=o>=</span> <span class=n>ab</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>ab</span><span class=p>[</span><span class=s1>&#39;group&#39;</span><span class=p>]</span><span class=o>==</span><span class=s1>&#39;treatment&#39;</span><span class=p>,</span><span class=s1>&#39;converted&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
<span class=n>n_treat</span>      <span class=o>=</span> <span class=n>ab</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>ab</span><span class=p>[</span><span class=s1>&#39;group&#39;</span><span class=p>]</span><span class=o>==</span><span class=s1>&#39;treatment&#39;</span><span class=p>,</span><span class=s1>&#39;converted&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>count</span><span class=p>()</span>
<span class=nb>print</span><span class=p>(</span><span class=s1>&#39;In our control group, we had&#39;</span><span class=p>,</span> <span class=n>n_control</span><span class=p>,</span><span class=s1>&#39; out of whom &#39;</span><span class=p>,</span> <span class=n>conv_control</span><span class=p>,</span> <span class=s1>&#39;converted, making a probability of p=&#39;</span><span class=p>,</span> <span class=nb>round</span><span class=p>(</span><span class=n>conv_control</span><span class=o>/</span><span class=n>n_control</span><span class=p>,</span> <span class=mi>4</span><span class=p>))</span>
<span class=nb>print</span><span class=p>(</span><span class=s2>&quot;In our treatment group we had&quot;</span><span class=p>,</span> <span class=n>n_treat</span><span class=p>,</span> <span class=s2>&quot; out of which &quot;</span><span class=p>,</span> <span class=n>conv_treat</span><span class=p>,</span> <span class=s1>&#39;converted., making a probability of p=&#39;</span><span class=p>,</span> <span class=nb>round</span><span class=p>(</span><span class=n>conv_treat</span><span class=o>/</span><span class=n>n_treat</span><span class=p>,</span> <span class=mi>4</span><span class=p>))</span>
</code></pre></div> <div class=highlight><pre><span></span><code>In our control group, we had 145274  out of whom  17489 converted, making a probability of p= 0.1204
In our treatment group we had 145311  out of which  17264 converted., making a probability of p= 0.1188
</code></pre></div> <div class=highlight><pre><span></span><code><span class=c1># Two‑sided two‑proportion z‑test</span>
<span class=n>z_stat</span><span class=p>,</span> <span class=n>p_val</span> <span class=o>=</span> <span class=n>proportions_ztest</span><span class=p>([</span><span class=n>conv_treat</span><span class=p>,</span> <span class=n>conv_control</span><span class=p>],</span> <span class=p>[</span><span class=n>n_treat</span><span class=p>,</span> <span class=n>n_control</span><span class=p>],</span> <span class=n>alternative</span><span class=o>=</span><span class=s1>&#39;two-sided&#39;</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Two‑proportion z‑test: z = </span><span class=si>{</span><span class=n>z_stat</span><span class=si>:</span><span class=s2>.4f</span><span class=si>}</span><span class=s2>, p = </span><span class=si>{</span><span class=n>p_val</span><span class=si>:</span><span class=s2>.6f</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code>Two‑proportion z‑test: z = -1.3116, p = 0.189653
</code></pre></div> <div class=highlight><pre><span></span><code><span class=c1># Wald 95% CI for each proportion</span>
<span class=n>ci_treat</span> <span class=o>=</span> <span class=n>proportion_confint</span><span class=p>(</span><span class=n>conv_treat</span><span class=p>,</span> <span class=n>n_treat</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;normal&#39;</span><span class=p>)</span>
<span class=n>ci_ctrl</span>  <span class=o>=</span> <span class=n>proportion_confint</span><span class=p>(</span><span class=n>conv_control</span><span class=p>,</span> <span class=n>n_control</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;normal&#39;</span><span class=p>)</span>

<span class=c1># Difference in proportions &amp; CI (Wald)</span>
<span class=n>p_hat_t</span> <span class=o>=</span> <span class=n>conv_treat</span> <span class=o>/</span> <span class=n>n_treat</span>
<span class=n>p_hat_c</span> <span class=o>=</span> <span class=n>conv_control</span> <span class=o>/</span> <span class=n>n_control</span>
<span class=n>diff</span> <span class=o>=</span> <span class=n>p_hat_t</span> <span class=o>-</span> <span class=n>p_hat_c</span>
<span class=n>se</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>p_hat_t</span><span class=o>*</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=n>p_hat_t</span><span class=p>)</span><span class=o>/</span><span class=n>n_treat</span> <span class=o>+</span> <span class=n>p_hat_c</span><span class=o>*</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=n>p_hat_c</span><span class=p>)</span><span class=o>/</span><span class=n>n_control</span><span class=p>)</span>
<span class=n>ci_diff</span> <span class=o>=</span> <span class=p>(</span><span class=n>diff</span> <span class=o>-</span> <span class=mf>1.96</span><span class=o>*</span><span class=n>se</span><span class=p>,</span> <span class=n>diff</span> <span class=o>+</span> <span class=mf>1.96</span><span class=o>*</span><span class=n>se</span><span class=p>)</span>

<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Counts (treat/control): </span><span class=si>{</span><span class=n>conv_treat</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>n_treat</span><span class=si>}</span><span class=s2> vs </span><span class=si>{</span><span class=n>conv_control</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>n_control</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;p_treat = </span><span class=si>{</span><span class=n>p_hat_t</span><span class=si>:</span><span class=s2>.5f</span><span class=si>}</span><span class=s2> 95% CI </span><span class=si>{</span><span class=n>ci_treat</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;p_ctrl  = </span><span class=si>{</span><span class=n>p_hat_c</span><span class=si>:</span><span class=s2>.5f</span><span class=si>}</span><span class=s2> 95% CI </span><span class=si>{</span><span class=n>ci_ctrl</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Diff (treat - control) = </span><span class=si>{</span><span class=n>diff</span><span class=si>:</span><span class=s2>.5f</span><span class=si>}</span><span class=s2> 95% CI </span><span class=si>{</span><span class=n>ci_diff</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code>Counts (treat/control): 17264/145311 vs 17489/145274
p_treat = 0.11881 95% CI (0.11714362162601945, 0.12047087417952866)
p_ctrl  = 0.12039 95% CI (0.11871294722381814, 0.12205966177710426)
Diff (treat - control) = -0.00158 95% CI (-0.003938713688889012, 0.0007806004935147211)
</code></pre></div> <p><strong>Decision rule:</strong> If <em>p</em> &lt; 0.05, reject <span class=arithmatex>\(H_0\)</span> and conclude conversion differs between pages. Otherwise, fail to reject <span class=arithmatex>\(H_0\)</span>.<br> As p for two-proportion z-test is p=0.189 &gt; 0.05, we are failing to reject the Null hypothesis. This means that the new and old page have an approximately equal chance of converting users. We recommend to the e-commerce company to keep the old page. This will save time and money on creating a new page. </p> <div class=highlight><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>plot_z_hypothesis</span><span class=p>(</span>
    <span class=n>data_list</span><span class=p>,</span>
    <span class=n>pop_mean</span><span class=o>=</span><span class=mf>0.0</span><span class=p>,</span>
    <span class=n>pop_sd</span><span class=o>=</span><span class=mf>1.0</span><span class=p>,</span>
    <span class=n>alternative</span><span class=o>=</span><span class=s1>&#39;two.sided&#39;</span><span class=p>,</span>   <span class=c1># &#39;two.sided&#39; | &#39;greater&#39; | &#39;less&#39;</span>
    <span class=n>type_test</span> <span class=o>=</span> <span class=s1>&#39;mean&#39;</span><span class=p>,</span> <span class=c1>#&#39;mean&#39; | &#39;prob&#39;</span>
    <span class=n>alpha</span><span class=o>=</span><span class=mf>0.05</span><span class=p>,</span>
    <span class=n>label</span><span class=o>=</span><span class=s1>&#39;Sampling distribution&#39;</span><span class=p>,</span>
    <span class=n>title</span><span class=o>=</span><span class=s1>&#39;z-test (sampling distribution of x̄)&#39;</span><span class=p>,</span>
    <span class=n>x_label</span> <span class=o>=</span> <span class=s2>&quot;Sampling distribution of x̄&quot;</span><span class=p>,</span>
    <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>8</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Visualize z-test decision regions for the sampling distribution of the sample mean.</span>

<span class=sd>    Parameters</span>
<span class=sd>    ----------</span>
<span class=sd>    data_list : array-like</span>
<span class=sd>        Sample values (used only to compute x̄ and n).</span>
<span class=sd>    pop_mean : float</span>
<span class=sd>        Hypothesized population mean (μ under H0).</span>
<span class=sd>    pop_sd : float</span>
<span class=sd>        Known population standard deviation (σ).</span>
<span class=sd>    alternative : str</span>
<span class=sd>        &#39;two.sided&#39;, &#39;greater&#39;, or &#39;less&#39; (same semantics as your R code).</span>
<span class=sd>    alpha : float</span>
<span class=sd>        Significance level for critical regions.</span>
<span class=sd>    label : str</span>
<span class=sd>        Label for the distribution curve.</span>
<span class=sd>    title : str</span>
<span class=sd>        Plot title.</span>
<span class=sd>    figsize : tuple</span>
<span class=sd>        Figure size.</span>

<span class=sd>    Returns</span>
<span class=sd>    -------</span>
<span class=sd>    fig, ax : matplotlib Figure and Axes</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>x</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>asarray</span><span class=p>(</span><span class=n>data_list</span><span class=p>)</span>
    <span class=n>n</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
    <span class=n>xbar</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>mean</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>

    <span class=c1># Standard error of the mean</span>
    <span class=n>se</span> <span class=o>=</span> <span class=n>pop_sd</span> <span class=o>/</span> <span class=n>np</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>n</span><span class=p>)</span>

    <span class=c1># Range for plotting ±4 SE around μ (as in your R function)</span>
    <span class=n>grid</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>linspace</span><span class=p>(</span><span class=n>pop_mean</span> <span class=o>-</span> <span class=mi>4</span> <span class=o>*</span> <span class=n>se</span><span class=p>,</span> <span class=n>pop_mean</span> <span class=o>+</span> <span class=mi>4</span> <span class=o>*</span> <span class=n>se</span><span class=p>,</span> <span class=mi>4001</span><span class=p>)</span>
    <span class=n>pdf</span> <span class=o>=</span> <span class=n>stats</span><span class=o>.</span><span class=n>norm</span><span class=o>.</span><span class=n>pdf</span><span class=p>(</span><span class=n>grid</span><span class=p>,</span> <span class=n>loc</span><span class=o>=</span><span class=n>pop_mean</span><span class=p>,</span> <span class=n>scale</span><span class=o>=</span><span class=n>se</span><span class=p>)</span>

    <span class=c1># Compute critical cutoffs under H0 for the chosen alternative</span>
    <span class=k>if</span> <span class=n>alternative</span> <span class=o>==</span> <span class=s1>&#39;two.sided&#39;</span><span class=p>:</span>
        <span class=c1># symmetric cutoffs: (alpha/2) and (1 - alpha/2)</span>
        <span class=n>lower_cut</span> <span class=o>=</span> <span class=n>stats</span><span class=o>.</span><span class=n>norm</span><span class=o>.</span><span class=n>ppf</span><span class=p>(</span><span class=n>alpha</span> <span class=o>/</span> <span class=mi>2</span><span class=p>,</span> <span class=n>loc</span><span class=o>=</span><span class=n>pop_mean</span><span class=p>,</span> <span class=n>scale</span><span class=o>=</span><span class=n>se</span><span class=p>)</span>
        <span class=n>upper_cut</span> <span class=o>=</span> <span class=n>stats</span><span class=o>.</span><span class=n>norm</span><span class=o>.</span><span class=n>ppf</span><span class=p>(</span><span class=mi>1</span> <span class=o>-</span> <span class=n>alpha</span> <span class=o>/</span> <span class=mi>2</span><span class=p>,</span> <span class=n>loc</span><span class=o>=</span><span class=n>pop_mean</span><span class=p>,</span> <span class=n>scale</span><span class=o>=</span><span class=n>se</span><span class=p>)</span>

        <span class=c1># Retain between cutoffs; reject outside</span>
        <span class=n>retain_mask</span> <span class=o>=</span> <span class=p>(</span><span class=n>grid</span> <span class=o>&gt;=</span> <span class=n>lower_cut</span><span class=p>)</span> <span class=o>&amp;</span> <span class=p>(</span><span class=n>grid</span> <span class=o>&lt;=</span> <span class=n>upper_cut</span><span class=p>)</span>
        <span class=n>reject_mask</span> <span class=o>=</span> <span class=o>~</span><span class=n>retain_mask</span>

    <span class=k>elif</span> <span class=n>alternative</span> <span class=o>==</span> <span class=s1>&#39;greater&#39;</span><span class=p>:</span>
        <span class=c1># reject on right tail</span>
        <span class=n>cutoff</span> <span class=o>=</span> <span class=n>stats</span><span class=o>.</span><span class=n>norm</span><span class=o>.</span><span class=n>ppf</span><span class=p>(</span><span class=mi>1</span> <span class=o>-</span> <span class=n>alpha</span><span class=p>,</span> <span class=n>loc</span><span class=o>=</span><span class=n>pop_mean</span><span class=p>,</span> <span class=n>scale</span><span class=o>=</span><span class=n>se</span><span class=p>)</span>
        <span class=n>retain_mask</span> <span class=o>=</span> <span class=p>(</span><span class=n>grid</span> <span class=o>&lt;=</span> <span class=n>cutoff</span><span class=p>)</span>
        <span class=n>reject_mask</span> <span class=o>=</span> <span class=p>(</span><span class=n>grid</span> <span class=o>&gt;</span> <span class=n>cutoff</span><span class=p>)</span>
        <span class=n>lower_cut</span><span class=p>,</span> <span class=n>upper_cut</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=n>cutoff</span>

    <span class=k>elif</span> <span class=n>alternative</span> <span class=o>==</span> <span class=s1>&#39;less&#39;</span><span class=p>:</span>
        <span class=c1># reject on left tail</span>
        <span class=n>cutoff</span> <span class=o>=</span> <span class=n>stats</span><span class=o>.</span><span class=n>norm</span><span class=o>.</span><span class=n>ppf</span><span class=p>(</span><span class=n>alpha</span><span class=p>,</span> <span class=n>loc</span><span class=o>=</span><span class=n>pop_mean</span><span class=p>,</span> <span class=n>scale</span><span class=o>=</span><span class=n>se</span><span class=p>)</span>
        <span class=n>retain_mask</span> <span class=o>=</span> <span class=p>(</span><span class=n>grid</span> <span class=o>&gt;=</span> <span class=n>cutoff</span><span class=p>)</span>
        <span class=n>reject_mask</span> <span class=o>=</span> <span class=p>(</span><span class=n>grid</span> <span class=o>&lt;</span> <span class=n>cutoff</span><span class=p>)</span>
        <span class=n>lower_cut</span><span class=p>,</span> <span class=n>upper_cut</span> <span class=o>=</span> <span class=n>cutoff</span><span class=p>,</span> <span class=kc>None</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;alternative must be one of {&#39;two.sided&#39;,&#39;greater&#39;,&#39;less&#39;}&quot;</span><span class=p>)</span>

    <span class=c1># Build a DataFrame like the R pipeline for convenience (optional)</span>
    <span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>({</span><span class=s1>&#39;x&#39;</span><span class=p>:</span> <span class=n>grid</span><span class=p>,</span> <span class=s1>&#39;pdf&#39;</span><span class=p>:</span> <span class=n>pdf</span><span class=p>,</span> <span class=s1>&#39;retain&#39;</span><span class=p>:</span> <span class=n>retain_mask</span><span class=p>})</span>

    <span class=c1># Plot</span>
    <span class=n>fig</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=n>figsize</span><span class=o>=</span><span class=n>figsize</span><span class=p>)</span>
    <span class=n>ax</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;x&#39;</span><span class=p>],</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;pdf&#39;</span><span class=p>],</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;black&#39;</span><span class=p>,</span> <span class=n>lw</span><span class=o>=</span><span class=mf>1.2</span><span class=p>,</span> <span class=n>label</span><span class=o>=</span><span class=n>label</span><span class=p>)</span>

    <span class=c1># Shade retain region</span>
    <span class=n>ax</span><span class=o>.</span><span class=n>fill_between</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;x&#39;</span><span class=p>],</span> <span class=mi>0</span><span class=p>,</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;pdf&#39;</span><span class=p>],</span> <span class=n>where</span><span class=o>=</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;retain&#39;</span><span class=p>],</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;#69b3a2&#39;</span><span class=p>,</span> <span class=n>alpha</span><span class=o>=</span><span class=mf>0.4</span><span class=p>,</span> <span class=n>label</span><span class=o>=</span><span class=s1>&#39;Retain H₀&#39;</span><span class=p>)</span>

    <span class=c1># Shade reject region(s)</span>
    <span class=n>ax</span><span class=o>.</span><span class=n>fill_between</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;x&#39;</span><span class=p>],</span> <span class=mi>0</span><span class=p>,</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;pdf&#39;</span><span class=p>],</span> <span class=n>where</span><span class=o>=~</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;retain&#39;</span><span class=p>],</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;#e76f51&#39;</span><span class=p>,</span> <span class=n>alpha</span><span class=o>=</span><span class=mf>0.4</span><span class=p>,</span> <span class=n>label</span><span class=o>=</span><span class=s1>&#39;Reject H₀&#39;</span><span class=p>)</span>

    <span class=c1># Critical lines</span>
    <span class=k>if</span> <span class=n>alternative</span> <span class=o>==</span> <span class=s1>&#39;two.sided&#39;</span><span class=p>:</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>axvline</span><span class=p>(</span><span class=n>lower_cut</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;#e76f51&#39;</span><span class=p>,</span> <span class=n>ls</span><span class=o>=</span><span class=s1>&#39;--&#39;</span><span class=p>,</span> <span class=n>lw</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>axvline</span><span class=p>(</span><span class=n>upper_cut</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;#e76f51&#39;</span><span class=p>,</span> <span class=n>ls</span><span class=o>=</span><span class=s1>&#39;--&#39;</span><span class=p>,</span> <span class=n>lw</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>text</span><span class=p>(</span><span class=n>lower_cut</span><span class=p>,</span> <span class=n>ax</span><span class=o>.</span><span class=n>get_ylim</span><span class=p>()[</span><span class=mi>1</span><span class=p>]</span><span class=o>*</span><span class=mf>0.3</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&quot;Lower crit</span><span class=se>\n</span><span class=si>{</span><span class=n>lower_cut</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>ha</span><span class=o>=</span><span class=s1>&#39;right&#39;</span><span class=p>,</span> <span class=n>va</span><span class=o>=</span><span class=s1>&#39;top&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>9</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>text</span><span class=p>(</span><span class=n>upper_cut</span><span class=p>,</span> <span class=n>ax</span><span class=o>.</span><span class=n>get_ylim</span><span class=p>()[</span><span class=mi>1</span><span class=p>]</span><span class=o>*</span><span class=mf>0.3</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&quot;Upper crit</span><span class=se>\n</span><span class=si>{</span><span class=n>upper_cut</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>ha</span><span class=o>=</span><span class=s1>&#39;left&#39;</span><span class=p>,</span> <span class=n>va</span><span class=o>=</span><span class=s1>&#39;top&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>9</span><span class=p>)</span>
    <span class=k>elif</span> <span class=n>alternative</span> <span class=o>==</span> <span class=s1>&#39;greater&#39;</span><span class=p>:</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>axvline</span><span class=p>(</span><span class=n>upper_cut</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;#e76f51&#39;</span><span class=p>,</span> <span class=n>ls</span><span class=o>=</span><span class=s1>&#39;--&#39;</span><span class=p>,</span> <span class=n>lw</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>text</span><span class=p>(</span><span class=n>upper_cut</span><span class=p>,</span> <span class=n>ax</span><span class=o>.</span><span class=n>get_ylim</span><span class=p>()[</span><span class=mi>1</span><span class=p>]</span><span class=o>*</span><span class=mf>0.9</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&quot;Crit</span><span class=se>\n</span><span class=si>{</span><span class=n>upper_cut</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>ha</span><span class=o>=</span><span class=s1>&#39;left&#39;</span><span class=p>,</span> <span class=n>va</span><span class=o>=</span><span class=s1>&#39;top&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>9</span><span class=p>)</span>
    <span class=k>elif</span> <span class=n>alternative</span> <span class=o>==</span> <span class=s1>&#39;less&#39;</span><span class=p>:</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>axvline</span><span class=p>(</span><span class=n>lower_cut</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;#e76f51&#39;</span><span class=p>,</span> <span class=n>ls</span><span class=o>=</span><span class=s1>&#39;--&#39;</span><span class=p>,</span> <span class=n>lw</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>text</span><span class=p>(</span><span class=n>lower_cut</span><span class=p>,</span> <span class=n>ax</span><span class=o>.</span><span class=n>get_ylim</span><span class=p>()[</span><span class=mi>1</span><span class=p>]</span><span class=o>*</span><span class=mf>0.9</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&quot;Crit</span><span class=se>\n</span><span class=si>{</span><span class=n>lower_cut</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>ha</span><span class=o>=</span><span class=s1>&#39;right&#39;</span><span class=p>,</span> <span class=n>va</span><span class=o>=</span><span class=s1>&#39;top&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>9</span><span class=p>)</span>

    <span class=c1># x̄ line and annotation</span>
    <span class=k>if</span><span class=p>(</span><span class=n>type_test</span> <span class=o>==</span> <span class=s1>&#39;prob&#39;</span><span class=p>):</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>axvline</span><span class=p>(</span><span class=n>xbar</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;#264653&#39;</span><span class=p>,</span> <span class=n>lw</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>ls</span><span class=o>=</span><span class=s1>&#39;-&#39;</span><span class=p>,</span> <span class=n>label</span><span class=o>=</span><span class=s1>&#39;z&#39;</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>annotate</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;z = </span><span class=si>{</span><span class=n>xbar</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>,</span>
                <span class=n>xy</span><span class=o>=</span><span class=p>(</span><span class=n>xbar</span><span class=p>,</span> <span class=n>stats</span><span class=o>.</span><span class=n>norm</span><span class=o>.</span><span class=n>pdf</span><span class=p>(</span><span class=n>xbar</span><span class=p>,</span> <span class=n>loc</span><span class=o>=</span><span class=n>pop_mean</span><span class=p>,</span> <span class=n>scale</span><span class=o>=</span><span class=n>se</span><span class=p>)),</span>
                <span class=n>xytext</span><span class=o>=</span><span class=p>(</span><span class=n>xbar</span><span class=p>,</span> <span class=n>ax</span><span class=o>.</span><span class=n>get_ylim</span><span class=p>()[</span><span class=mi>1</span><span class=p>]</span><span class=o>*</span><span class=mf>0.6</span><span class=p>),</span>
                <span class=n>arrowprops</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>arrowstyle</span><span class=o>=</span><span class=s1>&#39;-&gt;&#39;</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;#264653&#39;</span><span class=p>),</span>
                <span class=n>ha</span><span class=o>=</span><span class=s1>&#39;center&#39;</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;#264653&#39;</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>axvline</span><span class=p>(</span><span class=n>xbar</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;#264653&#39;</span><span class=p>,</span> <span class=n>lw</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>ls</span><span class=o>=</span><span class=s1>&#39;-&#39;</span><span class=p>,</span> <span class=n>label</span><span class=o>=</span><span class=s1>&#39;Sample mean (x̄)&#39;</span><span class=p>)</span>
        <span class=n>ax</span><span class=o>.</span><span class=n>annotate</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;x̄ = </span><span class=si>{</span><span class=n>xbar</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>,</span>
                <span class=n>xy</span><span class=o>=</span><span class=p>(</span><span class=n>xbar</span><span class=p>,</span> <span class=n>stats</span><span class=o>.</span><span class=n>norm</span><span class=o>.</span><span class=n>pdf</span><span class=p>(</span><span class=n>xbar</span><span class=p>,</span> <span class=n>loc</span><span class=o>=</span><span class=n>pop_mean</span><span class=p>,</span> <span class=n>scale</span><span class=o>=</span><span class=n>se</span><span class=p>)),</span>
                <span class=n>xytext</span><span class=o>=</span><span class=p>(</span><span class=n>xbar</span><span class=p>,</span> <span class=n>ax</span><span class=o>.</span><span class=n>get_ylim</span><span class=p>()[</span><span class=mi>1</span><span class=p>]</span><span class=o>*</span><span class=mf>0.6</span><span class=p>),</span>
                <span class=n>arrowprops</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>arrowstyle</span><span class=o>=</span><span class=s1>&#39;-&gt;&#39;</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;#264653&#39;</span><span class=p>),</span>
                <span class=n>ha</span><span class=o>=</span><span class=s1>&#39;center&#39;</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;#264653&#39;</span><span class=p>)</span>

    <span class=n>ax</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=n>title</span><span class=p>)</span>
    <span class=n>ax</span><span class=o>.</span><span class=n>set_xlabel</span><span class=p>(</span><span class=n>x_label</span><span class=p>)</span>
    <span class=n>ax</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s2>&quot;Density&quot;</span><span class=p>)</span>
    <span class=n>ax</span><span class=o>.</span><span class=n>legend</span><span class=p>(</span><span class=n>loc</span><span class=o>=</span><span class=s1>&#39;upper right&#39;</span><span class=p>,</span> <span class=n>frameon</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
    <span class=n>ax</span><span class=o>.</span><span class=n>grid</span><span class=p>(</span><span class=n>alpha</span><span class=o>=</span><span class=mf>0.15</span><span class=p>)</span>
    <span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>();</span>
<span class=n>plot_z_hypothesis</span><span class=p>([</span><span class=n>z_stat</span><span class=p>],</span> <span class=n>type_test</span> <span class=o>=</span> <span class=s1>&#39;prob&#39;</span><span class=p>,</span> <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Two proportion z-test&#39;</span><span class=p>,</span> <span class=n>label</span> <span class=o>=</span> <span class=s1>&#39;Standard Normal&#39;</span><span class=p>,</span> <span class=n>x_label</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span><span class=p>)</span>
</code></pre></div> <p><img alt=png src=output_8_0.png></p> <h2 id=welchs-ttest-effect-of-vitamin-c-on-tooth-growth>Welch’s t‑Test : Effect of Vitamin C on Tooth Growth<a class=headerlink href=#welchs-ttest-effect-of-vitamin-c-on-tooth-growth title="Permanent link">&para;</a></h2> <p>This classic dataset explores the impact of Vitamin C on tooth growth in guinea pigs, a foundational experiment in nutritional science. The response variable is the length of <em>odontoblasts</em>, which are cells responsible for tooth development. Sixty guinea pigs were randomly assigned to receive Vitamin C in one of two delivery methods:<br> 1. Orange Juice (OJ)<br> 2. Ascorbic Acid (VC) (a synthetic form of Vitamin C) </p> <p>Each animal was also given one of three dose levels: 0.5 mg/day, 1 mg/day, or 2 mg/day. The experiment aims to determine whether the delivery method influences tooth growth, controlling for dosage. </p> <p><strong>Why it matters</strong>:<br> Understanding the effectiveness of different Vitamin C sources can guide dietary recommendations and supplement formulations. In modern analytics, this type of test parallels comparing two treatments or interventions in healthcare or A/B testing in product design. </p> <p><strong>Hypothesis</strong>:<br> <span class=arithmatex>\(H_0\)</span>: The mean tooth length is the same for both delivery methods (OJ and VC).<br> <span class=arithmatex>\(H_1\)</span>: The mean tooth length differs between the two methods.<br> This analysis focuses on the 0.5 mg/day dosage level; similar analyses can be performed for other dosages. </p> <p><strong>Result Interpretation</strong>: After running Welch’s t-test, if the p-value is less than 0.05, we reject the null hypothesis, concluding that the delivery method significantly affects tooth growth. If the p-value is greater than 0.05, we fail to reject <span class=arithmatex>\(H_0\)</span>, suggesting no measurable difference between OJ and VC. Additionally, reporting Cohen’s d helps quantify the magnitude of the difference, which is crucial for practical significance. </p> <p><strong>Dataset:</strong> <a href=https://vincentarelbundock.github.io/Rdatasets/doc/datasets/ToothGrowth.html>R <code>ToothGrowth</code> (OJ vs VC)</a>.<br> <strong>CSV:</strong> <a href=https://raw.githubusercontent.com/vincentarelbundock/Rdatasets/master/csv/datasets/ToothGrowth.csv>https://raw.githubusercontent.com/vincentarelbundock/Rdatasets/master/csv/datasets/ToothGrowth.csv</a> </p> <p><strong>Variables:</strong> <code>len</code> (tooth length), <code>supp</code> ∈ {OJ, VC}. </p> <p><strong>Hypotheses (two‑sided):</strong><br> - <span class=arithmatex>\(H_0: \mu_{\text{OJ}} = \mu_{ ext{VC}}\)</span><br> - <span class=arithmatex>\(H_1: \mu_{\text{OJ}}\neq \mu_{ ext{VC}}\)</span> </p> <p><strong>Assumptions:</strong> Independent samples; normality (approx); Welch’s t‑test does not assume equal variance. </p> <div class=highlight><pre><span></span><code><span class=c1># Load ToothGrowth</span>
<span class=n>url_tg</span> <span class=o>=</span> <span class=s2>&quot;https://raw.githubusercontent.com/vincentarelbundock/Rdatasets/master/csv/datasets/ToothGrowth.csv&quot;</span>
<span class=n>tg</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=n>url_tg</span><span class=p>)</span>
<span class=c1># Drop the Rdatasets index column</span>
<span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>tg</span><span class=o>.</span><span class=n>columns</span><span class=p>:</span>
    <span class=k>if</span> <span class=s1>&#39;Unnamed&#39;</span> <span class=ow>in</span> <span class=n>c</span><span class=p>:</span>
        <span class=n>tg</span> <span class=o>=</span> <span class=n>tg</span><span class=o>.</span><span class=n>drop</span><span class=p>(</span><span class=n>columns</span><span class=o>=</span><span class=p>[</span><span class=n>c</span><span class=p>])</span>
<span class=n>tg</span><span class=o>.</span><span class=n>head</span><span class=p>()</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>rownames</th> <th>len</th> <th>supp</th> <th>dose</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>1</td> <td>4.200000</td> <td>VC</td> <td>0.500000</td> </tr> <tr> <th>1</th> <td>2</td> <td>11.500000</td> <td>VC</td> <td>0.500000</td> </tr> <tr> <th>2</th> <td>3</td> <td>7.300000</td> <td>VC</td> <td>0.500000</td> </tr> <tr> <th>3</th> <td>4</td> <td>5.800000</td> <td>VC</td> <td>0.500000</td> </tr> <tr> <th>4</th> <td>5</td> <td>6.400000</td> <td>VC</td> <td>0.500000</td> </tr> </tbody> </table> </div> <div class=highlight><pre><span></span><code><span class=c1># Groups</span>
<span class=n>oj</span> <span class=o>=</span> <span class=n>tg</span><span class=o>.</span><span class=n>loc</span><span class=p>[(</span><span class=n>tg</span><span class=p>[</span><span class=s1>&#39;supp&#39;</span><span class=p>]</span><span class=o>==</span><span class=s1>&#39;OJ&#39;</span><span class=p>)</span> <span class=o>&amp;</span> <span class=p>(</span><span class=n>tg</span><span class=o>.</span><span class=n>dose</span> <span class=o>==</span> <span class=mf>0.5</span><span class=p>),</span><span class=s1>&#39;len&#39;</span><span class=p>]</span>
<span class=n>vc</span> <span class=o>=</span> <span class=n>tg</span><span class=o>.</span><span class=n>loc</span><span class=p>[(</span><span class=n>tg</span><span class=p>[</span><span class=s1>&#39;supp&#39;</span><span class=p>]</span><span class=o>==</span><span class=s1>&#39;VC&#39;</span><span class=p>)</span> <span class=o>&amp;</span> <span class=p>(</span><span class=n>tg</span><span class=o>.</span><span class=n>dose</span> <span class=o>==</span> <span class=mf>0.5</span><span class=p>),</span><span class=s1>&#39;len&#39;</span><span class=p>]</span>

<span class=c1># Welch&#39;s t-test</span>
<span class=n>t_stat</span><span class=p>,</span> <span class=n>p_val</span> <span class=o>=</span> <span class=n>stats</span><span class=o>.</span><span class=n>ttest_ind</span><span class=p>(</span><span class=n>oj</span><span class=p>,</span> <span class=n>vc</span><span class=p>,</span> <span class=n>equal_var</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>

<span class=c1># Cohen&#39;s d (using pooled SD with group sizes)</span>
<span class=k>def</span><span class=w> </span><span class=nf>cohens_d</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span>
    <span class=n>nx</span><span class=p>,</span> <span class=n>ny</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>x</span><span class=p>),</span> <span class=nb>len</span><span class=p>(</span><span class=n>y</span><span class=p>)</span>
    <span class=n>sx2</span><span class=p>,</span> <span class=n>sy2</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>var</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>ddof</span><span class=o>=</span><span class=mi>1</span><span class=p>),</span> <span class=n>np</span><span class=o>.</span><span class=n>var</span><span class=p>(</span><span class=n>y</span><span class=p>,</span> <span class=n>ddof</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
    <span class=n>sp2</span> <span class=o>=</span> <span class=p>((</span><span class=n>nx</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span><span class=o>*</span><span class=n>sx2</span> <span class=o>+</span> <span class=p>(</span><span class=n>ny</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span><span class=o>*</span><span class=n>sy2</span><span class=p>)</span> <span class=o>/</span> <span class=p>(</span><span class=n>nx</span><span class=o>+</span><span class=n>ny</span><span class=o>-</span><span class=mi>2</span><span class=p>)</span>
    <span class=n>d</span> <span class=o>=</span> <span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>mean</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=o>-</span> <span class=n>np</span><span class=o>.</span><span class=n>mean</span><span class=p>(</span><span class=n>y</span><span class=p>))</span> <span class=o>/</span> <span class=n>np</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>sp2</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>d</span>

<span class=n>d</span> <span class=o>=</span> <span class=n>cohens_d</span><span class=p>(</span><span class=n>oj</span><span class=p>,</span> <span class=n>vc</span><span class=p>)</span>

<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Welch t‑test: t = </span><span class=si>{</span><span class=n>t_stat</span><span class=si>:</span><span class=s2>.4f</span><span class=si>}</span><span class=s2>, p = </span><span class=si>{</span><span class=n>p_val</span><span class=si>:</span><span class=s2>.6f</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Mean&#39;s: OJ = </span><span class=si>{</span><span class=n>np</span><span class=o>.</span><span class=n>mean</span><span class=p>(</span><span class=n>oj</span><span class=p>)</span><span class=si>:</span><span class=s2>.3f</span><span class=si>}</span><span class=s2>, VC = </span><span class=si>{</span><span class=n>np</span><span class=o>.</span><span class=n>mean</span><span class=p>(</span><span class=n>vc</span><span class=p>)</span><span class=si>:</span><span class=s2>.3f</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Cohen&#39;s d = </span><span class=si>{</span><span class=n>d</span><span class=si>:</span><span class=s2>.3f</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code>Welch t‑test: t = 3.1697, p = 0.006359
Mean&#39;s: OJ = 13.230, VC = 7.980
Cohen&#39;s d = 1.418
</code></pre></div> <p><strong>Decision rule:</strong> If <em>p</em> &lt; 0.05, reject <span class=arithmatex>\(H_0\)</span> → evidence that delivery method affects mean tooth length. Cohen's <em>d</em> values of 0.2 means small difference between the groups, 0.5 for medium, and 0.8 or greater for large effects. </p> <p><strong>Result</strong>: OJ is more effective: T-tests show a statistically significant difference between the two delivery methods at these lower doses, with orange juice leading to greater tooth growth. P-values: The p-values are below <span class=arithmatex>\(0.05\)</span>, indicating the difference is unlikely to be due to random chance. For example, at 0.5mg, the p-value is around <span class=arithmatex>\(0.006\)</span>. </p> <div class=highlight><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>plot_bivariate_histograms</span><span class=p>(</span><span class=n>dataset</span><span class=p>,</span> <span class=n>con_col</span><span class=p>,</span> <span class=n>cat_col</span><span class=p>,</span> <span class=n>title</span><span class=o>=</span><span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>x_label</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span><span class=p>):</span>
    <span class=n>bi_con_cat</span> <span class=o>=</span> <span class=n>dataset</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=n>cat_col</span><span class=p>])[</span><span class=n>con_col</span><span class=p>]</span><span class=o>.</span><span class=n>plot</span><span class=o>.</span><span class=n>hist</span><span class=p>(</span><span class=n>alpha</span> <span class=o>=</span> <span class=mf>0.5</span><span class=p>)</span>
    <span class=n>plt</span><span class=o>.</span><span class=n>xlabel</span><span class=p>(</span><span class=n>con_col</span><span class=p>)</span>
    <span class=n>plt</span><span class=o>.</span><span class=n>legend</span><span class=p>(</span><span class=n>dataset</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=n>cat_col</span><span class=p>])[</span><span class=n>con_col</span><span class=p>]</span><span class=o>.</span><span class=n>count</span><span class=p>()</span><span class=o>.</span><span class=n>axes</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>tolist</span><span class=p>())</span>
    <span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=n>title</span><span class=p>)</span>
    <span class=n>plt</span><span class=o>.</span><span class=n>xlabel</span><span class=p>(</span><span class=n>x_label</span><span class=p>)</span>
    <span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>();</span>
<span class=n>plot_bivariate_histograms</span><span class=p>(</span><span class=n>tg</span><span class=p>[</span><span class=n>tg</span><span class=o>.</span><span class=n>dose</span><span class=o>==</span><span class=mf>0.5</span><span class=p>],</span> <span class=s1>&#39;len&#39;</span><span class=p>,</span> <span class=s1>&#39;supp&#39;</span><span class=p>,</span> <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Joint histogram&#39;</span><span class=p>,</span> <span class=n>x_label</span> <span class=o>=</span> <span class=s1>&#39;Length&#39;</span><span class=p>)</span>
</code></pre></div> <p><img alt=png src=output_13_0.png></p> <h2 id=oneway-anova-branchwise-gross-income-with-tukey-hsd>One‑Way ANOVA : Branch‑wise Gross Income (with Tukey HSD)<a class=headerlink href=#oneway-anova-branchwise-gross-income-with-tukey-hsd title="Permanent link">&para;</a></h2> <p>This dataset captures detailed transaction records from a supermarket chain operating in Myanmar, covering three major cities: Yangon, Naypyitaw, and Mandalay. The data spans a three-month period from January to March 2019, providing a rich view of retail operations. Each record includes information on branch location, product line, customer demographics, payment methods, and financial metrics such as gross income and total sales.<br> For our hypothesis test, we focus on whether branch location influences gross income, which is a critical metric for profitability. Retail managers often need to know if certain branches consistently outperform others, as this insight can guide resource allocation, marketing strategies, and inventory planning.<br> <strong>Hypothesis</strong>:<br> <span class=arithmatex>\(H_0\)</span>: The mean gross income is the same across all three branches (A, B, C). <br> <span class=arithmatex>\(H_1\)</span>: At least one branch has a different mean gross income. </p> <p><strong>Why it matters</strong>: If the test reveals significant differences, management can investigate underlying factors such as customer purchasing power, branch size, or local marketing effectiveness. This analysis mirrors real-world business intelligence tasks where data-driven decisions optimize operations and profitability. </p> <p><strong>Result Interpretation</strong>: After running ANOVA, if the p-value is less than 0.05, we reject the null hypothesis, concluding that branch location impacts gross income. Post-hoc analysis using Tukey HSD identifies which branches differ significantly, enabling targeted strategies for improvement. </p> <p><strong>Dataset:</strong> <a href=https://www.kaggle.com/datasets/faresashraf1001/supermarket-sales>Supermarket Sales (three branches: A, B, C)</a>.<br> <strong>CSV:</strong> <a href=https://raw.githubusercontent.com/selva86/datasets/master/supermarket_sales.csv>https://raw.githubusercontent.com/selva86/datasets/master/supermarket_sales.csv</a> </p> <p><strong>Outcome:</strong> <code>gross income</code> (continuous). <strong>Factor:</strong> <code>Branch</code> (A/B/C). </p> <p><strong>Hypotheses:</strong><br> - <span class=arithmatex>\(H_0: \mu_A = \mu_B = \mu_C\)</span><br> - <span class=arithmatex>\(H_1\)</span>: At least one mean differs </p> <p><strong>Plan:</strong> Fit ANOVA (ANalysis Of VAriance), check homogeneity using <strong>Levene</strong>, then <strong>Tukey HSD</strong> for post‑hoc pairwise comparisons. </p> <div class=highlight><pre><span></span><code><span class=c1># Load Supermarket Sales</span>
<span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s2>&quot;https://raw.githubusercontent.com/selva86/datasets/master/supermarket_sales.csv&quot;</span><span class=p>)</span>

<span class=c1># Tidy column names</span>
<span class=n>df</span><span class=o>.</span><span class=n>columns</span> <span class=o>=</span> <span class=p>[</span><span class=n>c</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s1>&#39; &#39;</span><span class=p>,</span> <span class=s1>&#39;_&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>df</span><span class=o>.</span><span class=n>columns</span><span class=p>]</span>

<span class=n>df</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>invoice_id</th> <th>branch</th> <th>city</th> <th>customer_type</th> <th>gender</th> <th>product_line</th> <th>unit_price</th> <th>quantity</th> <th>tax_5%</th> <th>total</th> <th>date</th> <th>time</th> <th>payment</th> <th>cogs</th> <th>gross_margin_percentage</th> <th>gross_income</th> <th>rating</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>750-67-8428</td> <td>A</td> <td>Yangon</td> <td>Member</td> <td>Female</td> <td>Health and beauty</td> <td>74.690000</td> <td>7</td> <td>26.141500</td> <td>548.971500</td> <td>1/5/2019</td> <td>13:08</td> <td>Ewallet</td> <td>522.830000</td> <td>4.761905</td> <td>26.141500</td> <td>9.100000</td> </tr> <tr> <th>1</th> <td>226-31-3081</td> <td>C</td> <td>Naypyitaw</td> <td>Normal</td> <td>Female</td> <td>Electronic accessories</td> <td>15.280000</td> <td>5</td> <td>3.820000</td> <td>80.220000</td> <td>3/8/2019</td> <td>10:29</td> <td>Cash</td> <td>76.400000</td> <td>4.761905</td> <td>3.820000</td> <td>9.600000</td> </tr> <tr> <th>2</th> <td>631-41-3108</td> <td>A</td> <td>Yangon</td> <td>Normal</td> <td>Male</td> <td>Home and lifestyle</td> <td>46.330000</td> <td>7</td> <td>16.215500</td> <td>340.525500</td> <td>3/3/2019</td> <td>13:23</td> <td>Credit card</td> <td>324.310000</td> <td>4.761905</td> <td>16.215500</td> <td>7.400000</td> </tr> <tr> <th>3</th> <td>123-19-1176</td> <td>A</td> <td>Yangon</td> <td>Member</td> <td>Male</td> <td>Health and beauty</td> <td>58.220000</td> <td>8</td> <td>23.288000</td> <td>489.048000</td> <td>1/27/2019</td> <td>20:33</td> <td>Ewallet</td> <td>465.760000</td> <td>4.761905</td> <td>23.288000</td> <td>8.400000</td> </tr> <tr> <th>4</th> <td>373-73-7910</td> <td>A</td> <td>Yangon</td> <td>Normal</td> <td>Male</td> <td>Sports and travel</td> <td>86.310000</td> <td>7</td> <td>30.208500</td> <td>634.378500</td> <td>2/8/2019</td> <td>10:37</td> <td>Ewallet</td> <td>604.170000</td> <td>4.761905</td> <td>30.208500</td> <td>5.300000</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>995</th> <td>233-67-5758</td> <td>C</td> <td>Naypyitaw</td> <td>Normal</td> <td>Male</td> <td>Health and beauty</td> <td>40.350000</td> <td>1</td> <td>2.017500</td> <td>42.367500</td> <td>1/29/2019</td> <td>13:46</td> <td>Ewallet</td> <td>40.350000</td> <td>4.761905</td> <td>2.017500</td> <td>6.200000</td> </tr> <tr> <th>996</th> <td>303-96-2227</td> <td>B</td> <td>Mandalay</td> <td>Normal</td> <td>Female</td> <td>Home and lifestyle</td> <td>97.380000</td> <td>10</td> <td>48.690000</td> <td>1,022.490000</td> <td>3/2/2019</td> <td>17:16</td> <td>Ewallet</td> <td>973.800000</td> <td>4.761905</td> <td>48.690000</td> <td>4.400000</td> </tr> <tr> <th>997</th> <td>727-02-1313</td> <td>A</td> <td>Yangon</td> <td>Member</td> <td>Male</td> <td>Food and beverages</td> <td>31.840000</td> <td>1</td> <td>1.592000</td> <td>33.432000</td> <td>2/9/2019</td> <td>13:22</td> <td>Cash</td> <td>31.840000</td> <td>4.761905</td> <td>1.592000</td> <td>7.700000</td> </tr> <tr> <th>998</th> <td>347-56-2442</td> <td>A</td> <td>Yangon</td> <td>Normal</td> <td>Male</td> <td>Home and lifestyle</td> <td>65.820000</td> <td>1</td> <td>3.291000</td> <td>69.111000</td> <td>2/22/2019</td> <td>15:33</td> <td>Cash</td> <td>65.820000</td> <td>4.761905</td> <td>3.291000</td> <td>4.100000</td> </tr> <tr> <th>999</th> <td>849-09-3807</td> <td>A</td> <td>Yangon</td> <td>Member</td> <td>Female</td> <td>Fashion accessories</td> <td>88.340000</td> <td>7</td> <td>30.919000</td> <td>649.299000</td> <td>2/18/2019</td> <td>13:28</td> <td>Cash</td> <td>618.380000</td> <td>4.761905</td> <td>30.919000</td> <td>6.600000</td> </tr> </tbody> </table> <p>1000 rows × 17 columns</p> </div> <div class=highlight><pre><span></span><code><span class=c1># One-way ANOVA</span>
<span class=n>model</span> <span class=o>=</span> <span class=n>ols</span><span class=p>(</span><span class=s1>&#39;gross_income ~ C(branch)&#39;</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>df</span><span class=p>)</span><span class=o>.</span><span class=n>fit</span><span class=p>()</span>
<span class=n>anova_tbl</span> <span class=o>=</span> <span class=n>sm</span><span class=o>.</span><span class=n>stats</span><span class=o>.</span><span class=n>anova_lm</span><span class=p>(</span><span class=n>model</span><span class=p>,</span> <span class=n>typ</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>anova_tbl</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code>                  sum_sq         df        F   PR(&gt;F)
C(branch)     242.602644   2.000000 0.884583 0.413210
Residual  136,716.894906 997.000000      NaN      NaN
</code></pre></div> <div class=highlight><pre><span></span><code><span class=c1># Levene test for homogeneity of variances</span>
<span class=kn>from</span><span class=w> </span><span class=nn>scipy.stats</span><span class=w> </span><span class=kn>import</span> <span class=n>levene</span>
<span class=n>branch_a</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;branch&#39;</span><span class=p>]</span><span class=o>==</span><span class=s1>&#39;A&#39;</span><span class=p>][</span><span class=s1>&#39;gross_income&#39;</span><span class=p>]</span>
<span class=n>branch_b</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;branch&#39;</span><span class=p>]</span><span class=o>==</span><span class=s1>&#39;B&#39;</span><span class=p>][</span><span class=s1>&#39;gross_income&#39;</span><span class=p>]</span>
<span class=n>branch_c</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;branch&#39;</span><span class=p>]</span><span class=o>==</span><span class=s1>&#39;C&#39;</span><span class=p>][</span><span class=s1>&#39;gross_income&#39;</span><span class=p>]</span>
<span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Levene p-value:&quot;</span><span class=p>,</span> <span class=n>levene</span><span class=p>(</span><span class=n>branch_a</span><span class=p>,</span> <span class=n>branch_b</span><span class=p>,</span> <span class=n>branch_c</span><span class=p>)</span><span class=o>.</span><span class=n>pvalue</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code>Levene p-value: 0.08946425577002974
</code></pre></div> <div class=highlight><pre><span></span><code><span class=c1># Tukey HSD post-hoc</span>
<span class=n>tukey</span> <span class=o>=</span> <span class=n>pairwise_tukeyhsd</span><span class=p>(</span><span class=n>endog</span><span class=o>=</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;gross_income&#39;</span><span class=p>],</span> <span class=n>groups</span><span class=o>=</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;branch&#39;</span><span class=p>],</span> <span class=n>alpha</span><span class=o>=</span><span class=mf>0.05</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>tukey</span><span class=o>.</span><span class=n>summary</span><span class=p>())</span>
</code></pre></div> <div class=highlight><pre><span></span><code>Multiple Comparison of Means - Tukey HSD, FWER=0.05
===================================================
group1 group2 meandiff p-adj   lower  upper  reject
---------------------------------------------------
     A      B    0.358 0.9171 -1.7627 2.4788  False
     A      C   1.1784 0.3954 -0.9489 3.3057  False
     B      C   0.8203 0.6405 -1.3195 2.9602  False
---------------------------------------------------
</code></pre></div> <p><strong>Decision rule:</strong> If ANOVA <em>p</em> &lt; 0.05, reject <span class=arithmatex>\(H_0\)</span> and use <strong>Tukey HSD</strong> to identify differing pairs. If Levene <em>p</em> &lt; 0.05, consider Welch’s ANOVA or robust alternatives. </p> <p>As p=0.413 (<em>PR(&gt;F) = 0.413</em>) is greater than 5%, we can fail to reject the Null hypothesis and claim that the three branches have similar gross revenue. Additionally we can see that the variances are homogeneous (as Levene's p-value &gt; 5%) and t-tests between each combination shows no significance (Tukey's test is essentially a t-test, except that it corrects for family-wise error rate). </p> <div class=highlight><pre><span></span><code><span class=n>bi_variate_boxplot</span> <span class=o>=</span> <span class=n>sns</span><span class=o>.</span><span class=n>boxplot</span><span class=p>(</span><span class=n>x</span><span class=o>=</span><span class=s2>&quot;branch&quot;</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=s2>&quot;gross_income&quot;</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>df</span><span class=p>)</span>
<span class=n>bi_variate_boxplot</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>title</span> <span class=o>=</span> <span class=s1>&#39;Box Chart of gross income across branches&#39;</span><span class=p>);</span>
</code></pre></div> <p><img alt=png src=output_20_0.png></p> <h2 id=chisquare-test-of-independence-gender-product-category-retail>Chi‑Square Test of Independence: Gender × Product Category (Retail)<a class=headerlink href=#chisquare-test-of-independence-gender-product-category-retail title="Permanent link">&para;</a></h2> <p>In multi‑category retail, merchandising teams care deeply about who buys what. This real customer shopping dataset covers transactions across multiple shopping malls in Istanbul (2021–2023) and includes gender and product category for each purchase. We’ll test whether product category preferences differ by gender, which can inform assortment planning, aisle placement, personalized recommendations, targeted promotions, and store layout decisions.<br> <strong>Variables</strong>:<br> - gender ∈ {Male, Female}<br> - category ∈ {e.g., Clothing, Electronics, Accessories, …} (multiple categories present in the file) </p> <p><strong>Hypotheses (Chi‑Square Test of Independence)</strong>:<br> <span class=arithmatex>\(H_0\)</span>: Gender and product category are independent (no association).<br> <span class=arithmatex>\(H_1\)</span>: Gender and product category are associated (category preference depends on gender). </p> <p><strong>Why it matters</strong>:<br> A significant association suggests different category affinities by gender. Retailers can adjust promotions, content, inventory mix, and store displays to better match demand, which often improves conversion rates and gross margin. </p> <p><strong>Assumptions &amp; Data Checks</strong>:<br> - Sufficient expected counts (preferably ≥ 5 per cell). If some categories are rare, consider grouping similar categories or analyzing the top N categories to satisfy assumptions.<br> - Observations are independent (each row is a separate transaction).<br> (These are standard conditions for the Chi‑Square test in categorical analysis.)</p> <p><strong>Dataset Source</strong>:<br> Customer Shopping Data (GitHub) — file: <a href=https://github.com/gokcengiz/Shopping-data-analysis>customer_shopping_data.csv</a> </p> <p><strong>Interpretation</strong>:<br> 1. If p &lt; 0.05, reject <span class=arithmatex>\(H_0\)</span>: gender and product category are associated.<br> 2. Cramér’s V indicates strength of association: ~0.1 = weak, ~0.3 = moderate, ~0.5 = strong. </p> <p>We compute the Chi‑square test of independence and <strong>Cramér’s V</strong> as an effect size. </p> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=nn>pandas</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pd</span>
<span class=kn>from</span><span class=w> </span><span class=nn>scipy.stats</span><span class=w> </span><span class=kn>import</span> <span class=n>chi2_contingency</span>
<span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span>

<span class=c1># Load dataset</span>
<span class=n>url</span> <span class=o>=</span> <span class=s2>&quot;https://raw.githubusercontent.com/gokcengiz/Shopping-data-analysis/main/customer_shopping_data.csv&quot;</span>
<span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
<span class=n>df</span>
</code></pre></div> <div> <style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style> <table border=1 class=dataframe> <thead> <tr style="text-align: right;"> <th></th> <th>invoice_no</th> <th>customer_id</th> <th>gender</th> <th>age</th> <th>category</th> <th>quantity</th> <th>price</th> <th>payment_method</th> <th>invoice_date</th> <th>shopping_mall</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>I138884</td> <td>C241288</td> <td>Female</td> <td>28</td> <td>Clothing</td> <td>5</td> <td>1,500.400000</td> <td>Credit Card</td> <td>5/8/2022</td> <td>Kanyon</td> </tr> <tr> <th>1</th> <td>I317333</td> <td>C111565</td> <td>Male</td> <td>21</td> <td>Shoes</td> <td>3</td> <td>1,800.510000</td> <td>Debit Card</td> <td>12/12/2021</td> <td>Forum Istanbul</td> </tr> <tr> <th>2</th> <td>I127801</td> <td>C266599</td> <td>Male</td> <td>20</td> <td>Clothing</td> <td>1</td> <td>300.080000</td> <td>Cash</td> <td>9/11/2021</td> <td>Metrocity</td> </tr> <tr> <th>3</th> <td>I173702</td> <td>C988172</td> <td>Female</td> <td>66</td> <td>Shoes</td> <td>5</td> <td>3,000.850000</td> <td>Credit Card</td> <td>16/05/2021</td> <td>Metropol AVM</td> </tr> <tr> <th>4</th> <td>I337046</td> <td>C189076</td> <td>Female</td> <td>53</td> <td>Books</td> <td>4</td> <td>60.600000</td> <td>Cash</td> <td>24/10/2021</td> <td>Kanyon</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>99452</th> <td>I219422</td> <td>C441542</td> <td>Female</td> <td>45</td> <td>Souvenir</td> <td>5</td> <td>58.650000</td> <td>Credit Card</td> <td>21/09/2022</td> <td>Kanyon</td> </tr> <tr> <th>99453</th> <td>I325143</td> <td>C569580</td> <td>Male</td> <td>27</td> <td>Food &amp; Beverage</td> <td>2</td> <td>10.460000</td> <td>Cash</td> <td>22/09/2021</td> <td>Forum Istanbul</td> </tr> <tr> <th>99454</th> <td>I824010</td> <td>C103292</td> <td>Male</td> <td>63</td> <td>Food &amp; Beverage</td> <td>2</td> <td>10.460000</td> <td>Debit Card</td> <td>28/03/2021</td> <td>Metrocity</td> </tr> <tr> <th>99455</th> <td>I702964</td> <td>C800631</td> <td>Male</td> <td>56</td> <td>Technology</td> <td>4</td> <td>4,200.000000</td> <td>Cash</td> <td>16/03/2021</td> <td>Istinye Park</td> </tr> <tr> <th>99456</th> <td>I232867</td> <td>C273973</td> <td>Female</td> <td>36</td> <td>Souvenir</td> <td>3</td> <td>35.190000</td> <td>Credit Card</td> <td>15/10/2022</td> <td>Mall of Istanbul</td> </tr> </tbody> </table> <p>99457 rows × 10 columns</p> </div> <div class=highlight><pre><span></span><code><span class=c1># Build contingency table: Gender vs Payment Method</span>
<span class=n>ct</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>crosstab</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;category&#39;</span><span class=p>],</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;gender&#39;</span><span class=p>])</span>
<span class=n>chi2</span><span class=p>,</span> <span class=n>p</span><span class=p>,</span> <span class=n>dof</span><span class=p>,</span> <span class=n>expected</span> <span class=o>=</span> <span class=n>chi2_contingency</span><span class=p>(</span><span class=n>ct</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Contingency Table:</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>ct</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Chi-square = </span><span class=si>{</span><span class=n>chi2</span><span class=si>:</span><span class=s2>.4f</span><span class=si>}</span><span class=s2>, p-value = </span><span class=si>{</span><span class=n>p</span><span class=si>:</span><span class=s2>.6f</span><span class=si>}</span><span class=s2>, dof = </span><span class=si>{</span><span class=n>dof</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code>Contingency Table:
 gender           Female   Male
category                      
Books              2906   2075
Clothing          20652  13835
Cosmetics          9070   6027
Food &amp; Beverage    8804   5972
Shoes              5967   4067
Souvenir           3017   1982
Technology         2981   2015
Toys               6085   4002
Chi-square = 7.5679, p-value = 0.372234, dof = 7
</code></pre></div> <p>A p value of 0.37 &gt; 0.05 indicates that we Fail to reject the Null Hypothesis. There is no difference between the genders with respect to category.</p> <div class=highlight><pre><span></span><code><span class=c1># Compute Cramér&#39;s V</span>
<span class=n>n</span> <span class=o>=</span> <span class=n>ct</span><span class=o>.</span><span class=n>values</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
<span class=n>phi2</span> <span class=o>=</span> <span class=n>chi2</span> <span class=o>/</span> <span class=n>n</span>
<span class=n>r</span><span class=p>,</span> <span class=n>c</span> <span class=o>=</span> <span class=n>ct</span><span class=o>.</span><span class=n>shape</span>
<span class=n>cramers_v</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>phi2</span> <span class=o>/</span> <span class=nb>min</span><span class=p>(</span><span class=n>r</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=n>c</span><span class=o>-</span><span class=mi>1</span><span class=p>))</span>

<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Cramér&#39;s V = </span><span class=si>{</span><span class=n>cramers_v</span><span class=si>:</span><span class=s2>.3f</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div> <div class=highlight><pre><span></span><code>Cramér&#39;s V = 0.009
</code></pre></div> <p>0.009 indicates a very weak association</p> <div class=highlight><pre><span></span><code><span class=kn>from</span><span class=w> </span><span class=nn>statsmodels.graphics.mosaicplot</span><span class=w> </span><span class=kn>import</span> <span class=n>mosaic</span>
<span class=k>def</span><span class=w> </span><span class=nf>plot_mosaics</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>x_col</span><span class=p>,</span> <span class=n>y_col</span><span class=p>,</span> <span class=n>title</span><span class=o>=</span><span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>colors_list</span> <span class=o>=</span><span class=p>[]):</span>
    <span class=n>dict_of_tuples</span> <span class=o>=</span> <span class=p>{}</span>

    <span class=c1># create the clean set of percentages to print</span>
    <span class=k>for</span> <span class=n>x_col_</span> <span class=ow>in</span> <span class=n>data</span><span class=p>[</span><span class=n>x_col</span><span class=p>]</span><span class=o>.</span><span class=n>unique</span><span class=p>():</span>
        <span class=k>for</span> <span class=n>y_col_</span> <span class=ow>in</span> <span class=n>data</span><span class=p>[</span><span class=n>y_col</span><span class=p>]</span><span class=o>.</span><span class=n>unique</span><span class=p>():</span>
            <span class=n>n</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>data</span><span class=p>[(</span><span class=n>data</span><span class=p>[</span><span class=n>x_col</span><span class=p>]</span><span class=o>==</span><span class=n>x_col_</span><span class=p>)</span><span class=o>&amp;</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>y_col</span><span class=p>]</span><span class=o>==</span><span class=n>y_col_</span><span class=p>)][</span><span class=n>x_col</span><span class=p>])</span>
            <span class=n>d</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>data</span><span class=p>[(</span><span class=n>data</span><span class=p>[</span><span class=n>x_col</span><span class=p>]</span><span class=o>==</span><span class=n>x_col_</span><span class=p>)][</span><span class=n>x_col</span><span class=p>])</span>
            <span class=n>len_</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>x_col</span><span class=p>])</span>
            <span class=k>if</span><span class=p>((</span><span class=n>d</span><span class=o>==</span><span class=mi>0</span><span class=p>)</span> <span class=ow>or</span> <span class=p>(</span><span class=n>n</span><span class=o>/</span><span class=n>d</span><span class=o>&lt;=</span><span class=mf>0.04</span><span class=p>)):</span>
                <span class=c1># if the percentage within a class is less than 4%, do not print the percentage</span>
                <span class=n>dict_of_tuples</span><span class=p>[(</span><span class=nb>str</span><span class=p>(</span><span class=n>x_col_</span><span class=p>),</span> <span class=nb>str</span><span class=p>(</span><span class=n>y_col_</span><span class=p>))]</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span>
            <span class=k>elif</span><span class=p>(</span><span class=n>n</span><span class=o>/</span><span class=n>len_</span><span class=o>&lt;=</span><span class=mf>0.02</span><span class=p>):</span>
                <span class=c1># If its a tiny class with less than 2% of the total data, do not print</span>
                <span class=n>dict_of_tuples</span><span class=p>[(</span><span class=nb>str</span><span class=p>(</span><span class=n>x_col_</span><span class=p>),</span> <span class=nb>str</span><span class=p>(</span><span class=n>y_col_</span><span class=p>))]</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>dict_of_tuples</span><span class=p>[(</span><span class=nb>str</span><span class=p>(</span><span class=n>x_col_</span><span class=p>),</span> <span class=nb>str</span><span class=p>(</span><span class=n>y_col_</span><span class=p>))]</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>n</span><span class=o>/</span><span class=n>d</span><span class=o>*</span><span class=mi>100</span><span class=p>))</span><span class=o>+</span><span class=s2>&quot;%&quot;</span>

    <span class=n>dict_of_colors</span> <span class=o>=</span> <span class=n>dict_of_tuples</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
    <span class=k>if</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>colors_list</span><span class=p>)</span><span class=o>&gt;</span><span class=mi>0</span><span class=p>):</span>
        <span class=c1># create a clean set of colors</span>
        <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>x_col_</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>x_col</span><span class=p>]</span><span class=o>.</span><span class=n>unique</span><span class=p>()):</span>
            <span class=k>for</span> <span class=n>y_col_</span> <span class=ow>in</span> <span class=n>data</span><span class=p>[</span><span class=n>y_col</span><span class=p>]</span><span class=o>.</span><span class=n>unique</span><span class=p>():</span>
                <span class=n>dict_of_colors</span><span class=p>[(</span><span class=nb>str</span><span class=p>(</span><span class=n>x_col_</span><span class=p>),</span> <span class=nb>str</span><span class=p>(</span><span class=n>y_col_</span><span class=p>))]</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;color&#39;</span><span class=p>:</span><span class=n>colors_list</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=s1>&#39;alpha&#39;</span><span class=p>:</span><span class=mf>0.8</span><span class=p>}</span>

    <span class=c1># Plot the mosaic plot</span>
    <span class=n>labelizer</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>k</span><span class=p>:</span> <span class=n>dict_of_tuples</span><span class=p>[</span><span class=n>k</span><span class=p>]</span>    
    <span class=n>fig</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>8</span><span class=p>,</span><span class=mi>6</span><span class=p>))</span>
    <span class=k>if</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>colors_list</span><span class=p>)</span><span class=o>&gt;</span><span class=mi>0</span><span class=p>):</span>
        <span class=n>mosaic</span><span class=p>(</span><span class=n>data</span><span class=o>.</span><span class=n>sort_values</span><span class=p>([</span><span class=n>x_col</span><span class=p>,</span> <span class=n>y_col</span><span class=p>]),</span> <span class=p>[</span><span class=n>x_col</span><span class=p>,</span> <span class=n>y_col</span><span class=p>],</span> 
               <span class=n>statistic</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span> <span class=n>axes_label</span> <span class=o>=</span> <span class=kc>True</span><span class=p>,</span> <span class=n>label_rotation</span> <span class=o>=</span> <span class=p>[</span><span class=mi>90</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>
               <span class=n>labelizer</span><span class=o>=</span><span class=n>labelizer</span><span class=p>,</span> <span class=n>properties</span><span class=o>=</span><span class=n>dict_of_colors</span><span class=p>,</span> <span class=n>gap</span><span class=o>=</span><span class=mf>0.008</span><span class=p>,</span> <span class=n>ax</span><span class=o>=</span><span class=n>ax</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>mosaic</span><span class=p>(</span><span class=n>data</span><span class=o>.</span><span class=n>sort_values</span><span class=p>([</span><span class=n>x_col</span><span class=p>,</span> <span class=n>y_col</span><span class=p>]),</span> <span class=p>[</span><span class=n>x_col</span><span class=p>,</span> <span class=n>y_col</span><span class=p>],</span> 
               <span class=n>statistic</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span> <span class=n>axes_label</span> <span class=o>=</span> <span class=kc>True</span><span class=p>,</span> <span class=n>label_rotation</span> <span class=o>=</span> <span class=p>[</span><span class=mi>90</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>
               <span class=n>labelizer</span><span class=o>=</span><span class=n>labelizer</span><span class=p>,</span> <span class=n>gap</span><span class=o>=</span><span class=mf>0.008</span><span class=p>,</span> <span class=n>ax</span><span class=o>=</span><span class=n>ax</span><span class=p>)</span>
    <span class=k>if</span><span class=p>(</span><span class=n>title</span><span class=o>==</span><span class=s1>&#39;&#39;</span><span class=p>):</span>
        <span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>y_col</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39; percentages across &#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>x_col</span><span class=p>))</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=n>title</span><span class=p>)</span>
    <span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>();</span>
<span class=n>plot_mosaics</span><span class=p>(</span><span class=n>df</span><span class=p>,</span> <span class=s1>&#39;category&#39;</span><span class=p>,</span> <span class=s1>&#39;gender&#39;</span><span class=p>)</span>
</code></pre></div> <p><img alt=png src=output_26_0.png></p> <p><strong>Decision rule:</strong> If <em>p</em> &lt; 0.05, reject <span class=arithmatex>\(H_0\)</span>. Report <strong>Cramér’s V</strong> to quantify the association strength. <br> As p is greater than 5%, we fail to reject the null hypothesis, indicating no significant association between gender and product category. </p> <h2 id=references>References<a class=headerlink href=#references title="Permanent link">&para;</a></h2> <ul> <li>Udacity A/B test (ab_data.csv) GitHub mirror: <a href=https://github.com/beery4010/Analyze-AB-Test-Results>https://github.com/beery4010/Analyze-AB-Test-Results</a> </li> <li>ToothGrowth dataset (Rdatasets CSV): <a href=https://github.com/vincentarelbundock/Rdatasets/blob/master/csv/datasets/ToothGrowth.csv>https://github.com/vincentarelbundock/Rdatasets/blob/master/csv/datasets/ToothGrowth.csv</a> </li> <li>Supermarket Sales dataset (selva86/datasets CSV): <a href=https://github.com/selva86/datasets/blob/master/supermarket_sales.csv>https://github.com/selva86/datasets/blob/master/supermarket_sales.csv</a> </li> <li>Retail data : <a href=https://github.com/gokcengiz/Shopping-data-analysis>https://github.com/gokcengiz/Shopping-data-analysis</a></li> </ul> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../R/chi-sq-test-of-independence/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Chi-Square test of independence (R)" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Chi-Square test of independence (R) </div> </div> </a> <a href=../../R/Curse-of-Dimensionality/ class="md-footer__link md-footer__link--next" aria-label="Next: Curse of dimensionality" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Curse of dimensionality </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> <img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by/4.0/88x31.png> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-contact style="text-align: center; margin: 1rem 0;"> <a href=../../contact title="Contact Me" style="display: inline-flex; align-items: center; gap: 0.5rem; color: rgba(255, 255, 255, 0.7); text-decoration: none;"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24" style="width: 1.2rem; height: 1.2rem; fill: rgba(255, 255, 255, 0.7);"> <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/> </svg> <span>Contact Me</span> </a> </div> <div class=md-footer-social> <a href=https://github.com/HarshaAsh target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://www.linkedin.com/in/sri-harsha-achyuthuni/ target=_blank rel=noopener title=www.linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://www.instagram.com/harshaash_com/ target=_blank rel=noopener title=www.instagram.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg> </a> <a href=https://www.facebook.com/sri.harsha.achyuthuni/ target=_blank rel=noopener title=www.facebook.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.tabs.link", "header.autohide", "navigation.sections", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../../assets/javascripts/workers/search.709b4209.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.56838a2c.min.js></script> </body> </html>